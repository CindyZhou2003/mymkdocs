
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Cindyçš„ç¬”è®°æœ¬">
      
      
      
        <link rel="canonical" href="https://cindyzhou2003.github.io/mymkdocs/ZJU/OS.html">
      
      
        <link rel="prev" href="PIS.html">
      
      
        <link rel="next" href="CN.html">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favcion.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>æ“ä½œç³»ç»Ÿ - Cindyçš„ç¬”è®°æœ¬</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=LXGW+WenKai:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"LXGW WenKai";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../css/style.css">
    
      <link rel="stylesheet" href="../css/font.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="forest" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#operating-system-concepts" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href=".." title="Cindyçš„ç¬”è®°æœ¬" class="md-header__button md-logo" aria-label="Cindyçš„ç¬”è®°æœ¬" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M384 512H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h304c26.5 0 48 21.5 48 48v288c0 20.9-13.4 38.7-32 45.3V448c17.7 0 32 14.3 32 32s-14.3 32-32 32zM96 384c-17.7 0-32 14.3-32 32s14.3 32 32 32h256v-64zm32-232c0 13.3 10.7 24 24 24h176c13.3 0 24-10.7 24-24s-10.7-24-24-24H152c-13.3 0-24 10.7-24 24m24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24h176c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cindyçš„ç¬”è®°æœ¬
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              æ“ä½œç³»ç»Ÿ
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="forest" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="forest-dark" data-md-color-primary="Brown" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="åˆ†äº«" aria-label="åˆ†äº«" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/CindyZhou2003/mymkdocs" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Cindy's notebook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="æ ‡ç­¾" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index.html" class="md-tabs__link">
          
  
  
    
  
  ä¸»é¡µğŸ¤–

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="DM.html" class="md-tabs__link">
          
  
  
    
  
  ZJU-SEè¯¾ç¨‹ğŸ“

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../UIUC/ECE408.html" class="md-tabs__link">
          
  
  
    
  
  UIUC-MEng coursesğŸ“š

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../skills/Algorithm.html" class="md-tabs__link">
          
  
  
    
  
  æŠ€èƒ½âš™ï¸

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../abroad/IELTs_speaking1.html" class="md-tabs__link">
          
  
  
    
  
  å‡ºå›½âœˆï¸

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../work/Interview.html" class="md-tabs__link">
          
  
  
    
  
  æ‰¾å·¥

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../other/test.html" class="md-tabs__link">
          
  
  
    
  
  å…¶ä»–ğŸŠ

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cindyçš„ç¬”è®°æœ¬" class="md-nav__button md-logo" aria-label="Cindyçš„ç¬”è®°æœ¬" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M384 512H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h304c26.5 0 48 21.5 48 48v288c0 20.9-13.4 38.7-32 45.3V448c17.7 0 32 14.3 32 32s-14.3 32-32 32zM96 384c-17.7 0-32 14.3-32 32s14.3 32 32 32h256v-64zm32-232c0 13.3 10.7 24 24 24h176c13.3 0 24-10.7 24-24s-10.7-24-24-24H152c-13.3 0-24 10.7-24 24m24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24h176c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/></svg>

    </a>
    Cindyçš„ç¬”è®°æœ¬
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CindyZhou2003/mymkdocs" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Cindy's notebook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    ä¸»é¡µğŸ¤–
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    ä¸»é¡µğŸ¤–
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    ZJU-SEè¯¾ç¨‹ğŸ“
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    ZJU-SEè¯¾ç¨‹ğŸ“
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    å¤§ä¸€æ˜¥å¤
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    å¤§ä¸€æ˜¥å¤
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DM.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    å¤§äºŒç§‹å†¬
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    å¤§äºŒç§‹å†¬
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="OOP.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="FDS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    æ•°æ®ç»“æ„åŸºç¡€
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    å¤§äºŒæ˜¥å¤
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    å¤§äºŒæ˜¥å¤
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    é«˜çº§æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DB.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    æ•°æ®åº“ç³»ç»Ÿ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ML.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    æœºå™¨å­¦ä¹ ï¼ˆå›½é™…åŒ–ï¼‰
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="PIS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ä¿¡æ¯å®‰å…¨åŸç†
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    å¤§ä¸‰ç§‹å†¬
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    å¤§ä¸‰ç§‹å†¬
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    æ“ä½œç³»ç»Ÿ
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="OS.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    æ“ä½œç³»ç»Ÿ
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¦‚è¿° Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ¦‚è¿° Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»ŸåŠŸèƒ½&amp;å®šä¹‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#atomic-operation" class="md-nav__link">
    <span class="md-ellipsis">
      
        åŸè¯­ atomic operation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸­æ–­ interrupt
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        å­˜å‚¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        è®¡ç®—æœºä½“ç³»ç»“æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»Ÿè®¾è®¡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process management è¿›ç¨‹ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Memory management å†…å­˜ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        File management æ–‡ä»¶ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Storage management å­˜å‚¨ç®¡ç†
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-purposes" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ€»ç»“ OS purposes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operating-system-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç»“æ„ Operating-System Structures
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ç»“æ„ Operating-System Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»ŸæœåŠ¡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-call" class="md-nav__link">
    <span class="md-ellipsis">
      
        System call ç³»ç»Ÿè°ƒç”¨
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System call ç³»ç»Ÿè°ƒç”¨">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿè°ƒç”¨å®ç°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        å‚æ•°ä¼ é€’
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿè°ƒç”¨åˆ†ç±»/åŠŸèƒ½
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿç¨‹åº
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os" class="md-nav__link">
    <span class="md-ellipsis">
      
        os è®¾è®¡å’Œå®ç°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»Ÿç»“æ„
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ“ä½œç³»ç»Ÿç»“æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Simple Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unix" class="md-nav__link">
    <span class="md-ellipsis">
      
        UNIX
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monolithic-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Monolithic System Structure å®å†…æ ¸æ¶æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microkernel-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Microkernel System Structure å¾®å†…æ ¸
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hybrid-structuredarwin" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hybrid Structureâ€”â€”Darwin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layered-approach" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layered Approach åˆ†å±‚æ–¹æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modules æ¨¡å—åŒ–
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Structures
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-machines" class="md-nav__link">
    <span class="md-ellipsis">
      
        è™šæ‹Ÿæœº Virtual Machines
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è™šæ‹Ÿæœº Virtual Machines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        åˆ†ç±»
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hypervisor" class="md-nav__link">
    <span class="md-ellipsis">
      
        HyperVisor
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OS ç”Ÿæˆ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-boot" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿå¯åŠ¨ System Boot
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processes" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹ Processes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹ Processes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹æ¦‚å¿µ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹æ¦‚å¿µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        å®šä¹‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process state
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-control-blockpcb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process control block(PCB)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹è°ƒåº¦ scheduling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹è°ƒåº¦ scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-scheduling-queues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Scheduling Queues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedulers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schedulers è°ƒåº¦å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-switch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context Switch ä¸Šä¸‹æ–‡åˆ‡æ¢
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹æ“ä½œ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹æ“ä½œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Creation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Termination
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cooperating" class="md-nav__link">
    <span class="md-ellipsis">
      
        å…±åŒåä½œ cooperating
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å…±åŒåä½œ cooperating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cooperating-processes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cooperating Processes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#producer-consumer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Producer-consumer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹é—´é€šä¿¡
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹é—´é€šä¿¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interprocess-communication-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interprocess Communication (IPC)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-communication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Direct Communication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indirect-communication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Indirect Communication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Synchronization åŒæ­¥æ€§
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#communication-in-client-server-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Communication in Client-Server Systems
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Communication in Client-Server Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sockets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sockets
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threads" class="md-nav__link">
    <span class="md-ellipsis">
      
        çº¿ç¨‹ Threads
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="çº¿ç¨‹ Threads">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-and-multithreaded-processes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single and Multithreaded Processes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benfits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benfits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-level-threadsult" class="md-nav__link">
    <span class="md-ellipsis">
      
        User Level Threads(ULT)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-level-threadsklt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kernel Level Threads(KLT)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multithreading-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multithreading Models
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multithreading Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#many-to-one-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Many-to-one Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one-to-one" class="md-nav__link">
    <span class="md-ellipsis">
      
        One-to-one
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#many-to-many-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Many-to-Many Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-level-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Two-level Model
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#threading-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Threading Issues
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Threading Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread-cancellation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Thread Cancellation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Signal Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-pools" class="md-nav__link">
    <span class="md-ellipsis">
      
        Thread Pools çº¿ç¨‹æ± 
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-activations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scheduler Activations è°ƒåº¦æ¿€æ´»
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        è°ƒåº¦ CPU Scheduling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è°ƒåº¦ CPU Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      
        CPU Scheduler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispacher" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dispacher
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      
        scheduling criteria
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        è°ƒåº¦ç®—æ³• scheduling algorithms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è°ƒåº¦ç®—æ³• scheduling algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fcfsfirst-come-first-served" class="md-nav__link">
    <span class="md-ellipsis">
      
        FCFS(First-Come, First-Served)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sjfshortest-job-first" class="md-nav__link">
    <span class="md-ellipsis">
      
        SJF(Shortest-Job-First)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Priority Scheduling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highest-response-ratio-next-hrrn" class="md-nav__link">
    <span class="md-ellipsis">
      
        Highest Response Ratio Next ï¼ˆHRRNï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#round-robin-rr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Round Robin (RR)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multilevel-queue" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multilevel Queue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-feedback-queue" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Feedback Queue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-processor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple-processor scheduling(äº†è§£)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Real-time scheduling(äº†è§£)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Thread scheduling(äº†è§£)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#process-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹åŒæ­¥ Process synchronization
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹åŒæ­¥ Process synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      
        èƒŒæ™¯ background
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="èƒŒæ™¯ background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#race-condition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Race condition ç«æ€æ¡ä»¶
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#critical-section-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      
        è§£å†³æ–¹æ¡ˆ solution
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        åŒæ­¥æœºåˆ¶
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="åŒæ­¥æœºåˆ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        è½¯ä»¶æ–¹æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç¡¬ä»¶æ–¹æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex-locks" class="md-nav__link">
    <span class="md-ellipsis">
      
        äº’æ–¥é” Mutex locks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphores" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¿¡å·é‡æ–¹æ³• Semaphores
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç®¡ç¨‹æ–¹æ³• monitor
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¾‹å­
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ­»é” Deadlock
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ­»é” Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-deadlock-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Deadlock Problem
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Deadlock Problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      
        äº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿæ¨¡å‹ System Model
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ç³»ç»Ÿæ¨¡å‹ System Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-allocation-graph" class="md-nav__link">
    <span class="md-ellipsis">
      
        èµ„æºåˆ†é…å›¾ Resource-Allocation Graph
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods-for-handling-deadlocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deadlock-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deadlock Prevention (é¢„é˜²)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-avoidance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deadlock Avoidance (é¿å…)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deadlock Detection ( æ£€æµ‹ )
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recovery-from-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recovery from Deadlock
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recovery from Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-preemption" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource Preemption
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-management_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        å†…å­˜ç®¡ç† Memory Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å†…å­˜ç®¡ç† Memory Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Background
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cache-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Hierarchy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multistep-processing-of-a-user-program" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multistep Processing of a User Program
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binding-of-instructions-and-data-to-memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Binding of Instructions and Data to Memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logical-vs-physical-address-space" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logical vs. Physical Address Space
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linking" class="md-nav__link">
    <span class="md-ellipsis">
      
        é“¾æ¥ Linking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        è£…å…¥ Loading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ€»ç»“
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contiguous-memory-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿ç»­åˆ†é… Contiguous Memory Allocation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿ç»­åˆ†é… Contiguous Memory Allocation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dynamic-storage-allocation-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        åŠ¨æ€åˆ†é…çš„ç®—æ³• Dynamic storage-allocation problem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fragmentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fragmentation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paging" class="md-nav__link">
    <span class="md-ellipsis">
      
        åˆ†é¡µ Paging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="åˆ†é¡µ Paging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#address-translation-scheme" class="md-nav__link">
    <span class="md-ellipsis">
      
        Address Translation Scheme
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paging-hardware-with-tlb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paging Hardware With TLB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effective-access-time" class="md-nav__link">
    <span class="md-ellipsis">
      
        Effective Access Time
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-protection-in-paged-scheme" class="md-nav__link">
    <span class="md-ellipsis">
      
        Memory Protection in Paged Scheme
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared-pages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shared Pages
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-of-the-page-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Structure of the Page Table
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Structure of the Page Table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hierarchical-paging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hierarchical Paging åˆ†çº§é¡µè¡¨/å¤šçº§é¡µè¡¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hashed-page-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hashed Page Tables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inverted-page-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        å€’æ’é¡µè¡¨ Inverted Page Tables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      
        é¡µè¡¨é¡¹è®¡ç®—
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        Swapping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#segmentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        åˆ†æ®µ Segmentation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-the-intel-pentium" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: The Intel Pentium
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example: The Intel Pentium">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intel-pentium-segmentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intel Pentium Segmentation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtual-memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Virtual Memory è™šæ‹Ÿå†…å­˜
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Virtual Memory è™šæ‹Ÿå†…å­˜">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Background
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#principle-of-locality" class="md-nav__link">
    <span class="md-ellipsis">
      
        principle of locality
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-creation_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Creation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#demand-paging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Demand Paging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Demand Paging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#valid-invalid-bit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Valid-Invalid Bit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-fault" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page Fault
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-of-demand-paging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance of Demand Paging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-on-write" class="md-nav__link">
    <span class="md-ellipsis">
      
        Copy-on-Write
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-replacement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page Replacement
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Page Replacement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-replacement_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page replacement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-replacement-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page Replacement Algorithms
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allocation-of-frames" class="md-nav__link">
    <span class="md-ellipsis">
      
        Allocation of Frames
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Allocation of Frames">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixed-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fixed Allocation å›ºå®šåˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Priority Allocation ä¼˜å…ˆçº§åˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#global-vs-local-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Global vs. Local Allocation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thrashing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Thrashing æŠ–åŠ¨ã€é¢ ç°¸
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Thrashing æŠ–åŠ¨ã€é¢ ç°¸">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#demand-paging-and-thrashing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Demand Paging and Thrashing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-set-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working-Set Model å·¥ä½œé›†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-fault-frequency-scheme" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page-Fault Frequency Scheme
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-mapped-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        å†…å­˜æ˜ å°„æ–‡ä»¶ Memory-Mapped Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allocating-kernel-memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Allocating Kernel Memory
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Allocating Kernel Memory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buddy-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Buddy System ï¼ˆä¼™ä¼´ç³»ç»Ÿï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slab-allocator" class="md-nav__link">
    <span class="md-ellipsis">
      
        Slab Allocator
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-issues-prepaging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Issues â€“ Prepaging ( é¢„è°ƒé¡µ )
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-issues-page-size" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Issues â€“ Page Size
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-issues-tlb-reach-tlb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Issues â€“ TLB Reachï¼ˆ TLB èŒƒå›´ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-issues-program-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Issues â€“ Program Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-system-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operating-System Examples
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-system-interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        File-System Interface
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File-System Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-concept" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Concept
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File Concept">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        File system
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-concept_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Concept
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operations-file-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operations &amp; file attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Open files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç›®å½•ç»“æ„ Directory Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ç›®å½•ç»“æ„ Directory Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#both-the-directory-structure-and-the-files-reside-on-disk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Both the directory structure and the files reside on disk
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operations-performed-on-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operations Performed on Directory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç›®å½•ä½œç”¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single-level-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single-Level Directory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-level-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Two-Level Directory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tree-structured-directories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tree-Structured Directories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acyclic-graph-directories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Acyclic-Graph Directories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#soft-symbolic-link-vs-hard-link" class="md-nav__link">
    <span class="md-ellipsis">
      
        Soft (Symbolic) Link vs. Hard Link
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-system-mounting" class="md-nav__link">
    <span class="md-ellipsis">
      
        File-System Mounting æ–‡ä»¶ç³»ç»ŸæŒ‚è½½
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File-System Mounting æ–‡ä»¶ç³»ç»ŸæŒ‚è½½">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mount-point" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mount Point
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-sharing" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Sharing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File Sharing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-users" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Users
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-file-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Remote File Systems
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consistency-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consistency Semantics
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Protection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-lists-and-groups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Lists and Groups
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-system-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ–‡ä»¶ç³»ç»Ÿå®ç° File system Implementation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ–‡ä»¶ç³»ç»Ÿå®ç° File system Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        File-System Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File-System Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#layered-file-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layered File System åˆ†å±‚
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-structures-used-to-implement-fs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Structures Used to Implement FS
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fcb" class="md-nav__link">
    <span class="md-ellipsis">
      
        FCB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-memory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        In-memory Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-file-system-vfs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Virtual File System (VFS) è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directory-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Directory Implementation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allocation-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Allocation Methods
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Allocation Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contiguous-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Contiguous allocation è¿ç»­åˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linked-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linked allocation é“¾æ¥åˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexed-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Indexed allocation ç´¢å¼•åˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#free-space-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Free-Space Management ç£ç›˜ç©ºé—²ç©ºé—´ç®¡ç†
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Free-Space Management ç£ç›˜ç©ºé—²ç©ºé—´ç®¡ç†">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç©ºé—²è¡¨æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-map" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bit Map ä½ç¤ºå›¾
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linked-list" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linked list é“¾è¡¨æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protect" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protect
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#efficiency-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Efficiency and Performance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Efficiency and Performance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page Cache
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unified-buffer-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unified Buffer Cache
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mass-storage-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mass-Storage Systems
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mass-Storage Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-mass-storage-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview of Mass Storage Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview of Mass Storage Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#magnetic-disks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Magnetic disks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nonvolatile-memory-devices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nonvolatile Memory Devices
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Disk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disk-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk-attachment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk Attachment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-a-disk-page" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing a Disk Page
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk Scheduling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk Management
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swap-space-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Swap-Space Management
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#raid-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        RAID Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stable-storage-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Stable-Storage Implementation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Systems
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I/O Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io-hardware-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Hardware Application
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I/O Hardware Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io-port-registers" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Port Registers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-controling-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O controling methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-io-interface-io" class="md-nav__link">
    <span class="md-ellipsis">
      
        Application I/O Interface åº”ç”¨ç¨‹åº I/O æ¥å£
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-devices" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Devices
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocking-and-nonblocking-io" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blocking and Nonblocking I/O
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-io-interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kernel I/O Interface
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Kernel I/O Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kernel-io-subsystem" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kernel I/O Subsystem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-subsystem-transforming" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Subsystem Transforming
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-requests-to-hardware-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Requests to Hardware Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quiz-lab" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quiz &amp; LAB
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quiz &amp; LAB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quiz" class="md-nav__link">
    <span class="md-ellipsis">
      
        quiz
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab" class="md-nav__link">
    <span class="md-ellipsis">
      
        lab
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CN.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    è®¡ç®—æœºç½‘ç»œ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="%E6%AF%9B%E6%A6%82.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    æ¯›æ¦‚
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="IoT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ç‰©è”ç½‘æŠ€æœ¯åŸºç¡€ä¸åº”ç”¨å¼€å‘
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="SQAT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    è½¯ä»¶è´¨é‡ä¸ä¿è¯æµ‹è¯•
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    å¤§ä¸‰æ˜¥å¤
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    å¤§ä¸‰æ˜¥å¤
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CLDF.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    æ•°å­—é€»è¾‘è®¾è®¡
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="%E4%B9%A0%E6%A6%82.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ä¹ æ¦‚
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UIUC-MEng coursesğŸ“š
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    UIUC-MEng coursesğŸ“š
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Fall 2025
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Fall 2025
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../UIUC/ECE408.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ECE408/CS483 Applied Parallel Programming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../UIUC/ECE448.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ECE448/CS440 Artificial Intelligence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../UIUC/ECE598.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ECE498/598 Deep Generative Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Spring 2026
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Spring 2026
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../UIUC/CS498.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CS498 Machine Learning Systems
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../UIUC/ECE478.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CS477/ECE478 Formal Software Development Methods
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../UIUC/ECE544.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ECE544 Pattern Recognition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    æŠ€èƒ½âš™ï¸
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    æŠ€èƒ½âš™ï¸
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../skills/Algorithm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ç®—æ³•
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../skills/deeplearning.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    æ·±åº¦å­¦ä¹ 
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    å‡ºå›½âœˆï¸
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    å‡ºå›½âœˆï¸
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    é›…æ€å£è¯­
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    é›…æ€å£è¯­
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../abroad/IELTs_speaking1.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ç¬¬ä¸€æ¬¡
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../abroad/IELTs_speaking2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ç¬¬äºŒæ¬¡
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../abroad/IELTs_writing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    é›…æ€ä½œæ–‡
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    æ‰¾å·¥
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    æ‰¾å·¥
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../work/Interview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    é¢è¯•
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    å…¶ä»–ğŸŠ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    å…¶ä»–ğŸŠ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other/test.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other/Debug_issue.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    éƒ¨ç½²ç½‘ç«™æ—¶çš„é—®é¢˜
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ¦‚è¿° Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ¦‚è¿° Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»ŸåŠŸèƒ½&amp;å®šä¹‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#atomic-operation" class="md-nav__link">
    <span class="md-ellipsis">
      
        åŸè¯­ atomic operation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸­æ–­ interrupt
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        å­˜å‚¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        è®¡ç®—æœºä½“ç³»ç»“æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»Ÿè®¾è®¡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process management è¿›ç¨‹ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Memory management å†…å­˜ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        File management æ–‡ä»¶ç®¡ç†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Storage management å­˜å‚¨ç®¡ç†
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-purposes" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ€»ç»“ OS purposes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operating-system-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç»“æ„ Operating-System Structures
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ç»“æ„ Operating-System Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»ŸæœåŠ¡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-call" class="md-nav__link">
    <span class="md-ellipsis">
      
        System call ç³»ç»Ÿè°ƒç”¨
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System call ç³»ç»Ÿè°ƒç”¨">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿè°ƒç”¨å®ç°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        å‚æ•°ä¼ é€’
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿè°ƒç”¨åˆ†ç±»/åŠŸèƒ½
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿç¨‹åº
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os" class="md-nav__link">
    <span class="md-ellipsis">
      
        os è®¾è®¡å’Œå®ç°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ“ä½œç³»ç»Ÿç»“æ„
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ“ä½œç³»ç»Ÿç»“æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Simple Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unix" class="md-nav__link">
    <span class="md-ellipsis">
      
        UNIX
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monolithic-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Monolithic System Structure å®å†…æ ¸æ¶æ„
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microkernel-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Microkernel System Structure å¾®å†…æ ¸
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hybrid-structuredarwin" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hybrid Structureâ€”â€”Darwin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layered-approach" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layered Approach åˆ†å±‚æ–¹æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modules æ¨¡å—åŒ–
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Structures
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-machines" class="md-nav__link">
    <span class="md-ellipsis">
      
        è™šæ‹Ÿæœº Virtual Machines
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è™šæ‹Ÿæœº Virtual Machines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        åˆ†ç±»
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hypervisor" class="md-nav__link">
    <span class="md-ellipsis">
      
        HyperVisor
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OS ç”Ÿæˆ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-boot" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿå¯åŠ¨ System Boot
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processes" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹ Processes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹ Processes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹æ¦‚å¿µ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹æ¦‚å¿µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        å®šä¹‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process state
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-control-blockpcb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process control block(PCB)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹è°ƒåº¦ scheduling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹è°ƒåº¦ scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-scheduling-queues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Scheduling Queues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedulers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schedulers è°ƒåº¦å™¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-switch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context Switch ä¸Šä¸‹æ–‡åˆ‡æ¢
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹æ“ä½œ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹æ“ä½œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Creation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Termination
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cooperating" class="md-nav__link">
    <span class="md-ellipsis">
      
        å…±åŒåä½œ cooperating
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å…±åŒåä½œ cooperating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cooperating-processes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cooperating Processes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#producer-consumer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Producer-consumer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹é—´é€šä¿¡
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹é—´é€šä¿¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interprocess-communication-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interprocess Communication (IPC)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-communication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Direct Communication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indirect-communication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Indirect Communication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Synchronization åŒæ­¥æ€§
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#communication-in-client-server-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Communication in Client-Server Systems
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Communication in Client-Server Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sockets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sockets
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threads" class="md-nav__link">
    <span class="md-ellipsis">
      
        çº¿ç¨‹ Threads
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="çº¿ç¨‹ Threads">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-and-multithreaded-processes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single and Multithreaded Processes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benfits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benfits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-level-threadsult" class="md-nav__link">
    <span class="md-ellipsis">
      
        User Level Threads(ULT)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-level-threadsklt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kernel Level Threads(KLT)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multithreading-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multithreading Models
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multithreading Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#many-to-one-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Many-to-one Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one-to-one" class="md-nav__link">
    <span class="md-ellipsis">
      
        One-to-one
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#many-to-many-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Many-to-Many Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-level-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Two-level Model
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#threading-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Threading Issues
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Threading Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread-cancellation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Thread Cancellation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Signal Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-pools" class="md-nav__link">
    <span class="md-ellipsis">
      
        Thread Pools çº¿ç¨‹æ± 
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-activations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scheduler Activations è°ƒåº¦æ¿€æ´»
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        è°ƒåº¦ CPU Scheduling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è°ƒåº¦ CPU Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      
        CPU Scheduler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispacher" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dispacher
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      
        scheduling criteria
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        è°ƒåº¦ç®—æ³• scheduling algorithms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è°ƒåº¦ç®—æ³• scheduling algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fcfsfirst-come-first-served" class="md-nav__link">
    <span class="md-ellipsis">
      
        FCFS(First-Come, First-Served)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sjfshortest-job-first" class="md-nav__link">
    <span class="md-ellipsis">
      
        SJF(Shortest-Job-First)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Priority Scheduling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highest-response-ratio-next-hrrn" class="md-nav__link">
    <span class="md-ellipsis">
      
        Highest Response Ratio Next ï¼ˆHRRNï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#round-robin-rr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Round Robin (RR)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multilevel-queue" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multilevel Queue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-feedback-queue" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Feedback Queue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-processor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple-processor scheduling(äº†è§£)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Real-time scheduling(äº†è§£)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Thread scheduling(äº†è§£)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#process-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿›ç¨‹åŒæ­¥ Process synchronization
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿›ç¨‹åŒæ­¥ Process synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      
        èƒŒæ™¯ background
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="èƒŒæ™¯ background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#race-condition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Race condition ç«æ€æ¡ä»¶
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#critical-section-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      
        è§£å†³æ–¹æ¡ˆ solution
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        åŒæ­¥æœºåˆ¶
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="åŒæ­¥æœºåˆ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        è½¯ä»¶æ–¹æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç¡¬ä»¶æ–¹æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex-locks" class="md-nav__link">
    <span class="md-ellipsis">
      
        äº’æ–¥é” Mutex locks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphores" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¿¡å·é‡æ–¹æ³• Semaphores
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç®¡ç¨‹æ–¹æ³• monitor
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      
        ä¾‹å­
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ­»é” Deadlock
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ­»é” Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-deadlock-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Deadlock Problem
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Deadlock Problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      
        äº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç³»ç»Ÿæ¨¡å‹ System Model
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ç³»ç»Ÿæ¨¡å‹ System Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-allocation-graph" class="md-nav__link">
    <span class="md-ellipsis">
      
        èµ„æºåˆ†é…å›¾ Resource-Allocation Graph
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods-for-handling-deadlocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deadlock-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deadlock Prevention (é¢„é˜²)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-avoidance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deadlock Avoidance (é¿å…)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deadlock Detection ( æ£€æµ‹ )
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recovery-from-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recovery from Deadlock
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recovery from Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-preemption" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource Preemption
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-management_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        å†…å­˜ç®¡ç† Memory Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å†…å­˜ç®¡ç† Memory Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Background
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cache-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Hierarchy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multistep-processing-of-a-user-program" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multistep Processing of a User Program
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binding-of-instructions-and-data-to-memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Binding of Instructions and Data to Memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logical-vs-physical-address-space" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logical vs. Physical Address Space
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linking" class="md-nav__link">
    <span class="md-ellipsis">
      
        é“¾æ¥ Linking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        è£…å…¥ Loading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ€»ç»“
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contiguous-memory-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        è¿ç»­åˆ†é… Contiguous Memory Allocation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="è¿ç»­åˆ†é… Contiguous Memory Allocation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dynamic-storage-allocation-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        åŠ¨æ€åˆ†é…çš„ç®—æ³• Dynamic storage-allocation problem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fragmentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fragmentation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paging" class="md-nav__link">
    <span class="md-ellipsis">
      
        åˆ†é¡µ Paging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="åˆ†é¡µ Paging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#address-translation-scheme" class="md-nav__link">
    <span class="md-ellipsis">
      
        Address Translation Scheme
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paging-hardware-with-tlb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paging Hardware With TLB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effective-access-time" class="md-nav__link">
    <span class="md-ellipsis">
      
        Effective Access Time
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-protection-in-paged-scheme" class="md-nav__link">
    <span class="md-ellipsis">
      
        Memory Protection in Paged Scheme
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared-pages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shared Pages
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-of-the-page-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Structure of the Page Table
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Structure of the Page Table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hierarchical-paging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hierarchical Paging åˆ†çº§é¡µè¡¨/å¤šçº§é¡µè¡¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hashed-page-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hashed Page Tables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inverted-page-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        å€’æ’é¡µè¡¨ Inverted Page Tables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      
        é¡µè¡¨é¡¹è®¡ç®—
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        Swapping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#segmentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        åˆ†æ®µ Segmentation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-the-intel-pentium" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: The Intel Pentium
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example: The Intel Pentium">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intel-pentium-segmentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intel Pentium Segmentation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtual-memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Virtual Memory è™šæ‹Ÿå†…å­˜
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Virtual Memory è™šæ‹Ÿå†…å­˜">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Background
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#principle-of-locality" class="md-nav__link">
    <span class="md-ellipsis">
      
        principle of locality
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-creation_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process Creation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#demand-paging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Demand Paging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Demand Paging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#valid-invalid-bit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Valid-Invalid Bit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-fault" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page Fault
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-of-demand-paging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance of Demand Paging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-on-write" class="md-nav__link">
    <span class="md-ellipsis">
      
        Copy-on-Write
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-replacement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page Replacement
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Page Replacement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-replacement_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page replacement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-replacement-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page Replacement Algorithms
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allocation-of-frames" class="md-nav__link">
    <span class="md-ellipsis">
      
        Allocation of Frames
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Allocation of Frames">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixed-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fixed Allocation å›ºå®šåˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Priority Allocation ä¼˜å…ˆçº§åˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#global-vs-local-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Global vs. Local Allocation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thrashing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Thrashing æŠ–åŠ¨ã€é¢ ç°¸
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Thrashing æŠ–åŠ¨ã€é¢ ç°¸">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#demand-paging-and-thrashing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Demand Paging and Thrashing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-set-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working-Set Model å·¥ä½œé›†
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-fault-frequency-scheme" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page-Fault Frequency Scheme
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-mapped-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        å†…å­˜æ˜ å°„æ–‡ä»¶ Memory-Mapped Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allocating-kernel-memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Allocating Kernel Memory
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Allocating Kernel Memory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buddy-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Buddy System ï¼ˆä¼™ä¼´ç³»ç»Ÿï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slab-allocator" class="md-nav__link">
    <span class="md-ellipsis">
      
        Slab Allocator
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-issues-prepaging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Issues â€“ Prepaging ( é¢„è°ƒé¡µ )
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-issues-page-size" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Issues â€“ Page Size
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-issues-tlb-reach-tlb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Issues â€“ TLB Reachï¼ˆ TLB èŒƒå›´ï¼‰
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-issues-program-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Issues â€“ Program Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-system-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operating-System Examples
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-system-interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        File-System Interface
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File-System Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-concept" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Concept
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File Concept">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        File system
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-concept_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Concept
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operations-file-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operations &amp; file attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Open files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç›®å½•ç»“æ„ Directory Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ç›®å½•ç»“æ„ Directory Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#both-the-directory-structure-and-the-files-reside-on-disk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Both the directory structure and the files reside on disk
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operations-performed-on-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operations Performed on Directory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç›®å½•ä½œç”¨
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single-level-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single-Level Directory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-level-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Two-Level Directory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tree-structured-directories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tree-Structured Directories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acyclic-graph-directories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Acyclic-Graph Directories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#soft-symbolic-link-vs-hard-link" class="md-nav__link">
    <span class="md-ellipsis">
      
        Soft (Symbolic) Link vs. Hard Link
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-system-mounting" class="md-nav__link">
    <span class="md-ellipsis">
      
        File-System Mounting æ–‡ä»¶ç³»ç»ŸæŒ‚è½½
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File-System Mounting æ–‡ä»¶ç³»ç»ŸæŒ‚è½½">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mount-point" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mount Point
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-sharing" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Sharing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File Sharing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-users" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Users
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-file-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Remote File Systems
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consistency-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consistency Semantics
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Protection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-lists-and-groups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Lists and Groups
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-system-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        æ–‡ä»¶ç³»ç»Ÿå®ç° File system Implementation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ–‡ä»¶ç³»ç»Ÿå®ç° File system Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        File-System Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File-System Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#layered-file-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layered File System åˆ†å±‚
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-structures-used-to-implement-fs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Structures Used to Implement FS
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fcb" class="md-nav__link">
    <span class="md-ellipsis">
      
        FCB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-memory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        In-memory Structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-file-system-vfs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Virtual File System (VFS) è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directory-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Directory Implementation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allocation-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Allocation Methods
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Allocation Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contiguous-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Contiguous allocation è¿ç»­åˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linked-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linked allocation é“¾æ¥åˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexed-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Indexed allocation ç´¢å¼•åˆ†é…
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#free-space-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Free-Space Management ç£ç›˜ç©ºé—²ç©ºé—´ç®¡ç†
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Free-Space Management ç£ç›˜ç©ºé—²ç©ºé—´ç®¡ç†">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      
        ç©ºé—²è¡¨æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-map" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bit Map ä½ç¤ºå›¾
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linked-list" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linked list é“¾è¡¨æ³•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protect" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protect
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#efficiency-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Efficiency and Performance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Efficiency and Performance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Page Cache
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unified-buffer-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unified Buffer Cache
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mass-storage-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mass-Storage Systems
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mass-Storage Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-mass-storage-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview of Mass Storage Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview of Mass Storage Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#magnetic-disks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Magnetic disks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nonvolatile-memory-devices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nonvolatile Memory Devices
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Disk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disk-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk-attachment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk Attachment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-a-disk-page" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing a Disk Page
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk Scheduling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disk Management
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swap-space-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Swap-Space Management
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#raid-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        RAID Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stable-storage-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Stable-Storage Implementation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Systems
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I/O Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io-hardware-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Hardware Application
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I/O Hardware Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io-port-registers" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Port Registers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-controling-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O controling methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-io-interface-io" class="md-nav__link">
    <span class="md-ellipsis">
      
        Application I/O Interface åº”ç”¨ç¨‹åº I/O æ¥å£
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-devices" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Devices
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocking-and-nonblocking-io" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blocking and Nonblocking I/O
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-io-interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kernel I/O Interface
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Kernel I/O Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kernel-io-subsystem" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kernel I/O Subsystem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-subsystem-transforming" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Subsystem Transforming
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-requests-to-hardware-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Requests to Hardware Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quiz-lab" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quiz &amp; LAB
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quiz &amp; LAB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quiz" class="md-nav__link">
    <span class="md-ellipsis">
      
        quiz
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab" class="md-nav__link">
    <span class="md-ellipsis">
      
        lab
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="operating-system-concepts">æ“ä½œç³»ç»Ÿ Operating System Concepts<a class="headerlink" href="#operating-system-concepts" title="Permanent link">&para;</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> çº¦ 24353 ä¸ªå­— <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M360.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m64.6 136.1c-12.5 12.5-12.5 32.8 0 45.3l73.4 73.4-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0zm-274.7 0c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l73.3-73.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg></span> 202 è¡Œä»£ç  <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 138 å¼ å›¾ç‰‡ <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> é¢„è®¡é˜…è¯»æ—¶é—´ 84 åˆ†é’Ÿ</p>
</div>
<blockquote>
<p>[!NOTE]</p>
<p>LAB 0-7ï¼ˆ5+15+15+15+20+20+10+10 = 110ï¼‰</p>
<p>è€ƒè¯•ï¼š40 é€‰æ‹©+4 å¡«ç©º+3 é—®ç­”ï¼ˆschedule+syn+memoryï¼‰</p>
<p>3 å¼  A4 çº¸ï¼ˆå¯æ­£åæ‰“å°ï¼‰</p>
</blockquote>
<h2 id="overview">æ¦‚è¿° Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>ç¬¬ä¸€ç« </p>
<ul>
<li>kernel</li>
<li>ä¸­æ–­</li>
<li>åŒæ­¥å¼‚æ­¥ I/O</li>
<li>è®¾å¤‡ status table</li>
<li>storage hierarchy</li>
<li>cache ä¸€è‡´æ€§</li>
<li>os structure: multiprogramming(ç³»ç»Ÿè§†è§’ cpu utilization å¹¶å‘), multitasking(ç”¨æˆ·è§’åº¦ time-sharing ç°ä»£ os ä½¿ç”¨)</li>
<li>os æ“ä½œï¼šç”¨æˆ·æ¨¡å¼ã€å†…æ ¸æ¨¡å¼</li>
<li>è¿›ç¨‹ã€å†…å­˜ã€å‚¨å­˜ç®¡ç†
</li>
</ul>
</blockquote>
<h3 id="_1">æ“ä½œç³»ç»ŸåŠŸèƒ½&amp;å®šä¹‰<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>ä»è®¡ç®—æœºè§’åº¦ï¼Œ<strong>æ“ä½œç³»ç»Ÿ</strong> æ˜¯ä¸ªç¨‹åºï¼Œç®¡ç†ç”µè„‘ç¡¬ä»¶</p>
<ul>
<li>resource allocatorï¼šåˆ†é…èµ„æºï¼ˆcpuã€å†…å­˜ã€I/O è®¾å¤‡â€”â€”ç¡¬ä»¶ hardware æä¾›èµ„æºï¼‰</li>
<li>control programï¼šé˜²æ­¢èµ„æºæ»¥ç”¨</li>
</ul>
<p><strong>å®šä¹‰</strong>ï¼šThe operating system is the one program running at all times on the computerâ€”â€”namely kernel
æ“ä½œç³»ç»Ÿæ˜¯ä¸€ç›´è¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„ç¨‹åºâ€”â€”é€šå¸¸ç§°ä¸ºå†…æ ¸</p>
<p>multi-user OS: Linux ubuntu</p>
<h3 id="_2">è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>è®¡ç®—æœº = CPU + å¤šä¸ªè®¾å¤‡æ§åˆ¶å™¨ï¼ˆI/O devicesï¼‰ï¼Œé€šè¿‡å…¬ç”¨æ€»çº¿ç›¸è¿ï¼Œè¯¥æ€»çº¿æä¾›äº†å…±äº«å†…å­˜çš„è®¿é—®</p>
<p>CPU å’Œ I/O è®¾å¤‡å¯ä»¥å¹¶å‘æ‰§è¡Œï¼ˆexecute concurrentlyï¼‰ï¼Œå¹¶ç«äº‰è®¿é—®å†…å­˜ï¼Œéœ€è¦å†…å­˜æ§åˆ¶å™¨åè°ƒè®¿é—®å†…å­˜</p>
<p>æ¯ä¸ªè®¾å¤‡æ§åˆ¶å™¨ device controller</p>
<ul>
<li>æ§åˆ¶ç‰¹å®šçš„è®¾å¤‡ï¼ˆç£ç›˜é©±åŠ¨å™¨ã€éŸ³é¢‘ã€è§†é¢‘æ˜¾ç¤º..ï¼‰</li>
<li>æœ‰æœ¬åœ°ç¼“å†²åŒºï¼ˆlocal bufferï¼‰ï¼Œå­˜å‚¨ I/O</li>
<li>ç»ç³»ç»Ÿæ€»çº¿ system bus è§¦å‘ä¸­æ–­ interrupt å‘ŠçŸ¥ CPU å·²å®Œæˆ</li>
</ul>
<h4 id="atomic-operation">åŸè¯­ atomic operation<a class="headerlink" href="#atomic-operation" title="Permanent link">&para;</a></h4>
<p>æŒ‰å±‚æ¬¡ç»“æ„è®¾è®¡çš„æ“ä½œç³»ç»Ÿçš„åº•å±‚æ˜¯åŸè¯­ï¼Œä¸€ç§ç¨‹åº</p>
<ul>
<li>ä½äºæ“ä½œç³»ç»Ÿåº•å±‚ï¼Œæœ€æ¥è¿‘ç¡¬ä»¶</li>
<li>è¿è¡Œå…·æœ‰åŸå­æ€§ï¼Œæ“ä½œä¸€æ°”å‘µæˆï¼ˆä¸èƒ½è¢«æ‰“æ–­ï¼‰</li>
<li>è¿è¡Œæ—¶é—´çŸ­ï¼Œè°ƒç”¨é¢‘ç¹</li>
</ul>
<p>å®šä¹‰åŸè¯­çš„ç›´æ¥æ–¹æ³•æ˜¯å…³ä¸­æ–­</p>
<h4 id="interrupt">ä¸­æ–­ interrupt<a class="headerlink" href="#interrupt" title="Permanent link">&para;</a></h4>
<p>ä¸­æ–­æ˜¯ç¡¬ä»¶æˆ–è½¯ä»¶äº§ç”Ÿçš„ä¸€ç§ä¿¡å·ï¼Œç”¨äºé€šçŸ¥ CPU éœ€è¦å¯¹æŸä¸€äº‹ä»¶è¿›è¡Œå¤„ç†</p>
<p>ISR ä¸­æ–­æœåŠ¡ä¾‹ç¨‹ interrupt service routine</p>
<p>ä¸­æ–­å‘é‡ interrupt vectorï¼šå­˜å‚¨ä¸­æ–­ <em>ä¾‹ç¨‹</em> çš„åœ°å€ the addresses of all the service routines</p>
<ul>
<li>å¯„å­˜å™¨ï¼ˆInterrupt architectureï¼‰å‚¨å­˜è¢«ä¸­æ–­ <em>æŒ‡ä»¤</em> çš„åœ°å€ </li>
</ul>
<p>æœ‰ä¸­æ–­åœ¨å¤„ç†æ—¶ä¼šåœæ­¢å…¶ä»–æœªåˆ°çš„ä¸­æ–­
Incoming interrupts are disabled while another interrupt is being processed to prevent a lost interrupt.</p>
<hr />
<p>å¤–éƒ¨ä¸­æ–­ï¼šcpu å¤–éƒ¨äº‹ä»¶ï¼Œå¦‚ I/O è®¾å¤‡è¯·æ±‚ã€æ—¶é’Ÿä¿¡å·</p>
<p>å†…éƒ¨ä¸­æ–­ï¼šcpu å†…éƒ¨äº‹ä»¶ï¼Œå¦‚ä»¿ç®¡æŒ‡ä»¤ã€ç¼ºé¡µå¼‚å¸¸</p>
<p>trap ï¼šè½¯ä»¶çš„ä¸­æ–­ï¼Œç»å¸¸ç”±é”™è¯¯æˆ–ç”¨æˆ·è¯·æ±‚ï¼ˆåˆç§° ç³»ç»Ÿè°ƒç”¨ system callï¼‰å¯¼è‡´</p>
<p>faultï¼šé€šå¸¸ç”±æŒ‡ä»¤æ‰§è¡Œå¼•èµ·çš„å¼‚å¸¸ï¼Œå¦‚éæ³•æ“ä½œç ã€ç¼ºé¡µæ•…éšœã€é™¤æ•°ä¸º 0ã€è¿ç®—æº¢å‡º</p>
<p><img src="./assets/image-20260202165414681.png" alt="image-20260202165414681" style="zoom:33%;" /></p>
<p><strong>æ“ä½œç³»ç»Ÿæ˜¯ç”±ä¸­æ–­é©±åŠ¨çš„ An operating system is interrupt-driven</strong></p>
<p>ä¸­æ–­å¤„ç†â€”â€”ä¸€ç§è½¯ä»¶ä¾‹ç¨‹å¤„ç†</p>
<ol>
<li>æ¢å¤ CPU çŠ¶æ€â€”â€”å­˜å¯„å­˜å™¨&amp;ç¨‹åºè®¡æ•°å™¨ PCï¼ˆprogram counterï¼‰
   - è®¡æ•°å™¨ï¼šå­˜å‚¨ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„ä½ç½®</li>
<li>ç¡®å®šä¸­æ–­ç±»å‹ï¼šé€šè¿‡é€šç”¨ä¾‹ç¨‹æˆ–çŸ¢é‡ä¸­æ–­ç³»ç»Ÿè¿›è¡Œè½®è¯¢ polling by a generic routine or vectored interrupt system</li>
<li>ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„è½¬æ¢ï¼škernel -&gt; user by OSï¼›user &rarr; kernel by ç¡¬ä»¶ï¼ˆä¸­æ–­/å¼‚å¸¸ï¼‰</li>
</ol>
<p>ä¸¤ç§ I/O å¤„ç†æ–¹å¼ï¼š</p>
<ol>
<li>è¦ç­‰å¾…ï¼Œå¤„ç†å®Œä¼ å›â€”â€”åŒæ­¥ synchronous</li>
<li>æ¥æ”¶åˆ°ï¼ˆæ²¡åšå®Œï¼‰å°±ä¼ å›â€”â€”å¼‚æ­¥ asynchronous</li>
</ol>
<p><img src="./assets/image-20240911152005368.png" alt="image-20240911152005368" style="zoom:50%;" /></p>
<p>DMAï¼šç›´æ¥å†…å­˜è®¿é—®</p>
<p><img src="./assets/image-20240911152146945.png" alt="image-20240911152146945" style="zoom: 33%;" /></p>
<p>æ¯å—åªäº§ç”Ÿä¸€ä¸ªä¸­æ–­</p>
<h3 id="_3">å­˜å‚¨<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p><img src="./assets/image-20240911152243818.png" alt="image-20240911152243818" style="zoom:50%;" /></p>
<p>é€Ÿåº¦ã€èŠ±é”€ã€æ˜“å¤±æ€§</p>
<p>ä¸€çº§äºŒçº§ä¸‰çº§æ˜¯æŒ‰å®¹é‡åˆ†çš„</p>
<p>é«˜é€Ÿç¼“å­˜ cacheâ€”â€”æ›´å¿«çš„æ•°æ®è®¿é—®æœºåˆ¶ï¼Œä¸»å­˜å¯ä»¥è®¤ä¸ºæ˜¯äºŒçº§å­˜å‚¨çš„æœ€åä¸€ä¸ª cache</p>
<h3 id="_4">è®¡ç®—æœºä½“ç³»ç»“æ„<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p><strong>å¤šå¤„ç†å™¨</strong> multiprocessing</p>
<ul>
<li>å¢åŠ ååé‡</li>
<li>è§„æ¨¡ç»æµ</li>
<li>å¢åŠ å¯é æ€§</li>
</ul>
<p>å¯¹ç§°å¤šå¤„ç†å™¨ SMP symmetric multiprocessingï¼šæ‰€æœ‰å¤„ç†å™¨å¯¹ç­‰ã€æ²¡æœ‰ä¸»ä»å…³ç³»ï¼Œå…±äº«å†…å­˜</p>
<p>å¤šæ ¸ multicore</p>
<ul>
<li>å•ç‰‡é€šä¿¡æ¯”èŠ¯ç‰‡é—´é€šä¿¡å¿«</li>
<li>å¤šæ ¸ç”µæºæ¶ˆè€—ä½</li>
</ul>
<p>éå‡åŒ€å†…å­˜è®¿é—® Non-uniform memory access(NUMA architecture)</p>
<ul>
<li>CPU é€šè¿‡ä¸€ä¸ªå…±äº«ç³»ç»Ÿè¿æ¥</li>
<li>éšç€å¤„ç†å™¨çš„å¢åŠ è€Œæ›´æœ‰æ•ˆåœ°æ‰©å±•</li>
<li>è·¨äº’è¿çš„è¿œç¨‹å†…å­˜é€Ÿåº¦è¾ƒæ…¢</li>
<li>æ“ä½œç³»ç»Ÿéœ€è¦ä»”ç»†çš„ CPU è°ƒåº¦å’Œå†…å­˜ç®¡ç†</li>
</ul>
<h3 id="_5">æ“ä½œç³»ç»Ÿè®¾è®¡<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p><strong>Multiprogramming å¤šé“ç¨‹åºè®¾è®¡</strong> needed for efficiency (<mark>CPU utilization</mark>)</p>
<ul>
<li>ç»„ç»‡å„é¡¹ä»»åŠ¡è®© CPU æ€»æœ‰å·¥ä½œåš</li>
<li>åŠ è½½å¤šé¡¹ä»»åŠ¡åˆ°å†…å­˜</li>
<li>é€šè¿‡ job scheduling å®‰æ’é€‰ä¸€ä¸ªä»»åŠ¡åš</li>
<li>å®šä¹‰ï¼šåœ¨ä¸€ä¸ª cpu ä¸Š <strong>å¹¶å‘</strong> è¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼›å¤šä¸ª cpuï¼Œæ¯ä¸ª cpu å¹¶å‘ï¼Œæ€»ä½“å¹¶è¡Œ</li>
<li>å®è§‚ä¸Šå¹¶è¡Œï¼Œå¾®è§‚ä¸Šä¸²è¡Œ</li>
</ul>
<p><strong>Timesharing (multitasking)</strong> is logical extension in which CPU switches jobs so frequently that users can interact with each job while it is running, creating interactive computing (<mark>interactivity</mark>)</p>
<ul>
<li>å“åº”é€Ÿåº¦è¶³å¤Ÿå¿«</li>
<li>å¤šä»»åŠ¡ï¼ˆè¿›ç¨‹ processï¼‰å¹¶å‘åœ¨ CPU ä¸Šæ‰§è¡Œ -&gt; CPU è°ƒåº¦ scheduling</li>
<li>å¦‚æœä¸€ä¸ªè¿›ç¨‹ä¸èƒ½å…¨æ”¾å…¥å†…å­˜ memory -&gt; æ¢å…¥æ¢å‡º swappingï¼ˆå°†æ²¡ç”¨çš„è¿›ç¨‹æŒªå‡ºï¼‰</li>
<li>è™šå­˜ virtual memoryï¼šä¸€ç§æŠ€æœ¯å…è®¸ CPU æ‰§è¡Œä¸å®Œå…¨åœ¨å†…å­˜çš„è¿›ç¨‹</li>
</ul>
<blockquote>
<p>[!NOTE]</p>
<p>å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«ï¼Ÿ</p>
<ul>
<li>å¹¶è¡Œï¼šå¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶åˆ»å‘ç”Ÿ</li>
<li>å¹¶å‘ï¼šå¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å‘ç”Ÿ</li>
</ul>
</blockquote>
<h3 id="os-operations">æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations<a class="headerlink" href="#os-operations" title="Permanent link">&para;</a></h3>
<p><strong>åŒæ¨¡å¼ dual-mode</strong> æ“ä½œå…è®¸æ“ä½œç³»ç»Ÿä¿æŠ¤è‡ªèº«å’Œå…¶ä»–ç³»ç»Ÿç»„ä»¶</p>
<ul>
<li>ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼ user mode &amp; kernel mode</li>
<li>ç¡¬ä»¶æä¾›çš„æ¨¡å¼ä½ mode bit</li>
<li>æä¾›åŒºåˆ†ç³»ç»Ÿä½•æ—¶è¿è¡Œç”¨æˆ·ä»£ç æˆ–å†…æ ¸ä»£ç çš„èƒ½åŠ›</li>
<li>ä¸€äº›æŒ‡ä»¤è¢«æŒ‡å®šä¸ºç‰¹æƒæŒ‡ä»¤ privilegedï¼Œåªèƒ½åœ¨å†…æ ¸æ¨¡å¼ä¸‹æ‰§è¡Œï¼ˆä¸å…è®¸ç”¨æˆ·ç›´æ¥ä½¿ç”¨ï¼‰</li>
<li>ç³»ç»Ÿè°ƒç”¨ system call å°†æ¨¡å¼æ›´æ”¹ä¸º kernel æ¨¡å¼ï¼Œå†é€šè¿‡ç³»ç»Ÿè°ƒç”¨å›æ¥å°†å…¶é‡ç½®ä¸º user æ¨¡å¼</li>
</ul>
<p><img alt="image-20240914104446706" src="assets/image-20240914104446706.png" /></p>
<p><strong>Timer å®šæ—¶å™¨</strong>ï¼šé˜²æ­¢æ— é™å¾ªç¯/è¿›ç¨‹å ç”¨èµ„æº</p>
<ul>
<li>åœ¨ä¸€æ®µæ—¶é—´åä¸­æ–­è¿›ç¨‹ set interrupt</li>
<li>æ“ä½œç³»ç»Ÿå°†è®¡æ•°å™¨ counter <code>-1</code>ï¼Œ<strong>åˆ° 0 äº§ç”Ÿä¸­æ–­</strong></li>
<li>åœ¨å®‰æ’æµç¨‹ä¹‹å‰è¿›è¡Œè®¾ç½®ï¼Œä»¥é‡æ–°è·å¾—æ§åˆ¶æƒæˆ–ç»ˆæ­¢è¶…è¿‡åˆ†é…æ—¶é—´çš„ç¨‹åº</li>
</ul>
<h4 id="process-management">Process management è¿›ç¨‹ç®¡ç†<a class="headerlink" href="#process-management" title="Permanent link">&para;</a></h4>
<p>ç¨‹åºæ˜¯è¢«åŠ¨å®ä½“ï¼Œè¿›ç¨‹æ˜¯ä¸»åŠ¨å®ä½“ active entity</p>
<ul>
<li>éœ€è¦èµ„æºå»æ‰§è¡Œ</li>
<li>è¿›ç¨‹ç»ˆæ­¢æ—¶å°†èµ„æºè¿˜ç»™æ“ä½œç³»ç»Ÿ</li>
<li><strong>å¤šçº¿ç¨‹è¿›ç¨‹ Multi-threaded process</strong> æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªè®¡æ•°å™¨</li>
<li><strong>å¤šè·¯å¤ç”¨ multiplexing</strong>-&gt; å®ç°å¹¶å‘ concurrency</li>
</ul>
<p><img src="./assets/image-20240914111333126.png" alt="image-20240914111333126" style="zoom:50%;" /></p>
<h4 id="memory-management">Memory management å†…å­˜ç®¡ç†<a class="headerlink" href="#memory-management" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20240914110859245.png" style="zoom:50%;" /></p>
<h4 id="file-management">File management æ–‡ä»¶ç®¡ç†<a class="headerlink" href="#file-management" title="Permanent link">&para;</a></h4>
<p>æ–‡ä»¶ç®¡ç†ï¼šåˆ›å»ºã€åˆ é™¤ã€åŠ å¯†</p>
<p><img src="./assets/image-20240914111350634.png" alt="image-20240914111350634" style="zoom:50%;" /></p>
<p>ç®¡é“ pipe æ˜¯ä¸€ç§æ–‡ä»¶</p>
<h4 id="storage-management">Storage management å­˜å‚¨ç®¡ç†<a class="headerlink" href="#storage-management" title="Permanent link">&para;</a></h4>
<p>Mass-Storage Management</p>
<p><img src="./assets/image-20240914111610391.png" alt="image-20240914111610391" style="zoom:40%;" /></p>
<p>I/O Subsystem å­ç³»ç»Ÿ</p>
<p><img src="./assets/image-20240914112031690.png" alt="image-20240914112031690" style="zoom: 40%;" /></p>
<h3 id="os-purposes">æ€»ç»“ OS purposes<a class="headerlink" href="#os-purposes" title="Permanent link">&para;</a></h3>
<ul>
<li>Abstraction æŠ½è±¡ï¼š a way to hide complexity</li>
<li>Multiplex å¤šè·¯å¤ç”¨ï¼ˆç©ºé—´ã€æ—¶é—´ï¼‰</li>
<li>Isolation éš”ç¦»ï¼ˆç”¨æˆ·/æ ¸æ¨¡å¼ï¼‰</li>
<li>Sharing å…±äº«ï¼ˆç”¨æˆ·ã€è¿›ç¨‹ èµ„æºå…±äº«-&gt; å¹¶å‘ï¼‰</li>
<li>Security å®‰å…¨ï¼ˆç‰¹æƒæŒ‡ä»¤</li>
<li>Performance æ€§èƒ½</li>
<li>Range of uses</li>
</ul>
<h2 id="operating-system-structures">ç»“æ„ Operating-System Structures<a class="headerlink" href="#operating-system-structures" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>ç¬¬äºŒç« </p>
<ul>
<li>os æœåŠ¡</li>
<li>ç³»ç»Ÿè°ƒç”¨ system callï¼šapi</li>
<li>os design &amp; implementation</li>
<li>os structures</li>
<li>layed</li>
<li>monolithic</li>
<li>microkernel å¾®å†…æ ¸ ä¼˜ç¼ºç‚¹(overhead)
</li>
</ul>
</blockquote>
<h3 id="_6">æ“ä½œç³»ç»ŸæœåŠ¡<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>æ“ä½œç³»ç»Ÿæä¾›çš„æœåŠ¡æœ‰ï¼š</p>
<ul>
<li>UI(user interface)</li>
<li>CLI(command line)</li>
<li>
<p>ä¼˜ç‚¹ï¼šå¯¹é‡å¤æ€§å·¥ä½œé«˜æ•ˆ</p>
</li>
<li>
<p>GUI (Graphics User Interface)</p>
</li>
</ul>
<h3 id="system-call">System call ç³»ç»Ÿè°ƒç”¨<a class="headerlink" href="#system-call" title="Permanent link">&para;</a></h3>
<h4 id="_7">ç³»ç»Ÿè°ƒç”¨å®ç°<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p>APIï¼ˆApplication program interface)ï¼šè¢«å°è£…è¿‡ high-level çš„ç³»ç»Ÿè°ƒç”¨</p>
<ul>
<li>Mostly accessed by programs via a high-level API rather than direct system call use ä¸»è¦é€šè¿‡é«˜çº§çš„ API æ¥è§¦ç¨‹åºè€Œä¸æ˜¯ç›´æ¥çš„ç³»ç»Ÿè°ƒç”¨</li>
</ul>
<p>æ¯ä¸ªç³»ç»Ÿè°ƒç”¨æœ‰ä¸ªç¼–å·ï¼Œé€šè¿‡ç³»ç»Ÿè°ƒç”¨è¡¨ table</p>
<p>ç³»ç»Ÿè°ƒç”¨å‘ç”Ÿæ—¶ï¼Œç¨‹åºæ§åˆ¶æƒå°†äº¤ç»™å†…æ ¸æ¥å®ŒæˆæœåŠ¡ï¼ŒæœåŠ¡å®Œæˆåï¼Œæ§åˆ¶æƒå†è¿˜ç»™ç¨‹åºï¼ˆå›åˆ°ç”¨æˆ·çŠ¶æ€</p>
<p>ç³»ç»Ÿè°ƒç”¨æ˜¯ç”¨æˆ·åº”ç”¨ï¼ˆè½¯ä»¶ï¼‰å’Œç¡¬ä»¶ä¹‹é—´æ²Ÿé€šçš„æ¡¥æ¢â€”â€”ä¿è¯äº†å®‰å…¨å’Œæœ‰æ•ˆçš„æ²Ÿé€š secure &amp; efficient</p>
<blockquote>
<p>ç³»ç»Ÿè°ƒç”¨æ˜¯ OS æä¾›ç»™ç”¨æˆ·çš„ï¼Œåªèƒ½é€šè¿‡ç”¨æˆ·ç¨‹åºé—´æ¥ä½¿ç”¨</p>
<p>ç³»ç»Ÿè°ƒç”¨çš„ç›®çš„æ˜¯â€”â€”è¯·æ±‚ç³»ç»ŸæœåŠ¡</p>
</blockquote>
<h4 id="_8">å‚æ•°ä¼ é€’<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p>ä¿å­˜å½“å‰ cpu çš„ PSW å’Œ PC</p>
<p>æœ€ç®€å•ï¼šå¯„å­˜å™¨ä¿å­˜</p>
<p>é—´æ¥æ–¹å¼ï¼šblockã€tableã€memoryï¼ŒæŠŠå†…å­˜ä¸­ buffer åœ°å€å‘Šè¯‰å¯„å­˜å™¨ï¼ˆLinux &amp; Solarisï¼‰</p>
<p>å…¶ä»–ï¼šæ ˆ stackï¼Œä¸ä¸€å®šæ”¯æŒå¤šç”¨æˆ·</p>
<ul>
<li>block å’Œ stack æ–¹æ³•ä¸é™åˆ¶å‚æ•°çš„æ•°é‡æˆ–é•¿åº¦</li>
</ul>
<h4 id="_9">ç³»ç»Ÿè°ƒç”¨åˆ†ç±»/åŠŸèƒ½<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>Process control è¿›ç¨‹ç®¡ç†
File management æ–‡ä»¶ç®¡ç†
Device management è®¾å¤‡ç®¡ç†
Information maintenance (e.g. time, date) ä¿¡æ¯ç»´æŠ¤ï¼ˆå†…å­˜ç®¡ç†ï¼‰
Communications äº¤æµ
Protection ä¿æŠ¤</p>
<p><img src="./assets/image-20240918150058573.png" alt="image-20240918150058573" style="zoom:50%;" /></p>
<h3 id="_10">ç³»ç»Ÿç¨‹åº<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>åˆ†ç±»ï¼šFile manipulationã€Status informationã€File modificationã€Programming language supportã€Program loading and executionã€Communicationsã€Application programs</p>
<p>.....debuggers</p>
<p>ä¸æ˜¯ç³»ç»Ÿç¨‹åºï¼šweb browsersã€word processorsï¼ˆç”¨æˆ·ç¨‹åºï¼‰</p>
<h3 id="os">os è®¾è®¡å’Œå®ç°<a class="headerlink" href="#os" title="Permanent link">&para;</a></h3>
<p>os è®¾è®¡å’Œå®ç°ä¸æ˜¯ä¸€ä¸ªè§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼ˆä¸æ˜¯å…·ä½“çš„é—®é¢˜è€Œæ˜¯åˆ›é€ æ€§è¿‡ç¨‹ï¼‰</p>
<p>1.ç”±ç›®æ ‡å’ŒæŒ‡æ ‡å‡ºå‘ï¼šç”¨æˆ·ç›®æ ‡ã€ç³»ç»Ÿç›®æ ‡</p>
<p>2.è¢«ç¡¬ä»¶å’Œç³»ç»Ÿç±»å‹å½±å“</p>
<p><strong>Policy</strong>:   What to do? ç­–ç•¥ï¼ˆç¡®å®šå…·ä½“åšä»€ä¹ˆäº‹ï¼Œeg å…è®¸æŸäº›ç”¨æˆ·è®¿é—®æŸäº›æ–‡ä»¶ï¼‰
<strong>Mechanism</strong>:  How to do it? æœºåˆ¶ï¼ˆå®šä¹‰åšäº‹æ–¹å¼ï¼‰</p>
<p>å†…å­˜ç®¡ç†ã€cpu è°ƒåº¦æ˜¯æœºåˆ¶ï¼Ÿï¼ˆç®—æ³•æ˜¯æœºåˆ¶ï¼Ÿ</p>
<p>é…ç½®æ–‡ä»¶å†™çš„æ˜¯ç­–ç•¥ï¼ˆpolicyï¼‰</p>
<p><mark>Provide mechanism rather than policy</mark>. In particular, place user interface policy in the clients' hands. </p>
<p>æ“ä½œç³»ç»ŸåŸºæœ¬ç±»å‹ï¼ˆ3ï¼‰ï¼šæ‰¹å¤„ç†ã€åˆ†æ—¶ã€å®æ—¶</p>
<h3 id="_11">æ“ä½œç³»ç»Ÿç»“æ„<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<h4 id="simple-structure">Simple Structure<a class="headerlink" href="#simple-structure" title="Permanent link">&para;</a></h4>
<p>MS-DOS: provide the most functionality in the least space</p>
<ul>
<li>ä¸åˆ†æ¨¡å—ï¼Œç•Œé¢å’Œå¤šçº§åŠŸèƒ½é—´æ²¡æœ‰å¾ˆå¥½çš„åˆ†å¼€</li>
</ul>
<h4 id="unix">UNIX<a class="headerlink" href="#unix" title="Permanent link">&para;</a></h4>
<p>UNIX â€“ å—ç¡¬ä»¶åŠŸèƒ½é™åˆ¶ï¼ŒåŸå§‹ UNIX æ“ä½œç³»ç»Ÿç»“æ„æœ‰é™ã€‚UNIX æ“ä½œç³»ç»Ÿç”±ä¸¤ä¸ªå¯åˆ†ç¦»çš„éƒ¨åˆ†ç»„æˆ</p>
<ul>
<li>ç³»ç»Ÿç¨‹åº</li>
<li>å†…æ ¸</li>
<li>åŒ…æ‹¬ç³»ç»Ÿè°ƒç”¨æ¥å£ä»¥ä¸‹å’Œç‰©ç†ç¡¬ä»¶ä»¥ä¸Šçš„æ‰€æœ‰å†…å®¹</li>
<li>æä¾›æ–‡ä»¶ç³»ç»Ÿã€CPU è°ƒåº¦ã€å†…å­˜ç®¡ç†å’Œå…¶ä»–æ“ä½œç³»ç»ŸåŠŸèƒ½ï¼›ä¸€ä¸ªçº§åˆ«çš„å¤§é‡åŠŸèƒ½</li>
</ul>
<h4 id="monolithic-system-structure">Monolithic System Structure å®å†…æ ¸æ¶æ„<a class="headerlink" href="#monolithic-system-structure" title="Permanent link">&para;</a></h4>
<ul>
<li>å°†ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½æ¨¡æ€ä½œä¸ºä¸€ä¸ªæ•´ä½“è¿è¡Œåœ¨å†…æ ¸</li>
<li>ä¸»æµæ“ä½œç³»ç»Ÿéƒ½é‡‡ç”¨å®å†…æ ¸ï¼Œå¦‚ Windowsã€Androidã€iOSã€macosã€Linux</li>
</ul>
<p><strong>UNIX System Structure</strong> å®å†…æ ¸</p>
<p><img src="./assets/image-20240918154609215.png" alt="image-20240918154609215" style="zoom:50%;" /></p>
<h4 id="microkernel-system-structure">Microkernel System Structure å¾®å†…æ ¸<a class="headerlink" href="#microkernel-system-structure" title="Permanent link">&para;</a></h4>
<p>å¯¹åº”å®å†…æ ¸</p>
<p>å°†å°½å¯èƒ½å¤šçš„å†…å®¹ä»å†…æ ¸ç§»è‡³â€œç”¨æˆ·â€ç©ºé—´ï¼Œæä¾›ä¸€å°éƒ¨åˆ†æœåŠ¡ï¼Œä¾‹å¦‚è¿›ç¨‹è°ƒåº¦</p>
<p>ç”¨æˆ·æ¨¡å—ä¹‹é—´ä½¿ç”¨æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡ message passing</p>
<ul>
<li>åŸºäºå®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼ï¼ˆC/Sï¼‰</li>
<li>é‡‡ç”¨â€œæœºåˆ¶ä¸ç­–ç•¥åˆ†ç¦»â€åŸç†</li>
<li>é‡‡ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯</li>
</ul>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ›´æ˜“äºæ‰©å±• extend å¾®å†…æ ¸</li>
<li>æ›´æ˜“äºå°†æ“ä½œç³»ç»Ÿç§»æ¤ port åˆ°æ–°æ¶æ„ï¼ˆflexibilityï¼‰</li>
<li>æ›´å¯é ï¼ˆå†…æ ¸æ¨¡å¼ä¸‹è¿è¡Œçš„ä»£ç æ›´å°‘ï¼‰ã€å®‰å…¨</li>
<li>åˆ†å¸ƒå¼è®¡ç®—</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´é€šä¿¡çš„æ€§èƒ½å¼€é”€å¤§ï¼Œæ€§èƒ½å·® performanceï¼ˆå®å†…æ ¸æ›´é«˜æ•ˆï¼‰</li>
<li>ç³»ç»ŸæœåŠ¡ã€é©±åŠ¨ç¨‹åºçš„å¤æ‚æ€§</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸å¤ªæœ‰æ•ˆ</li>
</ul>
<h4 id="hybrid-structuredarwin">Hybrid Structureâ€”â€”Darwin<a class="headerlink" href="#hybrid-structuredarwin" title="Permanent link">&para;</a></h4>
<p>æ··åˆæ¨¡å¼ï¼šBy ??</p>
<p>Windows, MacOS, iOSâ€”â€”æ··åˆå†…æ ¸</p>
<h4 id="layered-approach">Layered Approach åˆ†å±‚æ–¹æ³•<a class="headerlink" href="#layered-approach" title="Permanent link">&para;</a></h4>
<p>æ“ä½œç³»ç»Ÿåˆ†ä¸ºå¤šä¸ªå±‚ï¼ˆçº§åˆ«ï¼‰ï¼Œæ¯å±‚éƒ½å»ºç«‹åœ¨è¾ƒä½å±‚ä¹‹ä¸Šã€‚</p>
<p><strong>æœ€åº•å±‚ï¼ˆç¬¬ 0 å±‚ï¼‰æ˜¯ç¡¬ä»¶ï¼›æœ€é«˜å±‚ï¼ˆç¬¬ N å±‚ï¼‰æ˜¯ç”¨æˆ·ç•Œé¢</strong>ã€‚</p>
<p>é€šè¿‡æ¨¡å—åŒ– modularity ï¼Œå¯ä»¥é€‰æ‹©å„å±‚ï¼Œä»¥ä¾¿æ¯å±‚ä»…ä½¿ç”¨è¾ƒä½å±‚çš„åŠŸèƒ½ï¼ˆæ“ä½œï¼‰å’ŒæœåŠ¡</p>
<p>é€»è¾‘åˆ†å±‚ï¼š</p>
<p><img src="./assets/image-20240923104411850.png" alt="image-20240923104411850" style="zoom: 33%;" /></p>
<p>é€å±‚è°ƒç”¨ï¼ˆä¸èƒ½è·¨å±‚è°ƒç”¨ï¼‰ã€é€å±‚å°è£…â€”â€”å±‚ä¹‹é—´é€šè®¯çš„æ•ˆç‡é—®é¢˜</p>
<p>ä¼˜ç‚¹ï¼šä¾¿äºç³»ç»Ÿè°ƒè¯•å’ŒéªŒè¯ï¼›æ˜“æ‰©å……ã€æ˜“ç»´æŠ¤</p>
<p>ç¼ºç‚¹ï¼šrequire more overhead for iter-layer communication æ•ˆç‡ä½ï¼›åˆç†å®šä¹‰å„å±‚æ¯”è¾ƒå›°éš¾</p>
<h4 id="modules">Modules æ¨¡å—åŒ–<a class="headerlink" href="#modules" title="Permanent link">&para;</a></h4>
<p>å’Œåˆ†å±‚ç›¸ä¼¼ä½†æ›´çµæ´»ã€å¯æ‹“å±•æ€§ scalï¼Œä½†æœ‰æ¨¡å—å…¼å®¹æ€§é—®é¢˜</p>
<ul>
<li>ä½¿ç”¨ç›®æ ‡å¯¼å‘çš„æ–¹æ³•</li>
<li>æ¯ä¸ªæ¨¡å—å†éœ€è¦æ—¶å¯ä»¥åŠ è½½åˆ°å†…æ ¸ä¸­ï¼ˆloadableï¼‰</li>
<li>æ¯ä¸ªæ¨¡å—æ ¸å¿ƒç»„ä»¶éš”ç¦»</li>
<li>æ¨¡å—ç›¸äº’è°ƒç”¨ï¼ˆé€šè¿‡å·²çŸ¥çš„æ¥å£ï¼‰è€Œä¸æ˜¯æ¶ˆæ¯ä¼ é€’</li>
</ul>
<p>LKMs(loadable kernel modules): extend the functionality of the kernel dynamically</p>
<p>ä¼˜ç‚¹ï¼šæé«˜äº†æ“ä½œç³»ç»Ÿè®¾è®¡çš„æ­£ç¡®æ€§ã€å¯ç†è§£æ€§ã€å¯ç»´æŠ¤æ€§ï¼›å¢å¼ºæ“ä½œç³»ç»Ÿçš„å¯é€‚åº”æ€§ï¼›åŠ é€Ÿå¼€å‘</p>
<p>ç¼ºç‚¹ï¼šæ¨¡å—é—´æ¥å£è§„å®šå¾ˆéš¾æ»¡è¶³å¯¹æ¥å£çš„å®é™…éœ€æ±‚ï¼›æ— æ³•æ‰¾åˆ°ä¸€å…±å¯é çš„å†³å®šé¡ºåº</p>
<h4 id="other-structures">Other Structures<a class="headerlink" href="#other-structures" title="Permanent link">&para;</a></h4>
<p><strong>Exokernel å¤–æ ¸</strong> (1994)ï¼šé«˜åº¦ç®€åŒ– kernelï¼Œåªè´Ÿè´£èµ„æºåˆ†é…ï¼Œæä¾›äº†ä½çº§çš„ç¡¬ä»¶æ“ä½œï¼Œå¿…é¡»é€šè¿‡å®šåˆ¶ library ä¾›åº”ç”¨ä½¿ç”¨</p>
<ul>
<li>é«˜æ€§èƒ½ï¼Œä½†å®šåˆ¶åŒ– library éš¾åº¦å¤§ï¼Œå…¼å®¹æ€§å·®</li>
</ul>
<p>Unikernel: statically linked with the OS code needed.Good for cloud service, APP boots in tens of ms.</p>
<h3 id="virtual-machines">è™šæ‹Ÿæœº Virtual Machines<a class="headerlink" href="#virtual-machines" title="Permanent link">&para;</a></h3>
<p>A virtual machine takes the layered approach to its logical conclusion.  It treats <em>hardware and the operating system kernel</em> as though they were all <strong>hardware</strong> è™šæ‹Ÿæœºå°†ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿå†…æ ¸éƒ½çœ‹ä½œç¡¬ä»¶</p>
<p>A virtual machine provides an interface identical to the underlying bare hardware</p>
<p>The operating system creates the illusion of multiple processes, each executing on its own processor with its own (virtual) memory</p>
<h4 id="_12">åˆ†ç±»<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>ç¬¬ä¸€ç±» VMM ç›´æ¥è¿è¡Œåœ¨ç¡¬ç›˜ä¸Šï¼Œæœ€é«˜çº§ï¼ˆå†…æ ¸æ€ï¼‰</p>
<p>ç¬¬äºŒç±» VMM è¿è¡Œåœ¨å®¿ä¸»æ“ä½œç³»ç»Ÿä¸Šï¼Œæ™®é€šç¨‹åºï¼ˆç”¨æˆ·æ€ï¼‰</p>
<h4 id="hypervisor">HyperVisor<a class="headerlink" href="#hypervisor" title="Permanent link">&para;</a></h4>
<p>TYPE1 Bare-Metal è£¸é‡‘å± architecture</p>
<ul>
<li>æ›´é«˜çš„æ€§èƒ½ã€å’Œç¡¬ä»¶ç›´æ¥æ¥è§¦ã€å®‰å…¨æ€§æ›´é«˜</li>
</ul>
<p>TYPE2 Hosted å®¿ä¸» éœ€è¦ hostOSï¼Œeg VMwareã€Oracle</p>
<ul>
<li>åº”ç”¨ç®€å•ã€å’Œç°æœ‰ OS å…¼å®¹æ€§é«˜ã€é€‚åˆæµ‹è¯•å’Œå¼€å‘ç¯å¢ƒ</li>
</ul>
<p>é€‰ 2 ä¸é€‰ 1 çš„å¸¸è§åŸå› ï¼šeasier integration with existing host OS</p>
<p><img src="./assets/image-20240923111559930.png" alt="image-20240923111559930" style="zoom:50%;" /></p>
<p>ä¸‰ç§æŠ€æœ¯ï¼š</p>
<p>VMï¼šæ›´å¥½çš„éš”ç¦»æ€§ã€çµæ´»æ€§ï¼Œæœ‰èµ„æºæ¶ˆè€—ï¼ˆå¤æ‚ï¼‰çš„é—®é¢˜</p>
<p>LCï¼šæ›´åŠ è½»é‡çº§ï¼Œä¸éœ€è¦åŠ è½½å†…æ ¸ osï¼ˆdockerï¼‰</p>
<p>Ukï¼šæ‰€æœ‰ä¸œè¥¿éƒ½æ‰“åŒ…ï¼Œåªèƒ½å…è®¸ä¸€ä¸ª app è¿è¡Œ</p>
<h3 id="os_1">OS ç”Ÿæˆ<a class="headerlink" href="#os_1" title="Permanent link">&para;</a></h3>
<p>æ“ä½œç³»ç»Ÿåˆå§‹åŒ–æ—¶éœ€è¦åˆ›å»º <strong>ä¸­æ–­å‘é‡è¡¨</strong></p>
<h3 id="system-boot">ç³»ç»Ÿå¯åŠ¨ System Boot<a class="headerlink" href="#system-boot" title="Permanent link">&para;</a></h3>
<p>å¼•å¯¼ç¨‹åº bootstrap program åœ¨å¼€æœº power-up/reboot æ—¶</p>
<ol>
<li>åŠ è½½åˆ° ROM/EPROM ä¸Šï¼ˆRead-only Memory æ˜¯ firmware å›ºä»¶ï¼‰</li>
<li>åˆå§‹åŒ–ç³»ç»Ÿ</li>
<li>bootstrap å®šä½æ“ä½œç³»ç»Ÿå†…æ ¸å¹¶åŠ è½½åˆ°å†…å­˜ã€å¼€å§‹æ‰§è¡Œ</li>
<li>OS æœ€ç»ˆè¢«åŠ è½½åˆ° RAM</li>
</ol>
<ul>
<li>æ“ä½œç³»ç»Ÿçš„å¼•å¯¼ç¨‹åºä½äºç¡¬ç›˜ä¸­</li>
<li>å¼•å¯¼æ‰‡åŒºäº§ç”Ÿåœ¨å¯¹ç¡¬ç›˜è¿›è¡Œé«˜çº§æ ¼å¼åŒ–æ—¶</li>
</ul>
<h2 id="processes">è¿›ç¨‹ Processes<a class="headerlink" href="#processes" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>ç¬¬ä¸‰ç« </p>
<ul>
<li>è¿›ç¨‹çŠ¶æ€ status</li>
<li>è¿›ç¨‹æ§åˆ¶å— PCB</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢</li>
<li>è¿›ç¨‹è°ƒåº¦ï¼ˆjob queue: æ‰€æœ‰ process, ready queue: ä¸º cpu æœåŠ¡, device queueï¼‰</li>
<li>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</li>
<li>unbounded buffer, bounded bufferï¼ˆæœ‰é™ buffer sizeï¼‰</li>
</ul>
</blockquote>
<h3 id="_13">è¿›ç¨‹æ¦‚å¿µ<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>An operating system executes a variety of programs:</p>
<ul>
<li>Batch system â€“ a batch is a sequence of jobs</li>
<li>Time-sharing systems â€“ user programs or tasks</li>
<li>Multitasking</li>
<li>Less turnaround, less CPU idle, user interaction</li>
</ul>
<blockquote>
<p>[!NOTE]</p>
<p>Textbook uses the terms <em>job</em> and <em>process</em> almost interchangeably</p>
</blockquote>
<h4 id="_14">å®šä¹‰<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<p>è¿›ç¨‹æ˜¯è¿è¡Œä¸­çš„ç¨‹åºï¼ŒæŒ‰ç…§æŒ‡ä»¤æµé¡ºåºè¿›è¡Œ</p>
<p>ä¸€ä¸ªè¿›ç¨‹åŒ…å«</p>
<ul>
<li>text section (code)</li>
<li>data section (global vars)</li>
<li>stack (function parameters, local vars, return addresses)</li>
<li>heap (dynamically allocated memory)</li>
<li>program counter </li>
</ul>
<p><img src="./assets/image-20240923112853058.png" alt="image-20240923112853058" style="zoom:33%;" /> stack å’Œ heap ç›¸å¯¹è€Œç”Ÿï¼šçµæ´»åº”ç”¨å†…å­˜ç©ºé—´</p>
<p>è¿›ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿è¡Œå•ä½ï¼Œä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½</p>
<h4 id="process-state">Process state<a class="headerlink" href="#process-state" title="Permanent link">&para;</a></h4>
<p>è¿›ç¨‹çŠ¶æ€</p>
<p><img src="./assets/image-20240923113548425.png" alt="image-20240923113548425" style="zoom: 33%;" /></p>
<ul>
<li><strong>new åˆ›å»ºæ€</strong>ï¼šæ­£åœ¨è¢«åˆ›å»ºä¸­</li>
<li>
<p>åˆ›å»ºæ–°è¿›ç¨‹çš„æ“ä½œåŸè¯­</p>
<ul>
<li>ç”³è¯·ä¸€ä¸ªç©ºç™½ PCBï¼Œå¡«å†™ç”¨äºæ§åˆ¶å’Œç®¡ç†è¿›ç¨‹çš„ä¿¡æ¯</li>
<li>åˆ†é…è¿è¡Œæ‰€éœ€èµ„æº</li>
<li>åˆå§‹åŒ– PCB</li>
<li>è½¬å…¥å°±ç»ªæ€å¹¶æ’å…¥å°±ç»ªé˜Ÿåˆ—</li>
</ul>
</li>
<li>
<p><strong>running è¿è¡Œæ€</strong></p>
</li>
<li><strong>ready å°±ç»ªæ€</strong>ï¼šç­‰å¾…è¢«åˆ†é…ä¸€ä¸ªå¤„ç†å™¨ processorï¼ˆCPUï¼‰å·²ç»è¢«åŠ è½½è¿›å†…å­˜ memory</li>
<li><strong>waiting/block é˜»å¡æ€</strong>ï¼šç­‰å¾…æŸä¸ªèµ„æºå¯ç”¨ï¼ˆä¸åŒ…æ‹¬ CPUï¼‰æˆ–è€…ç­‰å¾… I/O å®Œæˆ</li>
<li>
<p>é˜»å¡åŸè¯­ Block æ‰§è¡Œè¿‡ç¨‹</p>
<ul>
<li>æ‰¾åˆ°è¢«é˜»å¡è¿›ç¨‹çš„æ ‡è¯†å· PID å¯¹åº”çš„ PCB</li>
<li>è‹¥è¯¥è¿›ç¨‹ä¸ºè¿è¡Œæ€ï¼Œåˆ™ä¿æŠ¤å…¶çº¿ç¨‹ï¼Œå°†å…¶çŠ¶æ€è½¬ä¸ºé˜»å¡æ€ï¼Œåœæ­¢è¿è¡Œ</li>
<li>å°†è¯¥ PCB æ’å…¥ç›¸åº”äº‹ä»¶çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œå°† CPU è°ƒåº¦ç»™å…¶ä»–è¿›ç¨‹</li>
</ul>
</li>
<li>
<p><strong>terminated ç»ˆæ­¢æ€</strong>ï¼šç»“æŸè¿›ç¨‹</p>
</li>
<li>ç»ˆæ­¢è¿›ç¨‹çš„æ“ä½œ<ul>
<li>æ ¹æ®è¢«ç»ˆæ­¢è¿›ç¨‹çš„æ ‡è¯†ç¬¦ï¼Œæ£€ç´¢å‡ºè¯¥è¿›ç¨‹çš„ PCBï¼Œä»ä¸­è¯»å‡ºè¯¥è¿›ç¨‹çš„çŠ¶æ€ã€‚</li>
<li>è‹¥è¢«ç»ˆæ­¢è¿›ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œç«‹å³ç»ˆæ­¢è¯¥è¿›ç¨‹çš„æ‰§è¡Œï¼Œå°† CPU èµ„æºåˆ†é…ç»™å…¶ä»–è¿›ç¨‹ã€‚</li>
<li>è‹¥è¯¥è¿›ç¨‹è¿˜æœ‰å­å­™è¿›ç¨‹ï¼Œåˆ™é€šå¸¸éœ€å°†å…¶æ‰€æœ‰å­å­™è¿›ç¨‹ç»ˆæ­¢ï¼ˆæœ‰äº› OS æ— æ­¤æ“ä½œï¼‰</li>
<li>å°†è¯¥è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æºï¼Œæˆ–å½’è¿˜ç»™å…¶çˆ¶è¿›ç¨‹ï¼Œæˆ–å½’è¿˜ç»™æ“ä½œç³»ç»Ÿ</li>
<li>å°†è¯¥ PCB ä»æ‰€åœ¨é˜Ÿåˆ—(é“¾è¡¨)ä¸­åˆ é™¤</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>è¿›ç¨‹å”¤é†’ wakeup åŸè¯­</p>
</li>
<li>
<p>åœ¨è¯¥äº‹ä»¶é˜Ÿåˆ—ä¸­æ‰¾åˆ°ç›¸åº”è¿›ç¨‹çš„ PCB</p>
</li>
<li>
<p>å°†å…¶ä»ç­‰å¾…é˜Ÿåˆ—ä¸­ç§»å‡ºï¼Œå¹¶è®¾ç½®çŠ¶æ€ä¸ºå°±ç»ªæ€</p>
</li>
<li>
<p>å°†è¯¥ PCB æ’å…¥å°±ç»ªé˜Ÿåˆ—ï¼Œç­‰å¾…è°ƒåº¦ç¨‹åºè°ƒåº¦</p>
</li>
</ul>
<h4 id="process-control-blockpcb">Process control block(PCB)<a class="headerlink" href="#process-control-blockpcb" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>OS æ•°æ®ç»“æ„ï¼Œç”¨æ¥è·Ÿè¸ªè¿›ç¨‹å’Œç›¸å…³èµ„æº</p>
</li>
<li>
<p>PCB åŒ…å«ï¼šè¿›ç¨‹çŠ¶æ€ã€PCã€å¯„å­˜å™¨å€¼ã€CPU è°ƒåº¦ã€å†…å­˜ç®¡ç†ä¿¡æ¯ã€accounting ä¿¡æ¯ã€I/O ä¿¡æ¯</p>
</li>
<li>Process ID æ˜¯è¿›ç¨‹çš„ç‹¬ç‰¹ç¼–å·</li>
<li>PCB ä¸­çš„ PC æ˜¯è®°å½•ç¨‹åºç›®å‰æ­£åœ¨è¿è¡Œçš„ä½ç½®</li>
</ul>
<p><img src="./assets/image-20240925150055065.png" alt="image-20240925150055065" style="zoom: 33%;" /></p>
<p><a href="# Context Switch ä¸Šä¸‹æ–‡åˆ‡æ¢">Context Switch ä¸Šä¸‹æ–‡åˆ‡æ¢</a> çš„ overhead</p>
<blockquote>
<p>åˆ†é…è®¾å¤‡ä¸éœ€è¦åˆ›å»ºæ–°è¿›ç¨‹</p>
<p>ç”¨æˆ·ç™»å½•æˆåŠŸã€å¯åŠ¨ç¨‹åºæ‰§è¡Œéœ€è¦åˆ›å»ºæ–°è¿›ç¨‹</p>
</blockquote>
<h3 id="scheduling">è¿›ç¨‹è°ƒåº¦ scheduling<a class="headerlink" href="#scheduling" title="Permanent link">&para;</a></h3>
<h4 id="process-scheduling-queues">Process Scheduling Queues<a class="headerlink" href="#process-scheduling-queues" title="Permanent link">&para;</a></h4>
<p>CPU Switch From Process to Process</p>
<p><strong>Job queue</strong> â€“ set of all processes in the systemï¼ˆåŒ…æ‹¬ ready å’Œæ­£åœ¨æ‰§è¡Œçš„</p>
<p><strong>Ready queue</strong> â€“ set of all processes residing in <em>main memory</em>, ready and waiting to executeï¼ˆç­‰å¾… CPU</p>
<p><strong>Device queues</strong> â€“ set of processes waiting for an I/O device æœ‰å¾ˆå¤šè®¾å¤‡ï¼ˆç”³è¯·ä½¿ç”¨ deviceâ€”â€”é€šè¿‡ç³»ç»Ÿè°ƒç”¨</p>
<p>Processes migrate among the various queues</p>
<blockquote>
<p>[!IMPORTANT]</p>
<p>ä¸€ä¸ª PCB èƒ½ä¸èƒ½åœ¨ä¸¤ä¸ªé˜Ÿåˆ—ï¼ˆdevice&amp;readyï¼‰é‡ŒåŒæ—¶æ’é˜Ÿï¼Ÿ</p>
<ul>
<li>ä¸å¯èƒ½</li>
</ul>
</blockquote>
<p><img src="./assets/image-20240925152502875.png" alt="image-20240925152502875" style="zoom: 33%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>æˆ‘ä»¬æ˜¯æŠŠ PCB æ”¾åˆ°è¿›ç¨‹é˜Ÿåˆ—é‡Œï¼›</p>
<p>CPU æœ‰å››ä¸ªæ ¸å¯ä»¥æœ‰ 4 ä¸ªé˜Ÿåˆ—ï¼Œä¹Ÿå¯ä»¥åªæœ‰ 1 ä¸ªé˜Ÿåˆ—</p>
</blockquote>
<h4 id="schedulers">Schedulers è°ƒåº¦å™¨<a class="headerlink" href="#schedulers" title="Permanent link">&para;</a></h4>
<p><mark>è°ƒåº¦å™¨æ˜¯ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼ŒA scheduler is a piece of program</mark></p>
<p><strong>Long-term scheduler</strong>  (or job scheduler) â€“ selects which processes should be brought into memory (the ready queue) </p>
<p>é•¿æœŸè°ƒåº¦æ§åˆ¶å¤šé“ç¨‹åºè®¾è®¡(å¹¶å‘) degree of multiprogramming</p>
<p><strong>Short-term scheduler</strong>  (or CPU scheduler) â€“ selects which process should be executed next and allocates CPU</p>
<ul>
<li>The long-term scheduler is invoked very infrequently (seconds, minutes) =&gt; (may be slow)</li>
<li>The short-term scheduler is invoked very frequently (milliseconds) =&gt; (must be fast)</li>
</ul>
<p><strong>Medium Term Scheduling</strong>ï¼šè¿›ç¨‹åœ¨å†…å­˜å’Œç£ç›˜é—´äº¤æ¢ swap in and out</p>
<blockquote>
<p>[!WARNING]</p>
<p>UNIX and Windows do not use long-term scheduling</p>
</blockquote>
<p>äº¤æ¢è¿è¡Œç¨‹åºåˆ°ç£ç›˜ï¼ˆ....ï¼Ÿ</p>
<p><img src="./assets/image-20240925153235578.png" alt="image-20240925153235578" style="zoom:33%;" /></p>
<p>Processes can be described as either:</p>
<ul>
<li>
<p><strong>I/O-bound process</strong> I/O ç»‘å®šè¿›ç¨‹ â€“ spends more time doing I/O than computations, many short CPU burstsï¼Œegï¼šä¸‹è½½</p>
</li>
<li>
<p><strong>CPU-bound process</strong> CPU ç»‘å®šè¿›ç¨‹ â€“ spends more time doing computations; few very long CPU burstsï¼Œegï¼šç§‘å­¦è®¡ç®—</p>
</li>
</ul>
<h4 id="context-switch">Context Switch ä¸Šä¸‹æ–‡åˆ‡æ¢<a class="headerlink" href="#context-switch" title="Permanent link">&para;</a></h4>
<p>å½“ CPU åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿå¿…é¡»ä¿å­˜æ—§è¿›ç¨‹çš„çŠ¶æ€ï¼Œå¹¶ä¸ºæ–°è¿›ç¨‹åŠ è½½ä¿å­˜çš„çŠ¶æ€</p>
<p>ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æµç¨‹å¦‚ä¸‹ï¼š
1ï¼‰æŒ‚èµ·ä¸€ä¸ªè¿›ç¨‹ï¼Œå°† CPU ä¸Šä¸‹æ–‡ä¿å­˜åˆ° PCB ï¼ŒåŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨å’Œå…¶ä»–å¯„å­˜å™¨ã€‚
2ï¼‰å°†è¿›ç¨‹çš„ PCB ç§»å…¥ç›¸åº”çš„é˜Ÿåˆ—ï¼Œå¦‚å°±ç»ªã€åœ¨æŸäº‹ä»¶é˜»å¡ç­‰é˜Ÿåˆ—ã€‚
3ï¼‰é€‰æ‹©å¦ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œå¹¶æ›´æ–°å…¶ PCB ã€‚
4ï¼‰æ¢å¤æ–°è¿›ç¨‹çš„ CPU ä¸Šä¸‹æ–‡ã€‚
5ï¼‰è·³è½¬åˆ°æ–°è¿›ç¨‹ PCB ä¸­çš„ç¨‹åºè®¡æ•°å™¨æ‰€æŒ‡å‘çš„ä½ç½®æ‰§è¡Œã€‚</p>
<p>ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¶ˆè€—ï¼š</p>
<p>ä¸Šä¸‹æ–‡åˆ‡æ¢é€šå¸¸æ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼Œå³å®ƒéœ€è¦ç›¸å½“å¯è§‚çš„ CPU æ—¶é—´ï¼Œåœ¨æ¯ç§’å‡ åä¸Šç™¾æ¬¡çš„åˆ‡æ¢ä¸­ï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½éœ€è¦çº³ç§’é‡çº§çš„æ—¶é—´ï¼Œæ‰€ä»¥ä¸Šä¸‹æ–‡åˆ‡æ¢å¯¹ç³»ç»Ÿæ¥è¯´æ„å‘³ç€æ¶ˆè€—å¤§é‡çš„ CPU æ—¶é—´ã€‚</p>
<p>æ—¶é—´å–å†³äºç¡¬ä»¶æ”¯æŒï¼›åœ¨ SPARC æ¶æ„ä¸­ï¼Œæä¾›äº†å¯„å­˜å™¨ç»„</p>
<ul>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶ PCB ä¸å¿…è®°å½•è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§æ˜¯å†…æ ¸ kernel åˆ¤æ–­çš„</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢åªèƒ½å‘ç”Ÿåœ¨å†…æ ¸æ€</li>
<li>è¿›ç¨‹ä¸Šä¸‹æ–‡é‡‡ç”¨è¿›ç¨‹ PCB è¡¨ç¤ºï¼ŒåŒ…æ‹¬ CPU å¯„å­˜å™¨çš„å€¼ã€è¿›ç¨‹çŠ¶æ€å’Œå†…å­˜ç®¡ç†ä¿¡æ¯ç­‰ã€‚</li>
</ul>
<blockquote>
<p>[!NOTE]</p>
<p>è°ƒåº¦æ˜¯å†³ç­–è¡Œä¸ºï¼Œåˆ‡æ¢æ˜¯æ‰§è¡Œè¡Œä¸º</p>
<p>å…ˆæœ‰èµ„æºè°ƒåº¦ï¼Œå†æœ‰è¿›ç¨‹åˆ‡æ¢</p>
</blockquote>
<h3 id="_15">è¿›ç¨‹æ“ä½œ<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<h4 id="process-creation">Process Creation<a class="headerlink" href="#process-creation" title="Permanent link">&para;</a></h4>
<p>çˆ¶è¿›ç¨‹åˆ›é€ å­è¿›ç¨‹ fork</p>
<ul>
<li>
<p>Resource sharing</p>
</li>
<li>
<p>Parent and children share all resources</p>
</li>
<li>
<p>Children share subset of parentâ€™s resources</p>
</li>
<li>
<p>Parent and child share no resources</p>
</li>
<li>
<p>Execution</p>
</li>
<li>
<p>Parent and children execute concurrently</p>
</li>
<li>Parent waits until children terminate</li>
<li>Address space</li>
<li>Child duplicate of parent</li>
<li>
<p>Child <em>has a program loaded into it</em></p>
</li>
<li>
<p>UNIX examples</p>
</li>
<li><strong>fork</strong> system call creates new process</li>
<li><strong>exec</strong> system call used after a fork to replace the process's memory space with a new program</li>
</ul>
<blockquote>
<p>çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹å¯ä»¥å¹¶å‘æ‰§è¡Œ</p>
<p>çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹æœ‰å„è‡ªçš„ç©ºé—´ï¼Œä¸å…±äº«è™šæ‹Ÿåœ°å€</p>
<p>çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹æœ‰ä¸åŒçš„è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰-&gt; éš”ç¦»</p>
<p>çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¸èƒ½åŒæ—¶ä½¿ç”¨</p>
</blockquote>
<p><img src="./assets/image-20240930103721294.png" alt="image-20240930103721294" style="zoom:30%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>å­è¿›ç¨‹å¯ä»¥ <strong>ç»§æ‰¿</strong> çˆ¶è¿›ç¨‹çš„å†…å®¹ï¼›
éœ€è¦é‡ç½® pidï¼Œcpu timeï¼Œä¼˜å…ˆçº§ï¼Œå †æ ˆ</p>
<p>list of open filesï¼Ÿï¼Ÿ</p>
</blockquote>
<p>OS ä¸æ˜¯çœŸçš„ copyï¼Œæ˜¾å¼ copy</p>
<blockquote>
<p>[!CAUTION]</p>
<p>åˆ›é€ è¿›ç¨‹çš„æ–°çº¿ç¨‹ä¸æ˜¯é€šè¿‡ fork</p>
</blockquote>
<h4 id="process-termination">Process Termination<a class="headerlink" href="#process-termination" title="Permanent link">&para;</a></h4>
<h3 id="cooperating">å…±åŒåä½œ cooperating<a class="headerlink" href="#cooperating" title="Permanent link">&para;</a></h3>
<h4 id="cooperating-processes">Cooperating Processes<a class="headerlink" href="#cooperating-processes" title="Permanent link">&para;</a></h4>
<p><strong>Independent</strong> process ç‹¬ç«‹è¿›ç¨‹ cannot affect or be affected by the execution of another process</p>
<p><strong>Cooperating</strong> process can affect or be affected by the execution of another process</p>
<p><em>Advantages</em> of process cooperation:</p>
<ul>
<li>Information sharing</li>
<li>Computation speed-up (Multiple CPUs)</li>
<li>Modularity</li>
<li>Convenience</li>
</ul>
<h4 id="producer-consumer">Producer-consumer<a class="headerlink" href="#producer-consumer" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20240930110501365.png" alt="image-20240930110501365" style="zoom: 50%;" /></p>
<p>ä¸»è¦ç›®çš„æ˜¯ è§£å†³ ç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹ä¹‹é—´è¿›è¡Œæ•°æ®çš„ <strong>åŒæ­¥</strong> æ“ä½œ</p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1">//Shared data</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="cp">#define BUFFER_SIZE 10</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="p">}</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="n">item</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="c1">//Bounded-Buffer â€“ Insert() Method</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="c1">//Producer pseudo-code:</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="n">Produce</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(((</span><span class="n">in</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="w">   </span><span class="o">==</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">           </span><span class="cm">/* do nothing -- no free buffers */</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">    </span><span class="n">buffer</span><span class="p">[</span><span class="n">in</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">    </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="p">;</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="p">}</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20"></a>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="c1">//Bounded Buffer â€“ Remove() Method</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="c1">//Consumer pseudo-code:</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="c1">//do nothing, nothing to consume</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">    </span><span class="n">Remove</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">buffer</span><span class="p">;</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">    </span><span class="n">item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">out</span><span class="p">];</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="w">    </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">out</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER</span><span class="w"> </span><span class="n">SIZE</span><span class="p">;</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<blockquote>
<p>How many itemsï¼Ÿ</p>
<ul>
<li>(in-out) % BUFFER_SIZE</li>
<li>æˆ–è€…åŠ ä¸€ä¸ªå˜é‡ count</li>
</ul>
</blockquote>
<h3 id="_16">è¿›ç¨‹é—´é€šä¿¡<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<h4 id="interprocess-communication-ipc">Interprocess Communication (IPC)<a class="headerlink" href="#interprocess-communication-ipc" title="Permanent link">&para;</a></h4>
<p>Two models for IPC: <strong>message passing</strong> æ¶ˆæ¯é˜Ÿåˆ— and <strong>shared memory</strong> å…±äº«å†…å­˜ï¼ˆæ–‡ä»¶ï¼‰</p>
<p>é€šä¿¡æ¨¡å‹ï¼š</p>
<p><img src="./assets/image-20240930111506403.png" alt="image-20240930111506403" style="zoom: 33%;" /></p>
<p>å…±äº«å†…å­˜çš„ä¸»è¦ä¼˜ç‚¹ï¼šæ•°æ®ä¸€è‡´æ€§</p>
<p>In IPC, minimize shared resources can reduce conflicts</p>
<h4 id="direct-communication">Direct Communication<a class="headerlink" href="#direct-communication" title="Permanent link">&para;</a></h4>
<p>explictly æ˜¾å¼çš„</p>
<p>A link is associated with exactly one pair of communicating processes</p>
<p>Between each pair there exists exactly one link</p>
<h4 id="indirect-communication">Indirect Communication<a class="headerlink" href="#indirect-communication" title="Permanent link">&para;</a></h4>
<p>mailbox(ports)â€”â€”both synchronous and asynchronous communication</p>
<p>A link may be associated with many processes</p>
<p>Each pair of processes may share several communication links</p>
<h4 id="synchronization">Synchronization åŒæ­¥æ€§<a class="headerlink" href="#synchronization" title="Permanent link">&para;</a></h4>
<p>send æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨</p>
<p><strong>Blocking</strong> is considered <strong>synchronous</strong></p>
<ul>
<li>Blocking send has the sender blocked until the message is received</li>
<li>Blocking receive has the receiver block until a message is available</li>
</ul>
<p><strong>Non-blocking</strong> is considered <strong>asynchronous</strong></p>
<ul>
<li>Non-blocking send has the sender send the message and continue</li>
<li>Non-blocking receive has the receiver receive a valid message or null</li>
</ul>
<h3 id="communication-in-client-server-systems">Communication in Client-Server Systems<a class="headerlink" href="#communication-in-client-server-systems" title="Permanent link">&para;</a></h3>
<h4 id="sockets">Sockets<a class="headerlink" href="#sockets" title="Permanent link">&para;</a></h4>
<h2 id="threads">çº¿ç¨‹ Threads<a class="headerlink" href="#threads" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>ç¬¬å››ç« </p>
<ul>
<li>çº¿ç¨‹æ¦‚å¿µ</li>
<li>çº¿ç¨‹èµ„æºï¼šç§æœ‰æ•°æ®ï¼ˆå¯„å­˜å™¨å’Œæ ˆï¼‰</li>
<li>ç”¨æˆ·ã€å†…æ ¸çº¿ç¨‹</li>
<li>multi-threading models çº¿ç¨‹æ¨¡å‹ 3 ç§</li>
</ul>
</blockquote>
<h3 id="overview_1">Overview<a class="headerlink" href="#overview_1" title="Permanent link">&para;</a></h3>
<p>ç¨‹åºå†…éƒ¨éš”ç¦»å’Œè°ƒåº¦</p>
<h4 id="single-and-multithreaded-processes">Single and Multithreaded Processes<a class="headerlink" href="#single-and-multithreaded-processes" title="Permanent link">&para;</a></h4>
<h6 id="_17"><img src="../images/image-20241009150251297.png" alt="image-20241009150251297" style="zoom: 33%;" /><a class="headerlink" href="#_17" title="Permanent link">&para;</a></h6>
<p>CPU è°ƒåº¦ schedule/dispatch çš„æœ€å°ï¼ˆåŸºæœ¬ï¼‰å•ä½ï¼šçº¿ç¨‹ thread</p>
<p>èµ„æºåˆ†é… allocate çš„æœ€å°ï¼ˆåŸºæœ¬ï¼‰å•ä½ï¼šè¿›ç¨‹ process</p>
<h5 id="_18">è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h5>
<p><img src="./assets/cb8c649311628903e2240ebd3e73873.jpg" alt="cb8c649311628903e2240ebd3e73873" style="zoom:50%;" /></p>
<p>çº¿ç¨‹å¯ä»¥åœ¨å¤šä¸ª CPU ä¸Šæ‰§è¡Œ</p>
<p>åŒä¸€è¿›ç¨‹çš„çº¿ç¨‹å…±äº«åœ°å€ç©ºé—´å’Œèµ„æº</p>
<p>çº¿ç¨‹å¯ä»¥æé«˜ç³»ç»Ÿå¹¶å‘æ€§</p>
<h4 id="benfits">Benfits<a class="headerlink" href="#benfits" title="Permanent link">&para;</a></h4>
<p>Responsivenessï¼šinteractive applications</p>
<p>Resource Sharingï¼šmemory for code and data can be shared.</p>
<p>Economyï¼šcreating processes are more expensive.</p>
<p>Utilization of MP Architectures å¤šå¤„ç†å™¨æ¶æ„ï¼šmulti-threading increases concurrency å¯æ‹“å±•æ€§</p>
<h4 id="user-level-threadsult">User Level Threads(ULT)<a class="headerlink" href="#user-level-threadsult" title="Permanent link">&para;</a></h4>
<p>Thread management done by user-level threads library</p>
<p>Three primary thread libraries: </p>
<ul>
<li>UNIX: POSIX Pthreads (can also be provided as system library) </li>
<li>Windows: Windows API (Java)</li>
</ul>
<p>ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹åªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹</p>
<p>å¯¹äºç”¨æˆ·çº§çº¿ç¨‹ï¼Œå†…æ ¸å¹¶ä¸çŸ¥æƒ…</p>
<blockquote>
<p>ç”¨æˆ·çº§çº¿ç¨‹é—´çš„åˆ‡æ¢æ¯”å†…æ ¸çº§åˆ‡æ¢æ•ˆç‡é«˜</p>
<p>ç”¨æˆ·çº§çº¿ç¨‹å¯ä»¥åœ¨ä¸æ”¯æŒå†…æ ¸çº§çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸Šå®ç°</p>
<p>ç”¨æˆ·çº§çº¿ç¨‹çš„åˆ‡æ¢é€šè¿‡ <strong>çº¿ç¨‹åº“</strong>ï¼Œä¸éœ€è¦å†…æ ¸çš„æ”¯æŒï¼Œå³çº¿ç¨‹åº“ä¸ºç”¨æˆ·çº§çº¿ç¨‹å»ºç«‹ä¸€ä¸ªçº¿ç¨‹æ§åˆ¶å—</p>
</blockquote>
<h4 id="kernel-level-threadsklt">Kernel Level Threads(KLT)<a class="headerlink" href="#kernel-level-threadsklt" title="Permanent link">&para;</a></h4>
<p>Almost all contemporary OS implements kernel threads.</p>
<p>Kernel level threadsï¼šæ”¯æŒè°ƒåº¦ï¼Œä¾¿äºçº¿ç¨‹åˆ‡æ¢ï¼Œé¿å…é˜»å¡ï¼›æ‰§è¡Œçš„è½½ä½“</p>
<p>User level threadsï¼šï¼›é€»è¾‘çš„è½½ä½“</p>
<p>å†…æ ¸çº§çº¿ç¨‹æ‰€éœ€è¦çš„èµ„æºæ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½ç”³è¯·çš„</p>
<blockquote>
<p>å†…æ ¸çº§ï¼ˆç³»ç»Ÿçº§ï¼‰çº¿ç¨‹çš„è°ƒåº¦ç”±æ“ä½œç³»ç»Ÿå®Œæˆ</p>
<p>[!NOTE]</p>
<p>å¤šçº¿ç¨‹çš„ç‰¹é•¿ï¼šæé«˜å¹¶å‘æ€§ï¼Œä¾‹å¦‚çŸ©é˜µä¹˜æ³•ã€web æœåŠ¡å™¨å“åº” HTTP</p>
<p>å¤šçº¿ç¨‹ä¸å…±äº«æ ˆæŒ‡é’ˆ</p>
<p>åŒä¸€è¿›ç¨‹ä¸­çš„å„ä¸ªçº¿ç¨‹æœ‰ç›¸åŒçš„åœ°å€å•ä½</p>
</blockquote>
<h3 id="multithreading-models">Multithreading Models<a class="headerlink" href="#multithreading-models" title="Permanent link">&para;</a></h3>
<h4 id="many-to-one-model">Many-to-one Model<a class="headerlink" href="#many-to-one-model" title="Permanent link">&para;</a></h4>
<p>å¤šå¯¹ä¸€æ¨¡å‹</p>
<p>ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹å¡ä½äº†ï¼Œæ•´ä¸ªè¿›ç¨‹å°±å¡ä½äº†</p>
<p>thread management is efficient, but will block if making system call, kernel can schedule only one thread at a time</p>
<p>çº¿ç¨‹ç®¡ç†æ˜¯é«˜æ•ˆçš„ï¼Œä½†å¦‚æœè¿›è¡Œç³»ç»Ÿè°ƒç”¨ä¼šé˜»å¡ï¼Œå†…æ ¸ä¸€æ¬¡åªèƒ½è°ƒåº¦ä¸€ä¸ªçº¿ç¨‹</p>
<p><img src="./assets/image-20241009152351978.png" alt="image-20241009152351978" style="zoom:30%;" /></p>
<blockquote>
<p>Qï¼šæŸä¸ªåˆ†æ—¶ç³»ç»Ÿé‡‡ç”¨ <strong>å¤šå¯¹ä¸€</strong> çº¿ç¨‹æ¨¡å‹ã€‚å†…å­˜ä¸­æœ‰ 10 ä¸ªè¿›ç¨‹å¹¶å‘è¿è¡Œï¼Œå…¶ä¸­ 9 ä¸ªè¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹ A æ‹¥æœ‰ 11 ä¸ªçº¿ç¨‹ã€‚åˆ™ A è·å¾—çš„ CPU æ—¶é—´å æ€»æ—¶é—´çš„ 1/10</p>
</blockquote>
<h4 id="one-to-one">One-to-one<a class="headerlink" href="#one-to-one" title="Permanent link">&para;</a></h4>
<p>Each user-level thread maps to kernel thread</p>
<p>more concurrency, but creating thread is expensive</p>
<p>èƒ½è®©çº¿ç¨‹å¹¶è¡Œï¼Œæ¯ä¸ªç”¨æˆ·çº§çº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹</p>
<blockquote>
<p>Qï¼šæŸä¸ªåˆ†æ—¶ç³»ç»Ÿé‡‡ç”¨ <strong>ä¸€å¯¹ä¸€</strong> çº¿ç¨‹æ¨¡å‹ã€‚å†…å­˜ä¸­æœ‰ 10 ä¸ªè¿›ç¨‹å¹¶å‘è¿è¡Œï¼Œå…¶ä¸­ 9 ä¸ªè¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹ A æ‹¥æœ‰ 11 ä¸ªçº¿ç¨‹ã€‚åˆ™ A è·å¾—çš„ CPU æ—¶é—´å æ€»æ—¶é—´çš„ 11/20</p>
</blockquote>
<h4 id="many-to-many-model">Many-to-Many Model<a class="headerlink" href="#many-to-many-model" title="Permanent link">&para;</a></h4>
<p>flexibleï¼ŒLWP ID kernel æ ¹æ®æƒ…å†µçœ‹è°ƒåº¦</p>
<p>Allows many user level threads to be mapped to many kernel threads</p>
<p>Allows the operating system to create a sufficient number of kernel threads</p>
<h4 id="two-level-model">Two-level Model<a class="headerlink" href="#two-level-model" title="Permanent link">&para;</a></h4>
<p>Similar to M: M, except that it allows a user thread to be bound to kernel thread</p>
<h3 id="threading-issues">Threading Issues<a class="headerlink" href="#threading-issues" title="Permanent link">&para;</a></h3>
<p>Semantics è¯­ä¹‰ of <code>fork()</code> and <code>exec(ï¼‰</code></p>
<blockquote>
<p>Does fork() duplicate only the calling thread or all threads?</p>
<ul>
<li>
<p>Some unix systems have two versions of fork(), one that <strong>duplicates all threads</strong> and another that <strong>duplicates the thread</strong> that invokes fork().</p>
</li>
<li>
<p>Exec() will replace the entire process.</p>
</li>
</ul>
</blockquote>
<h4 id="thread-cancellation">Thread Cancellation<a class="headerlink" href="#thread-cancellation" title="Permanent link">&para;</a></h4>
<p><strong>Asynchronous cancellation</strong> å¼‚æ­¥ terminates the target thread  immediately</p>
<p><strong>Deferred cancellation</strong> å»¶å allows the target thread to periodically check via a flag if it should be cancelled</p>
<h4 id="signal-handling">Signal Handling<a class="headerlink" href="#signal-handling" title="Permanent link">&para;</a></h4>
<p>A <strong>signal handler</strong> is used to process signals, either synchronous or asynchronous:</p>
<ul>
<li>Signal is generated by particular event</li>
<li>Signal is delivered to a process</li>
<li>Signal is handled</li>
</ul>
<h4 id="thread-pools">Thread Pools çº¿ç¨‹æ± <a class="headerlink" href="#thread-pools" title="Permanent link">&para;</a></h4>
<p>Create a number of threads in a pool where they await work</p>
<p>Advantages</p>
<ul>
<li>Usually slightly faster to service a request with an existing thread than create a new thread</li>
<li>Allows the number of threads in the application(s) to be bound to the size of the pool</li>
</ul>
<p><strong>Thread-Local Storageï¼ˆTLSï¼‰</strong>ï¼šAllows each thread to have its own copy of data</p>
<h4 id="scheduler-activations">Scheduler Activations è°ƒåº¦æ¿€æ´»<a class="headerlink" href="#scheduler-activations" title="Permanent link">&para;</a></h4>
<p>LWP is a virtual processor attached to kernel thread</p>
<p>Scheduler activations provide <strong>upcalls</strong> - a communication mechanism from the kernel to the thread library</p>
<p>Upcalls are handled by the thread library with an <strong>upcall handler</strong>.</p>
<p>This communication allows an application to maintain the correct number of kernel threads</p>
<p>When an application thread is about to block, an upcall is triggered. </p>
<h2 id="cpu-scheduling">è°ƒåº¦ CPU Scheduling<a class="headerlink" href="#cpu-scheduling" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>ç¬¬äº”ç« </p>
<ul>
<li>è°ƒåº¦æ ‡å‡† 5 ä¸ª</li>
<li>æŠ¢å ã€éæŠ¢å </li>
<li>è°ƒåº¦ç®—æ³• 6 ä¸ª</li>
</ul>
</blockquote>
<h3 id="basic-concepts">Basic concepts<a class="headerlink" href="#basic-concepts" title="Permanent link">&para;</a></h3>
<p>scheduler dispatch è°ƒåº¦å™¨</p>
<p>è°ƒåº¦èµ„æºï¼ŸCPU</p>
<p>è°ƒåº¦ç›®æ ‡ï¼ŸProcesses/threads</p>
<p><mark>Goal: åœ¨å¤šé“ç¨‹åºè®¾è®¡ multiprogramming ä¸‹ CPU ä½¿ç”¨ç‡æœ€å¤§åŒ–</mark></p>
<p><img src="./assets/image-20241014100337138.png" alt="image-20241014100337138" style="zoom: 50%;" /></p>
<p>CPU-I/O Burst Cycleï¼šProcess execution consists of a cycle of CPU execution and I/O wait</p>
<p>è¿›ç¨‹å®é™…è¿è¡Œæ—¶ CPU å ç”¨æ—¶é—´å°‘ï¼ŒI/O å¤š</p>
<p>å¤§éƒ¨åˆ† CPU burst æ—¶é—´éå¸¸çŸ­</p>
<p>è°ƒåº¦çš„å±‚æ¬¡ï¼šé«˜çº§ï¼ˆä½œä¸šï¼‰è°ƒåº¦ &rarr; ä¸­çº§ï¼ˆå†…å­˜ï¼‰è°ƒåº¦ &rarr; ä½çº§ï¼ˆè¿›ç¨‹è°ƒåº¦ï¼‰</p>
<h4 id="cpu-scheduler">CPU Scheduler<a class="headerlink" href="#cpu-scheduler" title="Permanent link">&para;</a></h4>
<p>CPU å¯èƒ½è¿›è¡Œè°ƒåº¦çš„æƒ…å†µï¼ˆ4 ç§ï¼‰</p>
<p><img src="./assets/image-20241014100627801.png" alt="image-20241014100627801" style="zoom: 67%;" /></p>
<p>non-preemptive éæŠ¢å å¼è°ƒåº¦ 1 &amp; 4</p>
<p>preemptive âœ”ï¸ 2 &amp; 3</p>
<hr />
<p>ä¸èƒ½è°ƒåº¦çš„æƒ…å†µï¼š</p>
<ol>
<li>å¤„ç†ä¸­æ–­è¿‡ç¨‹ä¸­</li>
<li>éœ€è¦å®Œå…¨å±è”½ä¸­æ–­çš„åŸå­æ“ä½œè¿‡ç¨‹ä¸­</li>
</ol>
<h4 id="dispacher">Dispacher<a class="headerlink" href="#dispacher" title="Permanent link">&para;</a></h4>
<p>dispacher latencyï¼šP0 åœæ­¢è¿è¡Œåˆ° P1 è¿è¡Œ</p>
<p><img src="./assets/image-20241014100422820.png" alt="image-20241014100422820" style="zoom:33%;" /></p>
<h3 id="scheduling-criteria">scheduling criteria<a class="headerlink" href="#scheduling-criteria" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>CPU utilization CPU åˆ©ç”¨ç‡ï¼š<strong>CPU ä½¿ç”¨ç‡ = (1 - ç©ºé—²æ€è¿è¡Œæ—¶é—´/æ€»è¿è¡Œæ—¶é—´) * 100%</strong></p>
</li>
<li>
<p>Throughtput ååç‡ï¼š<strong>è¿›ç¨‹æ•°/æ€»æ‰§è¡Œæ—¶é—´</strong></p>
</li>
<li>
<p>Turnaround time å‘¨è½¬æ—¶é—´  = è¿›ç¨‹å®Œæˆæ—¶é—´ - è¿›ç¨‹æäº¤æ—¶é—´ï¼ˆè¿›ç¨‹æäº¤åˆ°ç»“æŸï¼‰</p>
</li>
<li>
<p>waiting time ç­‰å¾…æ—¶é—´</p>
</li>
<li>
<p>response time å“åº”æ—¶é—´</p>
</li>
</ol>
<p><img src="./assets/image-20241014100514354.png" alt="image-20241014100514354" style="zoom:50%;" /></p>
<h3 id="scheduling-algorithms">è°ƒåº¦ç®—æ³• scheduling algorithms<a class="headerlink" href="#scheduling-algorithms" title="Permanent link">&para;</a></h3>
<h4 id="fcfsfirst-come-first-served">FCFS(First-Come, First-Served)<a class="headerlink" href="#fcfsfirst-come-first-served" title="Permanent link">&para;</a></h4>
<p>å…ˆæ¥å…ˆæœåŠ¡ç®—æ³•</p>
<p><img src="./assets/image-20241014100837396.png" alt="image-20241014100837396" style="zoom:50%;" /></p>
<p><img src="./assets/image-20241014100934593.png" alt="image-20241014100934593" style="zoom:50%;" /></p>
<blockquote>
<p>[!IMPORTANT]</p>
<p>Arrival order makes a difference!
åˆ°è¾¾é¡ºåºå¾ˆé‡è¦</p>
</blockquote>
<ul>
<li>FCFS æ˜¯ <strong>éæŠ¢å å¼</strong> ç®—æ³•</li>
<li>FCFS ç®€å•ã€å…¬å¹³</li>
<li><strong>Convoy effect</strong>ï¼ˆæŠ¤èˆªæ•ˆåº”ï¼‰: short process behind long process, the average waiting time may be longer, leading to I/O devices &amp; CPU being idle</li>
</ul>
<p><strong>æœ‰åˆ©äºé•¿ä½œä¸šï¼Œä¸åˆ©äºçŸ­ä½œä¸šï¼›æœ‰åˆ©äº CPU ç¹å¿™å‹ï¼Œä¸åˆ©äº I/O ç¹å¿™å‹</strong></p>
<blockquote>
<p>çŸ­ä½œä¸šä½äºé•¿ä½œä¸šåæ—¶è°ƒåº¦æ—¶é—´è¦å¾ˆé•¿ï¼›I/O ç¹å¿™ä¼šæœ‰å¾ˆå¤š waitingï¼Œä¸æ–­æ’é˜Ÿåˆ° ready queue é˜Ÿå°¾ï¼Œå¦‚æœæ’åˆ°é•¿ä½œä¸šåé¢å°±è¦å¾ˆé•¿æ—¶é—´</p>
</blockquote>
<h4 id="sjfshortest-job-first">SJF(Shortest-Job-First)<a class="headerlink" href="#sjfshortest-job-first" title="Permanent link">&para;</a></h4>
<p>çŸ­ä½œä¸šä¼˜å…ˆç®—æ³•</p>
<ul>
<li>
<p>SJF is a priority scheduling where priority is the predicted next CPU burst time</p>
</li>
<li>
<p>SJF æ—¢å¯ä»¥æ˜¯æŠ¢å å¼ä¹Ÿå¯ä»¥æ˜¯éæŠ¢å å¼</p>
</li>
<li>nonpreemptive â€“ once CPU given to the process it cannot be preempted until completes its CPU burst</li>
<li>preemptive â€“ if a new process arrives with CPU burst length less than remaining time of current executing process, preempt. This scheme is known as the <strong>Shortest-Remaining-TimeFirst (SRTF)</strong> æœ€çŸ­å‰©ä½™æ—¶é—´è°ƒåº¦ç®—æ³•</li>
<li>SJF is <strong>optimal</strong> â€“ gives <strong>minimum average waiting time</strong> for a given set of processes</li>
<li>Which is better? Preemptive? Nonpreemptive? ä¸ç¡®å®šï¼Œè¦æ ¹æ®åˆ°è¾¾æ—¶é—´å’Œ cpu burst ç¡®å®š</li>
<li><strong>Starvation é¥¥é¥¿é—®é¢˜</strong>ï¼Œä¼˜å…ˆçº§ä½çš„è¿›ç¨‹ä¸€ç›´æ— æ³•è¿è¡Œï¼ŒçŸ­ä½œä¸šéƒ½ä¼šå‘ç”Ÿ</li>
<li>Not good for long process ä¸é€‚åˆé•¿è¿›ç¨‹ï¼Œå› ä¸ºä¼˜å…ˆè°ƒåº¦ cpu burst æœ€çŸ­çš„è¿›ç¨‹</li>
</ul>
<h5 id="nonpreemptive">nonpreemptive<a class="headerlink" href="#nonpreemptive" title="Permanent link">&para;</a></h5>
<p><img src="./assets/image-20241014103433736.png" alt="image-20241014103433736" style="zoom:50%;" /></p>
<h5 id="preemptive">preemptive<a class="headerlink" href="#preemptive" title="Permanent link">&para;</a></h5>
<p><img src="./assets/image-20241014104442138.png" alt="image-20241014104442138" style="zoom:50%;" /></p>
<h4 id="priority-scheduling">Priority Scheduling<a class="headerlink" href="#priority-scheduling" title="Permanent link">&para;</a></h4>
<p>ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•</p>
<p>The CPU is allocated to the process with the highest priority (smallest integer means highest priority)</p>
<ul>
<li>
<p>Preemptive</p>
</li>
<li>
<p>nonpreemptive</p>
</li>
</ul>
<p><strong>Static Priority</strong>: determine when processes is created; do not change é™æ€ä¼˜å…ˆ</p>
<p>Problemï¼š<strong>Starvation é¥¥é¥¿</strong> â€“ low priority processes may never execute</p>
<p>Solutionï¼š<strong>Aging</strong> ï¼ˆè€åŒ–ï¼‰â€“ as time progresses increase the priority of the processâ€”â€”<strong>Dynamic Priority</strong> æé«˜ä¼˜å…ˆçº§</p>
<h4 id="highest-response-ratio-next-hrrn">Highest Response Ratio Next ï¼ˆHRRNï¼‰<a class="headerlink" href="#highest-response-ratio-next-hrrn" title="Permanent link">&para;</a></h4>
<p>é«˜å“åº”æ¯”ä¼˜å…ˆç®—æ³•</p>
<ul>
<li>éæŠ¢å å¼</li>
<li>HRRN is a <strong>compromise</strong> æŠ˜ä¸­ between FCFS and SJF</li>
<li>Computing response ratio requires time</li>
<li>improve the responsiveness of the system æé«˜ç³»ç»Ÿå“åº”æ€§</li>
</ul>
<p>Response Ratio ï¼ˆå“åº”æ¯”ï¼‰ = <span class="arithmatex">\(\frac{\text{cpu burst}+\text{waiting time}}{\text{cpu burst}}\)</span> ï¼ˆç­‰å¾…æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´éƒ½è¦è€ƒè™‘</p>
<p>Take Response Ratio as priority</p>
<p>Larger Response Ratio, higher priority</p>
<h5 id="hrrn">HRRN ç®—æ³•çš„å·¥ä½œåŸç†<a class="headerlink" href="#hrrn" title="Permanent link">&para;</a></h5>
<ol>
<li>
<p><strong>åˆå§‹åŒ–</strong>ï¼š è®°å½•æ¯ä¸ªè¿›ç¨‹çš„åˆ°è¾¾æ—¶é—´å’Œæ‰€éœ€çš„æœåŠ¡æ—¶é—´ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—å“åº”æ¯”</strong>ï¼š å¯¹äºæ¯ä¸ªå°±ç»ªé˜Ÿåˆ—ä¸­çš„è¿›ç¨‹ï¼Œè®¡ç®—å…¶å“åº”æ¯”ã€‚</p>
</li>
<li>
<p><strong>é€‰æ‹©æœ€é«˜å“åº”æ¯”çš„è¿›ç¨‹</strong>ï¼š </p>
</li>
<li>é€‰æ‹©å…·æœ‰æœ€é«˜å“åº”æ¯”çš„è¿›ç¨‹æ‰§è¡Œã€‚</li>
<li>
<p>å¦‚æœæœ‰å¤šä¸ªè¿›ç¨‹å…·æœ‰ç›¸åŒçš„æœ€é«˜å“åº”æ¯”ï¼Œåˆ™å¯ä»¥æŒ‰ç…§å…¶ä»–è§„åˆ™ï¼ˆå¦‚å…ˆåˆ°å…ˆæœåŠ¡ï¼‰æ¥é€‰æ‹©ã€‚</p>
</li>
<li>
<p><strong>æ›´æ–°ç­‰å¾…æ—¶é—´å’Œå“åº”æ¯”</strong>ï¼š </p>
</li>
<li>æ¯æ¬¡è°ƒåº¦åï¼Œæ›´æ–°æ‰€æœ‰å°±ç»ªé˜Ÿåˆ—ä¸­è¿›ç¨‹çš„ç­‰å¾…æ—¶é—´ã€‚</li>
<li>é‡æ–°è®¡ç®—æ‰€æœ‰è¿›ç¨‹çš„å“åº”æ¯”</li>
</ol>
<h4 id="round-robin-rr">Round Robin (RR)<a class="headerlink" href="#round-robin-rr" title="Permanent link">&para;</a></h4>
<p>æ—¶é—´ç‰‡è½®è½¬ç®—æ³•</p>
<ul>
<li>Origin from signature method</li>
<li>Each process gets a small unit of CPU time (time quantum), usually 10-100 milliseconds. After this time has elapsed, the process is preempted and added to the end of the ready queue. æé«˜ç³»ç»Ÿäº¤äº’æ€§ï¼ˆäººæœºäº¤äº’ï¼‰</li>
<li>Application: Time-sharing system, Multi-tasking system</li>
<li>å½“å‰è¿›ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œåï¼Œè¯¥è¿›ç¨‹çš„çŠ¶æ€ç”±æ‰§è¡Œæ€å˜æˆå°±ç»ªæ€</li>
</ul>
<p><img src="./assets/image-20241014112933209.png" alt="image-20241014112933209" style="zoom:50%;" /></p>
<p><img src="./assets/image-20241014113016699.png" alt="image-20241014113016699" style="zoom:50%;" /></p>
<h4 id="multilevel-queue">Multilevel Queue<a class="headerlink" href="#multilevel-queue" title="Permanent link">&para;</a></h4>
<p>å¤šå±‚é˜Ÿåˆ—ç®—æ³•</p>
<p>Ready queue is partitioned into separate queues:</p>
<ul>
<li>foreground (interactive)</li>
<li>background (batch)</li>
</ul>
<p>Each queue has its <strong>own scheduling algorithm</strong>, for example</p>
<ul>
<li>foreground â€“ RR</li>
<li>background â€“ FCFS è®¡ç®—å¯†é›†</li>
</ul>
<p>Scheduling must be done between the queues</p>
<ul>
<li>
<p>Fixed priority scheduling; (i.e., serve all from foreground then from background). Possibility of starvation.</p>
</li>
<li>
<p>Time slice â€“ each queue gets a certain amount of CPU time which it can schedule amongst its processes; i.e., 80% to foreground in RR ï¼Œ 20% to background in FCFS </p>
</li>
</ul>
<h4 id="multiple-feedback-queue">Multiple Feedback Queue<a class="headerlink" href="#multiple-feedback-queue" title="Permanent link">&para;</a></h4>
<p>å¤šçº§åé¦ˆé˜Ÿåˆ—</p>
<ul>
<li>
<p>å¤šä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§é€ä¸€é™ä½ï¼ŒæŒ‰ç…§é˜Ÿåˆ—ä¼˜å…ˆçº§è°ƒåº¦</p>
</li>
<li>
<p>è®¾ç½®å¤šä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§ä»ç¬¬ä¸€çº§ä¾æ¬¡é™ä½</p>
</li>
<li>
<p>ä¼˜å…ˆçº§é«˜çš„é˜Ÿåˆ—ï¼Œè¿›ç¨‹æ—¶é—´ç‰‡è¶ŠçŸ­</p>
</li>
<li>
<p>æ¯ä¸ªé˜Ÿåˆ—éƒ½é‡‡ç”¨ FCFS ï¼Œè‹¥åœ¨è¯¥æ—¶é—´ç‰‡å®Œæˆï¼Œåˆ™æ’’ç¦»ç³»ç»Ÿï¼Œæœªå®Œæˆï¼Œè½¬å…¥ä¸‹ä¸€çº§çº§é˜Ÿåˆ—</p>
</li>
<li>
<p>æŒ‰é˜Ÿåˆ—ä¼˜å…ˆçº§è°ƒåº¦ï¼Œä»…å½“ä¸Šä¸€çº§ä¸ºç©ºæ—¶ï¼Œæ‰è¿è¡Œä¸‹ä¸€çº§</p>
</li>
</ul>
<p>è¿›ç¨‹è¿›æ¥ï¼Œå…ˆåˆ°ä¼˜å…ˆçº§æœ€é«˜çš„é˜Ÿåˆ—ä¸­ï¼Œæ—¶é—´ç‰‡å†…å®Œæˆåˆ™æ’¤ç¦»ï¼›å¦åˆ™ï¼Œåˆ°ä¸‹ä¸€çº§é˜Ÿåˆ—æ’é˜Ÿ</p>
<h4 id="multiple-processor-scheduling">Multiple-processor scheduling(äº†è§£)<a class="headerlink" href="#multiple-processor-scheduling" title="Permanent link">&para;</a></h4>
<p>å¤šå¤„ç†å™¨è°ƒåº¦</p>
<p>Load balancing è´Ÿè½½å‡è¡¡</p>
<p>Symmetric multiprocessing(SMP) å¯¹ç§°å¤„ç†å™¨ï¼šæ¯ä¸ªå¤„ç†å™¨éƒ½æ˜¯è‡ªæˆ‘è°ƒåº¦ï¼Œå¤šä¸ªå¤„ç†å™¨å¯ä»¥è¿è¡Œã€æ›´æ–°ä¸€ä¸ªç›¸åŒçš„æ•°æ®ç»“æ„</p>
<p>Asymmetric multiprocessing éå¯¹ç§°å¤„ç†å™¨ï¼šåªæœ‰ä¸€ä¸ªå¤„ç†å™¨å¯ä»¥æ¥è§¦ç³»ç»Ÿæ•°æ®ç»“æ„ï¼ˆè°ƒåº¦ï¼‰ï¼Œå‡è½»æ•°æ®å…±äº«ï¼Œå…¶ä»–å¤„ç†å™¨åªæ‰§è¡Œç”¨æˆ·ä»£ç </p>
<ul>
<li>å½“è°ƒåº¦çš„å¤„ç†å™¨åäº†ï¼Œæ•´ä¸ªç³»ç»Ÿå°±è¿è¡Œä¸ä¸‹å»äº†</li>
</ul>
<h4 id="real-time-scheduling">Real-time scheduling(äº†è§£)<a class="headerlink" href="#real-time-scheduling" title="Permanent link">&para;</a></h4>
<p>å®æ—¶è°ƒåº¦</p>
<p>å®æ—¶ç³»ç»Ÿä¸€å®šè¦åœ¨è§„å®šæ—¶é—´å†…å®Œæˆ</p>
<p>Hard real-time systems ç¡¬å®æ—¶ç³»ç»Ÿï¼šddl å‰æ²¡è¿è¡Œå®Œæœ‰ä¸¥é‡åæœ</p>
<p>Soft real-time systems è½¯å®æ—¶ç³»ç»Ÿï¼šå¯ä»¥åœ¨ ddl å‰æ²¡è¿è¡Œå®Œï¼ˆegï¼Œè…¾è®¯ä¼šè®®</p>
<ul>
<li>Earliest ddl First æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆ</li>
<li>Least Laxity First æœ€ä½æ¾å¼›åº¦ä¼˜å…ˆï¼ˆä¸æ€ä¹ˆç”¨ï¼‰</li>
<li>A çš„æ¾å¼›åº¦ = A å¿…é¡»å®Œæˆçš„æ—¶é—´-A éœ€è¦è¿è¡Œçš„æ—¶é—´-å½“å‰æ—¶é—´</li>
<li>Rate Monotonic scheduling é€Ÿç‡å•è°ƒè°ƒåº¦</li>
<li>åŸºäºä»»åŠ¡çš„å‘¨æœŸï¼ˆä¸€ä¸ªè¿›ç¨‹å¤šä¹…æ‰§è¡Œä¸€æ¬¡ï¼‰æ¥åˆ†é…ä¼˜å…ˆçº§ï¼Œå‘¨æœŸè¶ŠçŸ­ä»»åŠ¡ä¼˜å…ˆçº§è¶Šé«˜</li>
</ul>
<h4 id="thread-scheduling">Thread scheduling(äº†è§£)<a class="headerlink" href="#thread-scheduling" title="Permanent link">&para;</a></h4>
<p>çº¿ç¨‹è°ƒåº¦</p>
<p>Local scheduling ç”¨æˆ·çº§</p>
<p>Global scheduling å†…æ ¸çº§</p>
<blockquote>
<p>[!NOTE]</p>
<p>æ‰¹å¤„ç† FCFS</p>
<p>åˆ†æ—¶ç³»ç»Ÿ</p>
<p>å®æ—¶ç³»ç»Ÿ</p>
</blockquote>
<p><img alt="6be3c0221860c7866993492f536cac5" src="assets/6be3c0221860c7866993492f536cac5.jpg" /></p>
<h3 id="q">Q<a class="headerlink" href="#q" title="Permanent link">&para;</a></h3>
<p><img src="./assets/image-20241021100841358.png" alt="image-20241021100841358" style="zoom: 33%;" /></p>
<blockquote>
<p>å¤–è®¾æ˜¯ä¸å¯æŠ¢å çš„</p>
<p>waiting time æ˜¯è¿›ç¨‹ç­‰å¾… CPU èµ„æºçš„æ—¶é—´ï¼</p>
</blockquote>
<p><img src="./assets/image-20241021102905818.png" alt="image-20241021102905818" style="zoom: 33%;" /></p>
<h2 id="process-synchronization">è¿›ç¨‹åŒæ­¥ Process synchronization<a class="headerlink" href="#process-synchronization" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>åŸºæœ¬æ¦‚å¿µï¼šsynï¼Œraceï¼Œcritical sectionï¼Œfour requirementsï¼ˆäº’æ–¥/å¿™åˆ™ç­‰å¾…ã€ç©ºé—²è®©è¿›ã€ä¼˜å…ˆç­‰å¾…ã€ï¼‰</p>
<p>è½¯ä»¶å®ç°æ–¹æ³•ï¼šå•æ ‡å¿—ï¼ŒåŒæ ‡å¿—ã€ã€ã€</p>
<p>ç¡¬ä»¶å®ç°æ–¹æ³•ï¼šåŸç†ã€å…³ä¸­æ–­ã€Test and Setã€Swapã€CASã€mutex lock</p>
<p>ä¿¡å·é‡æœºåˆ¶ï¼šä¿¡å·é‡åŸºæœ¬æ¦‚å¿µï¼ˆå½¢å¼ã€ç±»å‹ã€ç”¨æ³•ã€å®ç°ã€ç¼ºç‚¹ï¼‰ã€ä¸‰ä¸ªç»å…¸é—®é¢˜ï¼ˆæœ‰ç•Œç¼“å†²åŒºã€è¯»å†™è€…ã€å“²å­¦å®¶ï¼‰</p>
<ul>
<li>éå¿™ç­‰/é˜»å¡ä¿¡å·é‡</li>
</ul>
<p>ç®¡ç¨‹ï¼šåŸºæœ¬æ¦‚å¿µï¼ˆå½¢å¼ã€ç‰¹ç‚¹ã€æ¡ä»¶å˜é‡ï¼‰ã€åº”ç”¨</p>
</blockquote>
<h3 id="background">èƒŒæ™¯ background<a class="headerlink" href="#background" title="Permanent link">&para;</a></h3>
<p>å…±äº«æ•°æ®çš„å¹¶å‘è®¿é—®å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´æ€§ï¼›å¹¶å‘è¿›ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥éœ€è¦åŒæ­¥</p>
<p>Producer-consumer ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼šè§£å†³å¤šä¸ªè¿›ç¨‹é—´çš„åŒæ­¥å’Œå¼‚æ­¥é—®é¢˜</p>
<p><img src="./assets/image-20241021105641372.png" alt="image-20241021105641372" style="zoom:50%;" /> <img src="./assets/image-20241021110813871.png" alt="image-20241021110813871" style="zoom: 67%;" /></p>
<p>count++å’Œ count--ä¸¤æ­¥æœ‰å¯èƒ½å‡ºé”™</p>
<h4 id="race-condition">Race condition ç«æ€æ¡ä»¶<a class="headerlink" href="#race-condition" title="Permanent link">&para;</a></h4>
<p>å‡ºé”™çš„ exampleï¼š</p>
<p><img src="./assets/image-20241021111018744.png" alt="image-20241021111018744" style="zoom:50%;" /></p>
<p>å‡ºé”™çš„åŸå› ï¼šæŠ¢å å¼è°ƒåº¦ï¼Œå¤šä¸ªè¿›ç¨‹å¯¹ shared data è¿›è¡Œæ“ä½œ</p>
<p>Race condition å®šä¹‰ï¼ša memory location is accessed concurrently, and at least one access is a write</p>
<blockquote>
<p><strong>å¯¹äºè®¿é—®å…±äº«çš„å†…æ ¸æ•°æ®ï¼ŒéæŠ¢å å¼çš„å†…æ ¸æ˜¯å¦å—ç«æ€æ¡ä»¶çš„å½±å“ï¼Ÿ</strong></p>
<ul>
<li>å¯èƒ½ä¼šå—å½±å“ï¼Œå½“å¤šå¤„ç†å™¨å¯¹ shared data è¿›è¡Œæ“ä½œ</li>
</ul>
</blockquote>
<h3 id="critical-section-problem">ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem<a class="headerlink" href="#critical-section-problem" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>What operations/processes may have critical problems in OS kernel?</strong></p>
<ul>
<li>cpu</li>
<li>ç”¨æˆ·æ€ï¼šä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹ï¼ˆæ»¡è¶³ shared data å’Œå¹¶å‘æ‰§è¡Œï¼‰</li>
</ul>
</blockquote>
<p><strong>ä¸´ç•Œèµ„æº</strong>ï¼šå¤šè¿›ç¨‹æˆ–å¤šè¿›ç¨‹ä¸­è¢«å…±äº«çš„èµ„æº(shared data)ä¸”ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨</p>
<p><strong>ä¸´ç•ŒåŒº</strong>ï¼šç¨‹åºä¸­ä¸€ä¸ªè®¿é—®å…¬å…±èµ„æºçš„ç¨‹åºç‰‡æ®µï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç è¢«ç§°ä¸ºä¸´ç•ŒåŒº</p>
<blockquote>
<p>[!NOTE]</p>
<p><strong>ä»¥ä¸‹æ˜¯ä¸´ç•Œèµ„æºå—ï¼Ÿ</strong></p>
<ul>
<li>å…¨å±€å…±äº«å˜é‡ï¼ˆæ˜¯ï¼‰ï¼Œå±€éƒ¨å˜é‡ï¼ˆä¸æ˜¯ï¼‰ï¼Œåªè¯»æ•°æ®ï¼ˆä¸æ˜¯ï¼‰ï¼ŒCPUï¼ˆä¸æ˜¯ï¼‰</li>
</ul>
</blockquote>
<p>å¯¹ä¸€ä¸ªè¿›ç¨‹ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªä¸´ç•ŒåŒºï¼›ä¸´ç•ŒåŒºå¯ä»¥åˆå¹¶ï¼ˆdependsï¼‰</p>
<blockquote>
<p>[!CAUTION]</p>
<p>å…±äº«èµ„æºæ‰éœ€è¦äº’æ–¥</p>
</blockquote>
<h4 id="solution">è§£å†³æ–¹æ¡ˆ solution<a class="headerlink" href="#solution" title="Permanent link">&para;</a></h4>
<h5 id="mutual-exclusion">Mutual Exclusionï¼ˆäº’æ–¥/å¿™åˆ™ç­‰å¾…ï¼‰<a class="headerlink" href="#mutual-exclusion" title="Permanent link">&para;</a></h5>
<p>å¦‚æœè¿›ç¨‹ P<sub>i</sub> æ­£åœ¨å…¶ä¸´ç•ŒåŒºä¸­æ‰§è¡Œï¼Œåˆ™å…¶ä»–è¿›ç¨‹ä¸èƒ½åœ¨å…¶ä¸´ç•ŒåŒºä¸­æ‰§è¡Œ</p>
<h5 id="progress">Progressï¼ˆç©ºé—²è®©è¿›ï¼‰<a class="headerlink" href="#progress" title="Permanent link">&para;</a></h5>
<p>å¦‚æœæ²¡æœ‰ä»»ä½•è¿›ç¨‹åœ¨å…¶ä¸´ç•ŒåŒºä¸­æ‰§è¡Œï¼Œå¹¶ä¸”å­˜åœ¨ä¸€äº›å¸Œæœ›è¿›å…¥å…¶ä¸´ç•ŒåŒºçš„è¿›ç¨‹ï¼Œåˆ™ä¸èƒ½æ— é™æœŸåœ°æ¨è¿Ÿé€‰æ‹©ä¸‹ä¸€ä¸ªå°†è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ï¼ˆå³å…è®¸ä¸€ä¸ªè¯·æ±‚è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ç«‹å³è¿›å…¥ä¸´ç•ŒåŒºï¼‰</p>
<h5 id="bounded-waiting">Bounded waitingï¼ˆæœ‰é™ç­‰å¾…ï¼‰<a class="headerlink" href="#bounded-waiting" title="Permanent link">&para;</a></h5>
<p>åœ¨ä¸€ä¸ªè¿›ç¨‹å‘å‡ºè¿›å…¥å…¶ä¸´ç•ŒåŒºçš„è¯·æ±‚ä¹‹åï¼Œåœ¨è¯¥è¯·æ±‚è¢«æ‰¹å‡†ä¹‹å‰ï¼Œå¿…é¡»å¯¹å…è®¸å…¶ä»–è¿›ç¨‹è¿›å…¥å…¶ä¸´ç•ŒåŒºçš„ <strong>æ¬¡æ•°</strong> è¿›è¡Œé™åˆ¶</p>
<ul>
<li>å‡è®¾æ¯ä¸ªè¿›ç¨‹ä»¥éé›¶é€Ÿåº¦æ‰§è¡Œ</li>
<li>æ²¡æœ‰å…³äº <em>N</em> ä¸ªè¿›ç¨‹ç›¸å¯¹é€Ÿåº¦çš„å‡è®¾</li>
</ul>
<h5 id="_19">è®©æƒç­‰å¾…<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h5>
<p>ï¼ˆåŸåˆ™ä¸Šåº”è¯¥éµå®ˆï¼Œä½†éå¿…é¡»ï¼‰å½“è¿›ç¨‹ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œåº”ç«‹å³é‡Šæ”¾å¤„ç†å™¨ï¼Œé˜²æ­¢è¿›ç¨‹å¿™åˆ™ç­‰å¾…ã€‚</p>
<h3 id="_20">åŒæ­¥æœºåˆ¶<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<h4 id="_21">è½¯ä»¶æ–¹æ³•<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<h5 id="_22">å•æ ‡å¿—æ³•<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h5>
<p><img src="./assets/image-20241023145626698.png" alt="image-20241023145626698" style="zoom:50%;" /></p>
<p>i å’Œ j äº¤æ›¿æ‰§è¡Œ</p>
<ul>
<li>æ»¡è¶³ Mutual Exclusion å’Œ bounded waiting</li>
<li>ä¸æ»¡è¶³ progess</li>
</ul>
<h5 id="_23">åŒæ ‡å¿—åæ£€æŸ¥æ³•<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h5>
<p><img src="./assets/image-20241023145544929.png" alt="image-20241023145544929" style="zoom:50%;" /></p>
<ul>
<li>æ»¡è¶³ Mutual Exclusion</li>
<li>ä¸æ»¡è¶³ Progressï¼Œè¿èƒŒç©ºé—²è®©è¿›å‡†åˆ™ï¼Œå­˜åœ¨ CPU è°ƒåº¦çš„ä¸€ç§æƒ…å†µï¼Œä¸¤ä¸ªæ ‡å¿—éƒ½ä¸º TRUE åä¸€ç›´å¾ªç¯ä¸‹å»ï¼‰</li>
<li>å¦‚æœæ²¡æœ‰æ­»å¾ªç¯æ˜¯ bounded waitingï¼Œä½†å¯èƒ½æœ‰æ‰€ä»¥æ€»ä½“ä¸æ˜¯</li>
</ul>
<h5 id="_24">åŒæ ‡å¿—å…ˆæ£€æŸ¥æ³•<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h5>
<p><img src="./assets/image-20241023150759551.png" alt="image-20241023150759551" style="zoom:50%;" /></p>
<p>å’Œå‰é¢ä¸¤ç§ç®—æ³•ç›¸æ¯”ï¼Œå…ˆ while å†è®¾ flag å€¼ï¼š</p>
<p><img src="./assets/image-20241023150932808.png" alt="image-20241023150932808" style="zoom:50%;" /></p>
<ul>
<li><strong>ä¸æ»¡è¶³ Mutual Exclusion</strong>ï¼ˆå­˜åœ¨ CPU è°ƒåº¦çš„ä¸€ç§æƒ…å†µï¼Œä¸¤ä¸ªæ ‡å¿—éƒ½ä¸º TRUEï¼Œå¹¶è¿›å…¥ä¸´ç•ŒåŒº</li>
<li>æ»¡è¶³ Progres</li>
<li>ä¼˜ç‚¹ï¼šä¸ç”¨äº¤æ›¿è¿›å…¥ï¼Œå¯è¿ç»­ä½¿ç”¨</li>
</ul>
<h5 id="petersons-solution">Petersonâ€™s Solution<a class="headerlink" href="#petersons-solution" title="Permanent link">&para;</a></h5>
<p>åŒè¿›ç¨‹è§£å†³æ–¹æ¡ˆ
å‡è®¾ LOAD å’Œ STORE æŒ‡ä»¤æ˜¯åŸå­çš„ï¼›å³ä¸èƒ½è¢«ä¸­æ–­ã€‚
ä¸¤ä¸ªè¿›ç¨‹å…±äº«ä¸¤ä¸ªå˜é‡ï¼š<code>int turn;Boolean flag[2];</code>
å˜é‡ <code>turn</code> è¡¨ç¤ºè½®åˆ°è°è¿›å…¥ä¸´ç•ŒåŒºã€‚
flag æ•°ç»„ç”¨äºæŒ‡ç¤ºè¿›ç¨‹æ˜¯å¦å·²å‡†å¤‡å¥½è¿›å…¥ä¸´ç•ŒåŒºã€‚<code>flag[i] = true</code> è¡¨ç¤ºè¿›ç¨‹ P<sub>i</sub> å·²å‡†å¤‡å¥½</p>
<p>åŸºæœ¬æ€æƒ³ï¼š<img src="../images/image-20241023151545037.png" alt="image-20241023151545037" style="zoom:50%;" /></p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1">//Process Pi</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="n">turn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">turn</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">j</span><span class="p">);</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="n">CRITICAL</span><span class="w"> </span><span class="n">SECTION</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">        </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">    </span><span class="n">REMAINDER</span><span class="w"> </span><span class="n">SECTION</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="p">}</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="c1">//Process Pj</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">    </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">    </span><span class="n">turn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">turn</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">    </span><span class="n">CRITICAL</span><span class="w"> </span><span class="n">SECTION</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">        </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">    </span><span class="n">REMAINDER</span><span class="w"> </span><span class="n">SECTION</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>æ»¡è¶³ mutual exception å’Œ progress</li>
<li>æ»¡è¶³ bounded waitingï¼Œbound æ˜¯ 1</li>
<li>ä½†è¿˜æ˜¯ä¸æ»¡è¶³è®©æƒç­‰å¾…</li>
</ul>
<blockquote>
<p>[!CAUTION]</p>
<p>There are no guarantees that Peterson's solution works correctly on modern computer architectures.</p>
<p>Reasonï¼šè®¡ç®—æœºç¼–è¯‘ä¼˜åŒ– -&gt; ä»£ç çš„ä¹±åºæ‰§è¡Œã€å…ˆ loadï¼ˆè¯»ï¼‰ï¼Œå† storeï¼ˆèµ‹å€¼ï¼‰ã€‘</p>
<p>Solutionï¼šMemory barrier ( å†…å­˜æ …æ  ) -- æ’å…¥è¿™æ¡æŒ‡ä»¤åå°±ä¸ä¼šä¹±åºæ‰§è¡Œäº†</p>
</blockquote>
<h5 id="bakery-algorithm-lamport">Bakery Algorithm (é¢åŒ…æˆ¿ç®—æ³•) Lamport<a class="headerlink" href="#bakery-algorithm-lamport" title="Permanent link">&para;</a></h5>
<p>Multiple-Process Solutionsï¼š for <strong>n</strong> processes</p>
<ol>
<li>ä»»ä½•æ—¶é—´ï¼Œæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ critical section ï¼›</li>
<li>æ¯ä¸ªè¿›ç¨‹æœ€ç»ˆéƒ½ä¼šè¿›å…¥ critical section ï¼›</li>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½èƒ½åœåœ¨ noncritical section ï¼›</li>
<li>ä¸èƒ½å¯¹è¿›ç¨‹çš„é€Ÿåº¦åšä»»ä½•å‡è®¾ã€‚</li>
</ol>
<p>åŸºæœ¬æ€æƒ³ï¼ˆæ’é˜Ÿå–å·ï¼‰ï¼š<img src="../images/image-20241023153601642.png" alt="image-20241023153601642" style="zoom:50%;" /></p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1">//Multiple-Process Solutions</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="k">do</span><span class="p">{</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="n">choosing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="n">number</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">{</span><span class="n">number</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">number</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="err">â€¦</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">[</span><span class="n">n</span><span class="mi">-1</span><span class="p">]}</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// é€‰å·ç </span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">    </span><span class="n">choosing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="err">ï¼œ</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">choosing</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">number</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="err">ï¼œ</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">i</span><span class="p">));</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span><span class="n">CRITICAL</span><span class="w"> </span><span class="n">SECTION</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">        </span><span class="n">number</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span><span class="n">REMAINDER</span><span class="w"> </span><span class="n">SECTION</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>æ»¡è¶³ mutual exception å’Œ progressï¼Œ</li>
<li>æ»¡è¶³ bounded waitingï¼Œbound ä¸º n-1</li>
</ul>
<h4 id="_25">ç¡¬ä»¶æ–¹æ³•<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<p><strong>Synchronization Hardware</strong></p>
<p>Modern machines provide special atomic hardware <strong>instructions</strong></p>
<p>â€‹   -&gt; <mark>Atomic = non-interruptable</mark> (åŸå­æ“ä½œï¼Œä¸èƒ½ä¸­æ–­ï¼›åä¸‰ç§æ–¹æ³•éƒ½ç”¨äº†è¿™ä¸€æ€æƒ³)</p>
<p><strong>ä¼˜ç‚¹</strong>  </p>
<ul>
<li>
<p>é€‚ç”¨äºä»»æ„æ•°ç›®çš„è¿›ç¨‹ï¼Œåœ¨å•å¤„ç†å™¨æˆ–å¤šå¤„ç†å™¨ä¸Š</p>
</li>
<li>
<p>ç®€å•ï¼Œå®¹æ˜“éªŒè¯å…¶æ­£ç¡®æ€§</p>
</li>
<li>
<p>å¯ä»¥æ”¯æŒè¿›ç¨‹å†…å­˜åœ¨å¤šä¸ªä¸´ç•ŒåŒºï¼Œåªéœ€ä¸ºæ¯ä¸ªä¸´ç•ŒåŒºè®¾ç«‹ä¸€ä¸ªå¸ƒå°”å˜é‡</p>
</li>
</ul>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>
<p>è€—è´¹ CPU æ—¶é—´ï¼Œä¸èƒ½å®ç°â€œè®©æƒç­‰å¾…â€ </p>
</li>
<li>
<p>å¯èƒ½ä¸æ»¡è¶³æœ‰é™ç­‰å¾…ï¼šä»ç­‰å¾…è¿›ç¨‹ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªè¿›å…¥ä¸´ç•ŒåŒºï¼Œæœ‰çš„è¿›ç¨‹å¯èƒ½ä¸€ç›´é€‰ä¸ä¸Š </p>
</li>
<li>
<p>å¯èƒ½æ­»é”</p>
</li>
</ul>
<h5 id="disable-interrupts">å…³ä¸­æ–­æ³• Disable interrupts(ä¸­æ–­å±è”½æ³•)<a class="headerlink" href="#disable-interrupts" title="Permanent link">&para;</a></h5>
<p>æ€æƒ³ï¼šè¿›å…¥ä¸´ç•ŒåŒºå‰ç›´æ¥å±è”½ä¸­æ–­ï¼Œä¿è¯ä¸´ç•ŒåŒºèµ„æºé¡ºåˆ©ä½¿ç”¨ï¼›ä½¿ç”¨å®Œæ¯•ï¼Œæ‰“å¼€ä¸­æ–­</p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span>
<span class="normal"><a href="#__codelineno-3-7">7</a></span>
<span class="normal"><a href="#__codelineno-3-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">    </span><span class="n">Disable</span><span class="w"> </span><span class="n">Interrupts</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="n">Critical</span><span class="w"> </span><span class="n">section</span><span class="p">;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">    </span><span class="n">Enable</span><span class="w"> </span><span class="n">Interrupts</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="n">Remainder</span><span class="w"> </span><span class="n">section</span><span class="p">;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="p">}</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<h6 id="_26">ç¼ºç‚¹<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h6>
<ul>
<li>
<p><strong>å¯èƒ½å½±å“ç³»ç»Ÿæ•ˆç‡</strong>ï¼šæ»¥ç”¨å…³ä¸­æ–­ä¼šä¸¥é‡å½±å“ CPU æ‰§è¡Œæ•ˆç‡ï¼Œå…¶é”ä½ CPU å¯èƒ½å¯¼è‡´åŸæœ¬ä¸€äº›çŸ­æ—¶é—´å³å¯å®Œæˆçš„éœ€è¦ç­‰å¾…å¼€ä¸­æ–­ï¼Œå½±å“ cpu å¹¶å‘æ‰§è¡Œï¼Œcpu åˆ©ç”¨ç‡ä¸‹é™</p>
</li>
<li>
<p><strong>ä¸é€‚ç”¨äºå¤š CPU ç³»ç»Ÿ</strong>ï¼šä¸­æ–­å±è”½æ³•é€‚ç”¨äºå• CPU ç³»ç»Ÿï¼Œåœ¨å¤š CPU ç³»ç»Ÿä¸­ <strong>æ— æ³•æœ‰æ•ˆåŒæ­¥</strong> å„ä¸ª CPU çš„æ“ä½œã€‚ </p>
</li>
<li><strong>å®‰å…¨æ€§é—®é¢˜</strong>ï¼šæ»¥ç”¨å…³ä¸­æ–­æƒåŠ›å¯èƒ½å¯¼è‡´ä¸¥é‡åæœï¼Œä¾‹å¦‚åœ¨å…³é—­ä¸­æ–­æœŸé—´ï¼Œä¸€äº›é‡è¦çš„ä¸­æ–­è¯·æ±‚å¯èƒ½è¢«é”™è¿‡ï¼Œå½±å“ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</li>
</ul>
<h5 id="testandset-lock-instructiontsl">TestAndSet Lock Instructionï¼ˆTSLï¼‰<a class="headerlink" href="#testandset-lock-instructiontsl" title="Permanent link">&para;</a></h5>
<p>Test and modify the content of a word atomically.</p>
<p>Shared boolean variable lock, initialized to false.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">boolean</span><span class="w"> </span><span class="nf">TestAndSet</span><span class="w"> </span><span class="p">(</span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="p">{</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">    </span><span class="n">boolean</span><span class="w"> </span><span class="n">rv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="o">*</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">rv</span><span class="o">:</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="p">}</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">TestAndSet</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="w"> </span><span class="p">));</span><span class="cm">/* do nothing*/</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="c1">// critical section</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="c1">// remainder section </span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="p">};</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>æ»¡è¶³ mutual exclusion, progress</li>
<li>ä¸æ»¡è¶³ bounded waitingï¼ˆè¿›å…¥ä¸´ç•ŒåŒºé è¿æ°”ï¼‰ï¼Œä¸æ»¡è¶³è®©æƒç­‰å¾…</li>
<li>ç­‰å¾…è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ä¸ä¼šä¸»åŠ¨æ”¾å¼ƒ CPU</li>
</ul>
<h5 id="swap-instruction">Swap Instruction<a class="headerlink" href="#swap-instruction" title="Permanent link">&para;</a></h5>
<p>æ€æƒ³</p>
<ol>
<li>
<p>å¯¹æ¯ä¸ªä¸´ç•Œèµ„æºï¼Œswap è®¾ç½®ä¸€ä¸ªå…¨å±€ <code>bool</code> å˜é‡ <code>lock</code>(åˆå€¼ä¸º false) ï¼Œæ¯ä¸ªè¿›ç¨‹è®¾ç½®å±€éƒ¨å˜é‡ <code>key</code>(åˆå€¼ä¸º true)</p>
</li>
<li>
<p>è¿›ç¨‹è°ƒç”¨ <code>swap()</code> æŒ‡ä»¤è®¿é—®ä¸´ç•ŒåŒºï¼Œä¼šäº¤æ¢ key å’Œ lock çš„å€¼ï¼Œå®ç°ä¸Šé”ï¼Œè¿›å…¥è®¿é—®</p>
</li>
<li>
<p>é€€å‡ºæ—¶æŠŠ <code>lock</code> é‡ç½®ä¸º <code>false</code></p>
</li>
</ol>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="n">TRUE</span><span class="p">)</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">        </span><span class="n">Swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="c1">// critical section</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="c1">// remainder section </span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="p">}</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10"></a>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="kt">void</span><span class="w"> </span><span class="n">Swap</span><span class="p">(</span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">)</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="p">{</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">    </span><span class="n">boolean</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span><span class="o">*</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">    </span><span class="o">*</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>æ»¡è¶³ mutual exclusion, progress</li>
<li>ä¸æ»¡è¶³ bounded waitingï¼ˆ</li>
</ul>
<h5 id="the-compare_and_swap-cas-instruction">The compare_and_swap (CAS) Instruction<a class="headerlink" href="#the-compare_and_swap-cas-instruction" title="Permanent link">&para;</a></h5>
<p>æ€æƒ³</p>
<ol>
<li>Executed atomically</li>
<li>Returns the original value of passed parameter <strong>value</strong></li>
<li>Set the variable <strong>value</strong> the value of the passed parameter <strong>new_value</strong> but only if <code>*value == expected</code> is true. That is, the swap takes place only under this condition.</li>
</ol>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1">//Shared integer lock initialized to 0;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">){</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">compare_and_swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="cm">/* do nothing */</span><span class="w"> </span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="cm">/* critical section */</span><span class="w"> </span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">    </span><span class="cm">/* remainder section */</span><span class="w"> </span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="p">}</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">compare_and_swap</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">new_value</span><span class="p">)</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="p">{</span><span class="w"> </span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span><span class="w"> </span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">        </span><span class="o">*</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_value</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>æ»¡è¶³ mutual exclusion, progress</li>
<li>ä¸æ»¡è¶³ bounded waitingï¼ˆ</li>
</ul>
<p>è§£å†³åŠæ³•ï¼šæ’é˜Ÿ</p>
<h5 id="bounded-waiting-with-compare-and-swap">Bounded-waiting with compare-and-swap<a class="headerlink" href="#bounded-waiting-with-compare-and-swap" title="Permanent link">&para;</a></h5>
<p><img src="./assets/image-20241028105047216.png" alt="image-20241028105047216" style="zoom:33%;" /></p>
<ul>
<li>æ»¡è¶³ mutual exclusion, progress å’Œ bounded waiting</li>
</ul>
<blockquote>
<p>[!CAUTION]</p>
<p>ä»¥ä¸Šå¯¹ TS å’Œ Swap æŒ‡ä»¤çš„æè¿°ä»…ä¸ºåŠŸèƒ½æè¿°ï¼Œå®ƒä»¬ç”±ç¡¬ä»¶é€»è¾‘å®ç°ï¼Œä¸ä¼šè¢«ä¸­æ–­</p>
</blockquote>
<h4 id="mutex-locks">äº’æ–¥é” Mutex locks<a class="headerlink" href="#mutex-locks" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241028112035245.png" alt="image-20241028112035245" style="zoom:33%;" /></p>
<p>But this solution requires <strong>busy waiting</strong> <strong>ï¼ˆä¸åœç©ºå¾ªç¯ï¼‰</strong></p>
<p>This lock therefore called a <strong>spinlock</strong> <strong>ï¼ˆä¹Ÿå« è‡ªæ—‹é”ï¼‰</strong></p>
<ul>
<li>ä¸»è¦é‡‡ç”¨ç¡¬ä»¶æœºåˆ¶æ¥å®ç°</li>
<li>ç¼ºç‚¹ï¼šå¿™ç­‰å¾…</li>
</ul>
<h4 id="semaphores">ä¿¡å·é‡æ–¹æ³• Semaphores<a class="headerlink" href="#semaphores" title="Permanent link">&para;</a></h4>
<p>ç”¨æ¥è§£å†³åŒæ­¥å’Œäº’æ–¥é—®é¢˜</p>
<p>Two indivisible operations modify S: </p>
<ul>
<li>
<p><code>wait()</code> and <code>signal()</code>, originally called <code>P()</code> and <code>V()</code> </p>
</li>
<li>
<p>Proberen(æµ‹è¯•)ï¼ŒVerhogen(å¢åŠ ) </p>
</li>
<li>
<p>åªèƒ½åœ¨ wait å’Œ signal ä¸­å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œ</p>
</li>
<li>
<p>ä½çº§çš„è¿›ç¨‹é€šä¿¡åŸè¯­</p>
</li>
</ul>
<p>Can only be accessed via two indivisible (atomic) operations:</p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span>
<span class="normal"><a href="#__codelineno-7-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">wait</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//èµ„æºè¿›å…¥ä¸´ç•ŒåŒº</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// no-opï¼ŒS &lt;= 0ï¼šæœ‰è¿›ç¨‹åœ¨ä¸´ç•ŒåŒº</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="n">S</span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="p">}</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="n">signal</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//èµ„æºé€€å‡ºä¸´ç•ŒåŒºï¼Œç©ºå‡ºèµ„æºç»™å…¶ä»–è¿›ç¨‹</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="n">S</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Can be implemented without busy waiting &rarr; å®ç°è®©æƒç­‰å¾…</p>
<blockquote>
<p>[!IMPORTANT]</p>
<p><img src="./assets/image-20241030152700179.png" alt="image-20241030152700179" style="zoom: 33%;" /></p>
<p>S.value = 0 å·²ç»æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ä¸´ç•ŒåŒº</p>
</blockquote>
<p>ä¿¡å·é‡ç§ç±»ï¼š</p>
<p><img src="./assets/image-20241028113509355.png" alt="image-20241028113509355" style="zoom:33%;" /></p>
<p>ğŸ‘† äº’æ–¥è®¿é—®</p>
<p>åŒæ­¥æ“ä½œï¼š</p>
<p><img src="./assets/image-20241030143820461.png" alt="image-20241030143820461" style="zoom:33%;" /></p>
<p>Questionï¼šæœ‰å››ä¸ªæˆ¿é—´ï¼Œå››ä¸ªè¿›ç¨‹è®¿é—®</p>
<p><img src="./assets/image-20241030144512191.png" alt="image-20241030144512191" style="zoom: 33%;" /></p>
<h5 id="semaphore-implementation">å®ç° Semaphore Implementation<a class="headerlink" href="#semaphore-implementation" title="Permanent link">&para;</a></h5>
<h6 id="busy-waiting">Busy waiting<a class="headerlink" href="#busy-waiting" title="Permanent link">&para;</a></h6>
<p><img src="./assets/image-20241030144747181.png" alt="image-20241030144747181" style="zoom:33%;" /></p>
<p><img src="./assets/image-20241030145309092.png" alt="image-20241030145309092" style="zoom:33%;" /></p>
<p>å¯¹ P ä¸å¤ªå‹å¥½</p>
<h6 id="no-busy-waiting">no Busy waiting éå¿™ç­‰<a class="headerlink" href="#no-busy-waiting" title="Permanent link">&para;</a></h6>
<p><img src="./assets/image-20241030145617397.png" alt="image-20241030145617397" style="zoom:33%;" /></p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="cm">/*Implementation of wait*/</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="n">wait</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">){</span><span class="w"> </span><span class="c1">//å–ä¿¡å·é‡æ“ä½œ</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="n">value</span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">        </span><span class="c1">// add this process to waiting queue</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">        </span><span class="n">block</span><span class="p">();</span><span class="w"> </span><span class="c1">// æ’åˆ°Sçš„waiting queueä¸­</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="p">}</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9"></a>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="cm">/*Implementation of signal*/</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="n">Signal</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">){</span><span class="w"> </span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">    </span><span class="n">value</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">        </span><span class="c1">// remove a process P from the waiting queue</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">        </span><span class="n">wakeup</span><span class="p">(</span><span class="n">P</span><span class="p">);</span><span class="w"> </span><span class="c1">// æŠŠä¸€ä¸ªè¿›ç¨‹å”¤é†’ï¼Œç§»å‡ºwaiting queueï¼Œåˆ°ä¸´ç•ŒåŒºæ‰§è¡Œ</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>S çš„å–å€¼å¯ä»¥æ˜¯è´Ÿçš„äº†ï¼ˆç›¸æ¯”åŸå…ˆçš„ wait å’Œ signalï¼‰ï¼ŒS å–è´Ÿè¡¨ç¤ºå½“å‰é˜Ÿåˆ—æ’é˜Ÿè¿›ç¨‹çš„ä¸ªæ•°</li>
</ul>
<p><img src="./assets/image-20241030151249807.png" alt="image-20241030151249807" style="zoom: 33%;" /></p>
<p><img src="./assets/image-20241030151458384.png" alt="image-20241030151458384" style="zoom: 33%;" /></p>
<p><img src="./assets/image-20241030151550913.png" alt="image-20241030151550913" style="zoom: 33%;" /></p>
<blockquote>
<p>[!WARNING]</p>
<p>è¿›ç¨‹åœ¨æ ‡é»„å¤„ sleep åï¼Œå†æ¬¡è¢«å”¤é†’æ—¶ä¼šä»å¤´å¼€å§‹æ‰§è¡Œï¼</p>
</blockquote>
<p>Busy waiting? No busy waiting?</p>
<ul>
<li>No busy waiting</li>
</ul>
<p>What if one must choose busy waiting?</p>
<ul>
<li>ç”µè„‘è¦å¤š CPU</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶é—´ &gt; busy waitingï¼Œé€‰æ‹© no busy waitingï¼›&lt; çš„è¯ä¸¤è€…éƒ½è¡Œ</li>
</ul>
<h5 id="deadlock-and-starvation">Deadlock and Starvation<a class="headerlink" href="#deadlock-and-starvation" title="Permanent link">&para;</a></h5>
<p><strong>Deadlock æ­»é”</strong> â€“ two or more processes are waiting indefinitely for an event that can be caused by only one of the waiting processes</p>
<p><strong>Starvation é¥¥é¥¿</strong> â€“ indefinite blocking. A process may never be removed from the semaphore queue in which it is suspended</p>
<h5 id="classical-problems-of-synchronization">Classical Problems of Synchronization<a class="headerlink" href="#classical-problems-of-synchronization" title="Permanent link">&para;</a></h5>
<h6 id="bounded-buffer-problem">Bounded-Buffer Problem<a class="headerlink" href="#bounded-buffer-problem" title="Permanent link">&para;</a></h6>
<p><em>N</em> buffers, each can hold one item</p>
<ul>
<li>Semaphore <strong>mutex</strong> initialized to the value <strong>1</strong> äº’æ–¥ä¿¡å·é‡ 1 ä¸ª</li>
<li>Semaphore <strong>full</strong> initialized to the value 0, counting full items</li>
<li>Semaphore <strong>empty</strong> initialized to the value <strong>N</strong>, counting empty items</li>
</ul>
<p><img src="./assets/image-20241030153449418.png" alt="image-20241030153449418" style="zoom:33%;" /></p>
<h6 id="readers-and-writers-problem">Readers and Writers Problem<a class="headerlink" href="#readers-and-writers-problem" title="Permanent link">&para;</a></h6>
<p><strong>è¯»è€…å†™è€…é—®é¢˜</strong></p>
<p>A data set is shared among a number of concurrent processes</p>
<ul>
<li>Readers â€“ only read the data set; they do not perform any updates</li>
<li>Writers â€“ can both read and write.</li>
</ul>
<p><strong>Problem</strong> â€“ allow multiple readers to read at the same time. Only one single writer can access the shared data at the same time.  ( è¯»è€…ä¼˜å…ˆ ) </p>
<p>Shared Data</p>
<ul>
<li>
<p>Data set</p>
</li>
<li>
<p>Semaphore <strong>mutex</strong> initialized to 1, to ensure mutual exclusion when readcount is updated.</p>
</li>
<li>
<p>Semaphore <strong>wrt</strong> initialized to 1.</p>
</li>
<li>
<p>Integer <strong>readcount</strong> initialized to 0 è¯»è€…çš„æ•°é‡</p>
</li>
</ul>
<p><img src="./assets/image-20241030154705621.png" alt="image-20241030154705621" style="zoom:33%;" /></p>
<h6 id="dining-philosophers-problem">Dining-Philosophers Problem<a class="headerlink" href="#dining-philosophers-problem" title="Permanent link">&para;</a></h6>
<p><strong>å“²å­¦å®¶å°±é¤é—®é¢˜</strong></p>
<p>Shared data </p>
<ul>
<li>
<p>Bowl of rice (data set)</p>
</li>
<li>
<p>Semaphore <code>chopstick [5]</code> initialized to 1</p>
</li>
</ul>
<p><img src="./assets/image-20241030155058113.png" alt="image-20241030155058113" style="zoom:33%;" /></p>
<p>å¦‚æœåªè®¾ç½®ä¸€ä¸ªç­·å­çš„ä¿¡å·é‡ï¼Œè®¾ç½®ä¸º 5ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿä¸€ä¸ªç­·å­å¯èƒ½è¢«æ‹¿ä¸¤æ¬¡ï¼Œè¿åäº’æ–¥æ€§</p>
<h4 id="monitor">ç®¡ç¨‹æ–¹æ³• monitor<a class="headerlink" href="#monitor" title="Permanent link">&para;</a></h4>
<p>å®ç°äº’æ–¥å’ŒåŒæ­¥</p>
<h5 id="monitor_1">Monitor<a class="headerlink" href="#monitor_1" title="Permanent link">&para;</a></h5>
<p>A high-level abstraction that provides a convenient and effective mechanism for process synchronization. </p>
<p>Only <strong>one</strong> process may be active within the monitor at a time. (hint: the other processes may be sleeping within the monitor)</p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="c1">//ç®¡ç¨‹å˜é‡åªæœ‰å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="n">monitor</span><span class="w"> </span><span class="n">monitor</span><span class="o">-</span><span class="n">name</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="p">{</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="c1">// shared variable declarations</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="n">procedure</span><span class="w"> </span><span class="nf">P1</span><span class="w"> </span><span class="p">(</span><span class="err">â€¦</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">â€¦</span><span class="p">.</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="err">â€¦</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">        </span><span class="n">procedure</span><span class="w"> </span><span class="n">Pn</span><span class="w"> </span><span class="p">(</span><span class="err">â€¦</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="err">â€¦â€¦</span><span class="p">}</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">    </span><span class="n">Initialization</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="err">â€¦</span><span class="p">.)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">â€¦</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="err">â€¦</span><span class="w"> </span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><img src="./assets/image-20241104104332459.png" alt="image-20241104104332459" style="zoom:33%;" /> å‡½æ•°æŒ‚èµ·</p>
<p><code>x.wait()</code> ä½œç”¨ï¼šé˜»å¡è¯¥è¿›ç¨‹å¹¶å°†ä»–æ’å…¥åˆ° x åºåˆ—</p>
<p>ç®¡ç¨‹ä¸­çš„ signal æ“ä½œå’Œä¿¡å·é‡çš„ V æ“ä½œä¸åŒï¼šV ä¸€å®šä¼šæ”¹å˜ä¿¡å·é‡çš„å€¼ S = S+1ï¼Œä½†æ˜¯ signal æ˜¯é’ˆå¯¹æŸä¸ªæ¡ä»¶å˜é‡çš„ï¼Œè‹¥ä¸å­˜åœ¨å› è¯¥æ¡ä»¶è€Œé˜»å¡çš„è¿›ç¨‹ï¼Œåˆ™ signal ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“</p>
<h5 id="_27">ç®¡ç¨‹æ–¹æ³•è§£å†³å“²å­¦å®¶å°±é¤é—®é¢˜<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h5>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span>
<span class="normal"><a href="#__codelineno-10-24">24</a></span>
<span class="normal"><a href="#__codelineno-10-25">25</a></span>
<span class="normal"><a href="#__codelineno-10-26">26</a></span>
<span class="normal"><a href="#__codelineno-10-27">27</a></span>
<span class="normal"><a href="#__codelineno-10-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">monitor</span><span class="w"> </span><span class="n">DP</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="p">{</span><span class="w"> </span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">    </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">THINKING</span><span class="p">;</span><span class="w"> </span><span class="n">HUNGRY</span><span class="p">,</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="p">;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">          </span><span class="n">condition</span><span class="w"> </span><span class="n">self</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">];</span><span class="w"> </span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">          </span><span class="c1">//philosopher i can delay herself when unable to get chopsticks</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">          </span><span class="kt">void</span><span class="w"> </span><span class="nf">pickup</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// æ‹¿ç­·å­</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">              </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HUNGRY</span><span class="p">;</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">              </span><span class="n">test</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"> </span><span class="c1">// çœ‹çœ‹å·¦è¾¹å³è¾¹æœ‰æ²¡æœ‰äººåœ¨eating</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">              </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="c1">// è‡ªå·±hungry</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">                  </span><span class="n">self</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">wait</span><span class="p">;</span><span class="w"> </span><span class="c1">// ç­·å­è¿˜ä¸å¯ç”¨ï¼Œç­‰å¾…</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">          </span><span class="p">}</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="w">          </span><span class="kt">void</span><span class="w"> </span><span class="nf">putdown</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="w">              </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">THINKING</span><span class="p">;</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">              </span><span class="c1">// test left and right neighbors</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="w">              </span><span class="n">test</span><span class="p">((</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"> </span><span class="c1">// å¦‚è‹¥æ»¡è¶³åˆ™å”¤é†’è¿›è¡Œåƒé¥­</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="w">              </span><span class="n">test</span><span class="p">((</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="w">          </span><span class="p">}</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="w">          </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="w">              </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="w">                  </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">HUNGRY</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="w">                  </span><span class="p">(</span><span class="n">state</span><span class="p">[(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22"></a><span class="w">                  </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EATING</span><span class="w"> </span><span class="p">;</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23"></a><span class="w">                  </span><span class="n">self</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">signal</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="c1">//æ‰§è¡Œæ—¶ä¸åœ¨signalä¸­ç­‰å¾…ï¼Œè¿™å¥signalæ²¡æœ‰ç”¨</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24"></a><span class="w">              </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25"></a><span class="w">          </span><span class="n">initialization_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26"></a><span class="w">              </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27"></a><span class="w">                  </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">THINKING</span><span class="p">;</span>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28"></a><span class="w">          </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>When the left and right philosophers, <strong>self [(i+4)%5]</strong> and <strong>self [(i+1)%5]</strong></li>
</ul>
<p>continue to eat, <strong>self [i]</strong> may <em>starve</em></p>
<h4 id="_28">ä¾‹å­<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<h5 id="pthreads">Pthreads<a class="headerlink" href="#pthreads" title="Permanent link">&para;</a></h5>
<p>It provides:</p>
<ul>
<li>
<p>mutex locks</p>
</li>
<li>
<p>condition variables</p>
</li>
</ul>
<p>Non-portable extensions include:</p>
<ul>
<li>
<p>read-write locks</p>
</li>
<li>
<p>spin locks</p>
</li>
</ul>
<p>Using <code>pthread_cond_wait()</code> &amp; <code>pthread_cond_signal()</code></p>
<h2 id="deadlock">æ­»é” Deadlock<a class="headerlink" href="#deadlock" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>åŸºæœ¬æ¦‚å¿µï¼šæ­»é”æ¦‚å¿µï¼Œ4 ä¸ªå¿…è¦æ¡ä»¶ï¼Œèµ„æºåˆ†é…å›¾ï¼Œcycle &amp;deadlock
solutionsï¼š3 ç§ç­–ç•¥
æ­»é”é¢„é˜²ï¼ˆå¦‚ä½•ç ´åå››ä¸ªå¿…è¦æ¡ä»¶)
æ­»é”é¿å…ï¼ˆå®‰å…¨çŠ¶æ€ï¼Œå®‰å…¨çŠ¶æ€ä¸æ­»é”ï¼Œå•å®ä¾‹ç®—æ³•ï¼Œå¤šå®ä¾‹ç®—æ³•â€”â€”<strong>é“¶è¡Œå®¶ç®—æ³•</strong>ï¼‰
æ£€æµ‹ï¼ˆå•å®ä¾‹ç®—æ³•â€”â€”wait for graphï¼Œå¤šå®ä¾‹ç®—æ³•)
æ¢å¤</p>
</blockquote>
<h3 id="the-deadlock-problem">The Deadlock Problem<a class="headerlink" href="#the-deadlock-problem" title="Permanent link">&para;</a></h3>
<p><strong>æ­»é”</strong>ï¼šå¤šä¸ªè¿›ç¨‹å› ç«äº‰å…±äº«èµ„æºè€Œé€ æˆç›¸äº’ç­‰å¾…çš„ä¸€ç§åƒµå±€ï¼Œä½¿å¾—å„ä¸ªè¿›ç¨‹éƒ½è¢«é˜»å¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œè¿™äº›è¿›ç¨‹éƒ½å°†æ°¸è¿œä¸èƒ½å†å‘å‰æ¨è¿›</p>
<p>å‘ç”Ÿæ­»é”çš„è¿›ç¨‹å¿…å®šå¤„äºé˜»å¡æ€</p>
<h4 id="_29">äº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241106152044852.png" alt="image-20241106152044852" style="zoom:33%;" /></p>
<blockquote></blockquote>
<p><strong>æ­»é”å…¬å¼</strong>ï¼š</p>
<p>å‡è®¾ç³»ç»Ÿå…±æœ‰ m ä¸ªèµ„æºï¼Œn ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹éœ€è¦ k ä¸ªèµ„æºï¼Œè‹¥æ»¡è¶³ <span class="arithmatex">\(m&gt;nÃ—(k- 1)\)</span>ï¼Œåˆ™ç³»ç»Ÿä¸€å®šä¸ä¼šå‘ç”Ÿæ­»é”</p>
<h3 id="system-model">ç³»ç»Ÿæ¨¡å‹ System Model<a class="headerlink" href="#system-model" title="Permanent link">&para;</a></h3>
<p>resource type &amp; resource instances</p>
<h4 id="resource-allocation-graph">èµ„æºåˆ†é…å›¾ Resource-Allocation Graph<a class="headerlink" href="#resource-allocation-graph" title="Permanent link">&para;</a></h4>
<p>A set of vertices <strong>é¡¶ç‚¹ V</strong> and a set of edges <strong>è¾¹ E</strong></p>
<p><img src="./assets/image-20241106153033476.png" alt="image-20241106153033476" style="zoom:33%;" /></p>
<p>é¡¶ç‚¹è¡¨ç¤ºèµ„æº R æˆ–è¿›ç¨‹ P</p>
<p>è¾¹ï¼š</p>
<ul>
<li><strong>P-&gt; R</strong>ï¼Œè¿›ç¨‹æŒ‡å‘èµ„æºï¼Œè¿›ç¨‹ç”³è¯·èµ„æº ==&gt; ç”³è¯·è¾¹</li>
<li><strong>R-&gt; P </strong>ï¼Œèµ„æºæŒ‡å‘è¿›ç¨‹ï¼Œè¿›ç¨‹å¯ä»¥ä½¿ç”¨èµ„æºï¼Œèµ„æºå·²ç»è¢«åˆ†é…ç»™è¿›ç¨‹ ==&gt; åˆ†é…è¾¹</li>
</ul>
<p>æ­»é”ä¸€å®šæœ‰ç¯ï¼Œæœ‰ç¯ä¸ä¸€å®šæ­»é”</p>
<p>If graph contains no cycles =&gt; no deadlock. æ— ç¯ä¸€å®šæ²¡æœ‰æ­»é”</p>
<p>If graph contains a cycle =&gt;</p>
<ul>
<li>
<p>if only one instance per resource type, then deadlock.</p>
</li>
<li>
<p>if several instances per resource type, possibility of deadlock.</p>
</li>
</ul>
<h3 id="methods-for-handling-deadlocks">æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks<a class="headerlink" href="#methods-for-handling-deadlocks" title="Permanent link">&para;</a></h3>
<p>Ensure that the system will never enter a deadlock state. è®©ç³»ç»Ÿæ°¸è¿œä¸è¿›å…¥æ­»é”çŠ¶æ€ ---- <strong>Prevention æ­»é”é¢„é˜²</strong>ã€ <strong>Avoidance æ­»é”é¿å…</strong></p>
<p>Allow the system to enter a deadlock state and then recover. å…è®¸ç³»ç»Ÿè¿›å…¥æ­»é”çŠ¶æ€ï¼Œä½†å¯ä»¥æ¢å¤ ----<strong>Detection æ­»é”æ£€æµ‹</strong>ã€ <strong>Recovery æ­»é”è§£é™¤</strong></p>
<p>Ignore the problem and pretend that deadlocks never occur in the system. å¿½ç•¥ï¼Œå‡è£…ä¸å‡ºç°æ­»é” ---- <strong>é¸µé¸Ÿç®—æ³•</strong>ï¼ˆOstrich Algorithmï¼‰</p>
<ul>
<li>å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä½¿ç”¨é¸µé¸Ÿç®—æ³• used by most operating systems, including UNIXã€Linuxã€Windows.</li>
<li>ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªï¼Ÿç”¨æˆ·è¿è¡Œå¤šï¼Œè§£å†³ä»£ä»·å°‘</li>
</ul>
<h4 id="deadlock-prevention">Deadlock Prevention (é¢„é˜²)<a class="headerlink" href="#deadlock-prevention" title="Permanent link">&para;</a></h4>
<p>ç ´åæ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ä¹‹ä¸€ Restrain the ways request can be made.</p>
<ul>
<li>é™åˆ¶ç”¨æˆ·ç”³è¯·èµ„æºçš„é¡ºåº -- ç ´åå¾ªç¯ç­‰å¾…ï¼ˆæ¡ä»¶ 4ï¼‰</li>
</ul>
<ol>
<li><strong>Prevent Mutual Exclusion ä¸äº’æ–¥</strong>ï¼š not required for sharable resources; must hold for nonsharable resources ä¸å…±äº«èµ„æºï¼Œå³äº’æ–¥ä½¿ç”¨èµ„æºï¼Œå®é™…ä¸­ä¸å¤ªå¯è¡Œï¼ˆè¿™ä¸ªæ¡ä»¶æ— æ³•è¢«ç ´åï¼‰</li>
<li><strong>Prevent Hold and Wait ä¸è¯·æ±‚ç­‰å¾…</strong> ï¼šä¸€æ¬¡åˆ†é…å¥½æ‰€æœ‰èµ„æº must guarantee that whenever a process requests a resource, it does not hold any other resources.</li>
<li>Require process to request and be allocated all its resources before it begins execution, or allow process to request resources only when the process has none (<strong>release all current resources before requesting any additional ones</strong>).
      è¦æ±‚è¿›ç¨‹åœ¨å¼€å§‹æ‰§è¡Œä¹‹å‰è¯·æ±‚å¹¶åˆ†é…æ‰€æœ‰èµ„æºï¼Œæˆ–è€…ä»…åœ¨è¿›ç¨‹æ²¡æœ‰èµ„æºæ—¶æ‰å…è®¸è¿›ç¨‹è¯·æ±‚èµ„æºï¼ˆåœ¨è¯·æ±‚ä»»ä½•å…¶ä»–èµ„æºä¹‹å‰é‡Šæ”¾æ‰€æœ‰å½“å‰èµ„æºï¼‰ã€‚</li>
<li><strong>Low resource utilization</strong>; <strong>starvation possible</strong>. (example: copy data from DVD drive to a disk file, sorts the file, then prints the results to a printer.)
      <strong>èµ„æºåˆ©ç”¨ç‡ä½</strong>ï¼›<strong>å¯èƒ½å‡ºç°é¥¥é¥¿</strong>ã€‚ï¼ˆä¾‹å¦‚ï¼šå°†æ•°æ®ä» DVD é©±åŠ¨å™¨å¤åˆ¶åˆ°ç£ç›˜æ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œæ’åºï¼Œç„¶åå°†ç»“æœæ‰“å°åˆ°æ‰“å°æœºã€‚ï¼‰</li>
<li><strong>Prevent No Preemption å¯å‰¥å¤º</strong>ï¼šå˜æˆéæŠ¢å å¼ï¼Œå®é™…ä¸­ä¸å¤ªå¯è¡Œ</li>
<li><strong>Prevent Circular Wait ä¸å¾ªç¯ç­‰å¾…</strong>ï¼šimpose a total <strong>ordering</strong> of all resource types, and require that each process requests resources in an increasing order of enumeration. 
   å¯¹æ‰€æœ‰èµ„æºç±»å‹å®è¡Œæ€»ä½“ <strong>æ’åº</strong>ï¼Œå¹¶è¦æ±‚æ¯ä¸ªè¿›ç¨‹æŒ‰ç…§æšä¸¾çš„é€’å¢é¡ºåºè¯·æ±‚èµ„æºã€‚</li>
</ol>
<p>ä»¥ä¸Šæ–¹æ³•åœ¨å®é™…ä¸­éƒ½ä¸å¤ªå¯è¡Œ</p>
<h4 id="deadlock-avoidance">Deadlock Avoidance (é¿å…)<a class="headerlink" href="#deadlock-avoidance" title="Permanent link">&para;</a></h4>
<p>é€šè¿‡åŠ¨æ€æ£€æµ‹èµ„æºåˆ†é…çš„å®‰å…¨æ€§ï¼Œç¡®ä¿ç³»ç»Ÿ <strong>ä¸ä¼šè¿›å…¥ä¸å®‰å…¨çŠ¶æ€</strong></p>
<ul>
<li>ä¸ºå®ç°å®‰å…¨æ€§ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“</li>
<li>æ¯ä¸ªè¿›ç¨‹æ‰€éœ€èµ„æº max æ•°é‡ each process declares the maximum number of resources of each type that it may need</li>
<li>The deadlock-avoidance algorithm dynamically examines the resource-allocation state to ensure that there can never be a circular-wait condition.</li>
<li>Resource-allocation state is defined by the number of available and allocated resources, and the maximum demands of the processes.</li>
</ul>
<h5 id="safe-state">safe state å®‰å…¨çŠ¶æ€<a class="headerlink" href="#safe-state" title="Permanent link">&para;</a></h5>
<p><P1 , P2 , â€¦, Pn> ç§°ä¸ºå®‰å…¨åºåˆ—ã€‚å¦‚æœç³»ç»Ÿä¸å­˜åœ¨å®‰å…¨åºåˆ—ï¼Œåˆ™ç§°ç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€</p>
<p>å¯¹äºè¿›ç¨‹åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹ Piï¼Œå½“å‰ç³»ç»Ÿå·²ç»åˆ†é…äº†ä¸€äº›èµ„æºï¼Œè¿˜å‰©ä¸‹ä¸€äº›èµ„æºã€‚å¦‚æœ <strong>Pi å‰é¢çš„èµ„æºä¹‹å’Œ+ç³»ç»Ÿå‰©ä¸‹çš„èµ„æº èƒ½å¤Ÿæ»¡è¶³ Pi æ‰§è¡Œå®Œæ¯•</strong>ï¼Œåˆ™è¿™ä¸ªåºåˆ—æ˜¯ä¸ªå®‰å…¨çŠ¶æ€ã€‚</p>
<p><img src="./assets/image-20241111103432235.png" alt="image-20241111103432235" style="zoom:33%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>If a system is in safe state =&gt; no deadlocks. å®‰å…¨çŠ¶æ€ä¸€å®šæ— æ­»é”</p>
<p>If a system is in unsafe state =&gt; possibility of deadlock. ä¸å®‰å…¨å¯èƒ½æœ‰æ­»é”</p>
<p>Avoidance =&gt; ensure that a system will never enter an unsafe state.</p>
</blockquote>
<p><img src="./assets/image-20241111104223355.png" alt="image-20241111104223355" style="zoom:33%;" /></p>
<h5 id="avoidance-algorithms">Avoidance algorithms<a class="headerlink" href="#avoidance-algorithms" title="Permanent link">&para;</a></h5>
<p><strong>Single</strong> instance of a resource type. Use a resourceallocation graph</p>
<p><strong>Multiple</strong> instances of a resource type. Use the bankerâ€™s algorithm</p>
<h5 id="resource-allocation-graph-algorithm">Resource-Allocation Graph Algorithm èµ„æºåˆ†é…å›¾ç®—æ³•<a class="headerlink" href="#resource-allocation-graph-algorithm" title="Permanent link">&para;</a></h5>
<p>Claim edge Pi -&gt; Rj indicated that process Pi may request resource Rj</p>
<p>æœ‰ä¸‰ç§è¾¹ï¼šclaim edgeã€request edge å’Œ assignment edge</p>
<p>ï¼Ÿ</p>
<h5 id="bankers-algorithm">Bankerâ€™s Algorithm é“¶è¡Œå®¶ç®—æ³•<img alt="ğŸ”¥" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f525.svg" title=":fire:" /><a class="headerlink" href="#bankers-algorithm" title="Permanent link">&para;</a></h5>
<p><img src="./assets/image-20241111110516636.png" alt="image-20241111110516636" style="zoom:33%;" /></p>
<p>æ•°æ®ç»“æ„</p>
<p><img src="./assets/image-20241111110607001.png" alt="image-20241111110607001" style="zoom:33%;" /></p>
<p>Example</p>
<p><img src="./assets/image-20241111111754885.png" alt="image-20241111111754885" style="zoom:33%;" /></p>
<p><img src="./assets/image-20241111112228808.png" alt="image-20241111112228808" style="zoom:33%;" /></p>
<ul>
<li>å®é™…ä¸Šå¾ˆå¤šæ“ä½œç³»ç»Ÿéƒ½ä¸æ˜¯ä½¿ç”¨é“¶è¡Œå®¶ç®—æ³•è¿›è¡Œæ­»é”é¿å…</li>
</ul>
<h5 id="safety-algorithm">Safety Algorithm<a class="headerlink" href="#safety-algorithm" title="Permanent link">&para;</a></h5>
<p><img src="./assets/image-20241111111035473.png" alt="image-20241111111035473" style="zoom:33%;" /></p>
<h4 id="deadlock-detection">Deadlock Detection ( æ£€æµ‹ )<a class="headerlink" href="#deadlock-detection" title="Permanent link">&para;</a></h4>
<p>æœ¬è´¨ï¼šsafety ç®—æ³•ï¼Œå…¨éƒ¨æ»¡è¶³å°±æ²¡æœ‰æ­»é”</p>
<h5 id="single-instance-of-each-resource-type">å•å®ä¾‹ Single Instance of Each Resource Type<a class="headerlink" href="#single-instance-of-each-resource-type" title="Permanent link">&para;</a></h5>
<p>æ£€æŸ¥ wait-for graph æœ‰æ²¡æœ‰ç¯</p>
<p><img src="./assets/image-20241111112900123.png" alt="image-20241111112900123" style="zoom:33%;" /></p>
<h5 id="several-instances-of-a-resource-type">å¤šå®ä¾‹ Several Instances of a Resource Type<a class="headerlink" href="#several-instances-of-a-resource-type" title="Permanent link">&para;</a></h5>
<p>å¤šå®ä¾‹ï¼Œè°ƒç”¨ safety ç®—æ³•</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(m Ã— n^2^)</p>
<h5 id="completely-reducible-graph">Completely Reducible Graph å¯å®Œå…¨åŒ–ç®€å›¾<a class="headerlink" href="#completely-reducible-graph" title="Permanent link">&para;</a></h5>
<p>èƒ½æ¶ˆå»å›¾ä¸­æ‰€æœ‰è¾¹ï¼Œèƒ½åˆ™ç§°ä¸ºå¯å®Œå…¨åŒ–ç®€å›¾</p>
<p>æ‰¾å‡ºä¸€ä¸ªæ—¢ä¸é˜»å¡åˆéç‹¬ç«‹çš„è¿›ç¨‹ç»“ç‚¹ Pi</p>
<p>åœ¨é¡ºåˆ©çš„æƒ…å†µä¸‹ï¼Œåˆ†é…ç»™å…¶èµ„æºè®©å…¶å®Œæˆï¼Œæ¶ˆå»æ‰€æœ‰è¾¹å˜æˆå­¤ç«‹ç‚¹</p>
<p>å¾ªç¯ä¸Šè¿°ä¸¤æ­¥æ“ä½œï¼Œç›´è‡³æ¶ˆå»æ‰€æœ‰è¾¹ï¼Œä»£è¡¨æ— æ­»é”ã€‚</p>
<h3 id="recovery-from-deadlock">Recovery from Deadlock<a class="headerlink" href="#recovery-from-deadlock" title="Permanent link">&para;</a></h3>
<p>è§£é™¤æ­»é”çš„æ–¹æ³•ï¼š</p>
<ol>
<li>
<p>èµ„æºå‰¥å¤ºæ³•ï¼šæŠŠéƒ¨åˆ†è¿›ç¨‹æŒ‚èµ·ï¼Œå‰¥å¤ºå…¶èµ„æº</p>
</li>
<li>
<p>æ’¤é”€è¿›ç¨‹æ³•ï¼šæ’¤é”€éƒ¨åˆ†è¿›ç¨‹ï¼Œé‡Šæ”¾èµ„æº</p>
</li>
<li>
<p>è¿›ç¨‹å›é€€æ³•ï¼šè®©ä¸€ä¸ªè¿›ç¨‹æˆ–å¤šä¸ªè¿›ç¨‹å›é€€åˆ°é¿å…æ­»é”çš„åœ°æ­¥ï¼Œé‡Šæ”¾ä¸­é—´èµ„æº</p>
</li>
</ol>
<p>ä¾æ®ï¼šè¿›ç¨‹çš„ä¼˜å…ˆçº§ã€å·²æ‰§è¡Œæ—¶é—´ã€å‰©ä½™æ—¶é—´ã€å·²ç”¨èµ„æºã€äº¤äº’è¿˜æ˜¯æ‰¹å¤„ç†ç­‰</p>
<h4 id="resource-preemption">Resource Preemption<a class="headerlink" href="#resource-preemption" title="Permanent link">&para;</a></h4>
<p>Selecting a victim â€“ minimize cost.
Rollback â€“ return to some safe state, restart process for that state.
Starvation â€“ same process may always be picked as victim, include number of rollback in cost factor</p>
<h2 id="memory-management_1">å†…å­˜ç®¡ç† Memory Management<a class="headerlink" href="#memory-management_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>å†…å­˜ç®¡ç†åŸºæœ¬æ¦‚å¿µï¼š</p>
<ul>
<li>æºç¨‹åºå¤„ç†æµç¨‹ã€é“¾æ¥</li>
<li>åœ°å€ç»‘å®š binding</li>
<li>ç¼–è¯‘ã€è£…å…¥ã€æ‰§è¡Œæ—¶åˆ»</li>
<li>é€»è¾‘åœ°å€ä¸ç‰©ç†åœ°å€</li>
<li>MMU</li>
</ul>
<p>variable-partition scheme</p>
<ul>
<li>å†…å­˜åˆ†é…ç®—æ³• FF best worst</li>
<li>å¤–éƒ¨ã€å†…éƒ¨ç¢ç‰‡</li>
</ul>
<p>å†…å­˜ä¿æŠ¤</p>
<p>è¿ç»­åˆ†é…ç®¡ç†æ–¹å¼</p>
<p>Paging åˆ†é¡µç®¡ç†æ–¹å¼</p>
<ul>
<li>page tableã€TLBã€åˆ†çº§é¡µè¡¨ã€ç´¢å¼•é¡µè¡¨</li>
<li>TLB effective access time</li>
</ul>
<p>åˆ†æ®µç®¡ç†æ–¹å¼ã€æ®µé¡µç®¡ç†</p>
<ul>
<li>segment table</li>
<li>åˆ†é…æ–¹å¼æ›´çµæ´»</li>
</ul>
</blockquote>
<h3 id="background_1">Background<a class="headerlink" href="#background_1" title="Permanent link">&para;</a></h3>
<p>ç”µç£æ„Ÿåº”</p>
<p><strong>Semiconductor ROM/RAM</strong></p>
<p>DRAM: åŠ¨æ€éšæœºå­˜å–å­˜å‚¨å™¨</p>
<p>SRAM: é™æ€éšæœºå­˜å–å­˜å‚¨å™¨</p>
<p>ROM: åªè¯»å­˜å‚¨å™¨</p>
<p><strong>â€œMemory Wallâ€</strong></p>
<p>å†…å­˜å¢™ Memory is much slower than processors, and consumes more energy</p>
<p><strong>Emerging NVM Technologies</strong></p>
<p><strong>NVMs</strong> : éæŒ¥å‘æ€§å­˜å‚¨å™¨ï¼Œéæ˜“å¤±æ€§å­˜å‚¨å™¨</p>
<ul>
<li>non-volatile; low idle power; no refreshes; high write overheads; etc. </li>
</ul>
<p><strong>Phase-Change Memory(PCM)</strong>ï¼šç›¸å˜å­˜å‚¨å™¨</p>
<ul>
<li>Intel/Micron 3D Xpointï¼›Intel Optane DC Persistent Memory / DC SSD </li>
</ul>
<p><strong>ReRAM/RRAM</strong>ï¼šç”µé˜»å¼å­˜å‚¨å™¨</p>
<ul>
<li>Arbitrary programmed cell resistance (â€œmemristorâ€). </li>
<li>First invented by HP Labs, now produced by many companies (in early stage). </li>
</ul>
<hr />
<p>Program must <strong>be brought (from disk) into memory</strong> and placed within a process for it to be run only storage CPU can access Main memory and registers directly</p>
<p>Register access in one CPU clock (or less)</p>
<p>Main memory can take many cycles</p>
<p>Cache sits between main memory and CPU registers</p>
<h4 id="cache-hierarchy">Cache Hierarchy<a class="headerlink" href="#cache-hierarchy" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241118100926438.png" alt="image-20241118100926438" style="zoom: 33%;" /></p>
<h4 id="multistep-processing-of-a-user-program">Multistep Processing of a User Program<a class="headerlink" href="#multistep-processing-of-a-user-program" title="Permanent link">&para;</a></h4>
<p>è¿è¡Œç¨‹åºè¿‡ç¨‹ï¼šcomplier -- linker -- loader -- run</p>
<ul>
<li><strong>Symbolic Address ç¬¦å·åœ°å€</strong>: Addresses in the source program are generally symbolic (such as the variable count å‡½æ•°å/å˜é‡å). </li>
<li><strong>Relocatable Addresses å¯é‡å®šä½åœ°å€</strong> : A compiler typically binds these symbolic addresses to relocatable addresses (such as â€œ14 bytes from the beginning of this moduleâ€). </li>
<li><strong>Absolute Addresses ç»å¯¹åœ°å€</strong> : The linker or loader binds the relocatable addresses to absolute addresses (such as 74014)</li>
</ul>
<h4 id="binding-of-instructions-and-data-to-memory">Binding of Instructions and Data to Memory<a class="headerlink" href="#binding-of-instructions-and-data-to-memory" title="Permanent link">&para;</a></h4>
<p>åœ°å€ç»‘å®š</p>
<p><strong>Address binding</strong>(Mapping From one address space to another) of instructions and data to memory addresses can happen at three different stages</p>
<ul>
<li><strong>Compile time ç¼–è¯‘æ—¶åˆ»</strong> : If memory location known a priori, absolute code can be generated; must recompile code if starting location changes</li>
<li><strong>Load time è£…å…¥æ—¶åˆ»</strong> : Must generate relocatable codeif memory location is not known at compile time</li>
<li><strong>Execution time æ‰§è¡Œæ—¶åˆ»</strong> : Binding delayed until run time if the process can be moved during its execution from one memory segment to another. Need hardware support for address maps (e.g., base and limit registers ä¸¤ä¸ªå¯„å­˜å™¨ç”¨æ¥å¿«é€Ÿåœ°å€æ˜ å°„å’Œç»‘å®š)</li>
<li>Base register åŸºå€å¯„å­˜å™¨ , limit register é™é•¿å¯„å­˜å™¨ <img src="../images/image-20241118102941818.png" alt="image-20241118102941818" style="zoom:25%;" /></li>
<li>Linux, Windows ç³»ç»Ÿåœ¨ <strong>æ‰§è¡Œæ—¶åˆ»</strong> è¿›è¡Œåœ°å€ç»‘å®š</li>
</ul>
<h4 id="logical-vs-physical-address-space">Logical vs. Physical Address Space<a class="headerlink" href="#logical-vs-physical-address-space" title="Permanent link">&para;</a></h4>
<p>The concept of a logical address space that is bound to a separate physical address space is central to proper memory management</p>
<ul>
<li><strong>Logical address</strong> é€»è¾‘åœ°å€ â€“ generated by the CPU; also referred to as virtual address</li>
<li><strong>Physical address</strong> ç‰©ç†åœ°å€ â€“ address seen by the memory unit</li>
</ul>
<p>Logical and physical addresses are the <strong>same</strong> in <strong>compile-time and load-time</strong> address-binding schemes</p>
<p>Logical (virtual) and physical addresses <strong>differ</strong> in <strong>execution time</strong> address-binding scheme</p>
<h5 id="memory-management-unit-mmu">Memory-Management Unit (MMU)<a class="headerlink" href="#memory-management-unit-mmu" title="Permanent link">&para;</a></h5>
<p>Hardware device that maps virtual to physical address ç¡¬ä»¶ å®ç°åœ°å€è½¬æ¢</p>
<p>The user program deals with logical addresses; it never sees the real physical addresses</p>
<h4 id="linking">é“¾æ¥ Linking<a class="headerlink" href="#linking" title="Permanent link">&para;</a></h4>
<h5 id="dynamic-linking">Dynamic Linking<a class="headerlink" href="#dynamic-linking" title="Permanent link">&para;</a></h5>
<p>åŠ¨æ€é“¾æ¥</p>
<p>Linking postponed until execution time</p>
<ul>
<li>Small piece of code, <strong>stub æ¡©</strong>, used to locate the appropriate memory-resident library routine</li>
<li>Stub replaces itself with the address of the routine, and executes the routine</li>
</ul>
<p>Dynamic linking is particularly useful for libraries å…±äº«åº“é‡Œçš„å‡½æ•°åªç”¨å­˜ä¸€æ¬¡</p>
<ul>
<li>Saves main memory space</li>
<li>Reduces size of exe image file</li>
<li>Relinking of new library not needed</li>
</ul>
<h5 id="static-linking">static linking<a class="headerlink" href="#static-linking" title="Permanent link">&para;</a></h5>
<p>é™æ€é“¾æ¥</p>
<ul>
<li>è¿è¡Œå‰å°†åº“å‡½æ•°å’Œç¨‹åºç­‰é“¾æ¥æˆä¸€ä¸ªå®Œæ•´çš„è£…å…¥æ¨¡å—</li>
</ul>
<h4 id="loading">è£…å…¥ Loading<a class="headerlink" href="#loading" title="Permanent link">&para;</a></h4>
<h5 id="dynamic-loading">Dynamic Loading<a class="headerlink" href="#dynamic-loading" title="Permanent link">&para;</a></h5>
<p>åŠ¨æ€è£…å…¥ï¼šç¨‹åºç”¨åˆ°äº†å†è£…è¿›å†…å­˜</p>
<ul>
<li>Better memory-space utilization; unused routine is never loaded</li>
<li>è£…å…¥å†…å­˜æ—¶åœ°å€å‡ä¸ºç›¸å¯¹åœ°å€ï¼›æ‰§è¡Œæ—¶å†ç»‘å®šåœ°å€</li>
<li>ä¼˜ç‚¹ï¼šå¯ä»¥å°†ç¨‹åºåˆ†é…åˆ°ä¸è¿ç»­çš„å‚¨å­˜åŒºï¼Œè¿è¡ŒæœŸé—´å¯ä»¥åŠ¨æ€ç”³è¯·åˆ†é…å†…å­˜</li>
</ul>
<h5 id="static-loading">Static loading<a class="headerlink" href="#static-loading" title="Permanent link">&para;</a></h5>
<p>é™æ€è£…å…¥ï¼šæŠŠç¨‹åºå…¨éƒ¨è£…å…¥å†…å­˜</p>
<ul>
<li>åœ°å€åœ¨è£…å…¥æ—¶è½¬æ¢ï¼ˆç»å¯¹åœ°å€ï¼‰ï¼Œè£…å…¥åç¨‹åºåœ¨å†…å­˜ä¸­ä¸èƒ½ç§»åŠ¨ï¼Œä¹Ÿä¸èƒ½å†ç”³è¯·ç©ºé—´</li>
</ul>
<h4 id="_30">æ€»ç»“<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h4>
<p><strong>ç¨‹åºçš„é“¾æ¥ä¸è£…å…¥</strong></p>
<ul>
<li>ç¼–è¯‘</li>
<li>ä»é«˜çº§è¯­è¨€åˆ°ç›®æ ‡æ¨¡å—çš„è¿‡ç¨‹ ( å®é™…æ˜¯é¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼–ä¸‰ä¸ªé˜¶æ®µçš„ç»Ÿç§° ) </li>
<li>
<p>æœ¬è´¨æ˜¯ä¸€äº›æœºå™¨å¯ä»¥â€œçœ‹æ‡‚â€çš„ 0/1 æŒ‡ä»¤å’Œæ•°æ®æ–‡ä»¶</p>
</li>
<li>
<p>é“¾æ¥</p>
</li>
<li>æŠŠç¼–è¯‘åçš„ç›®æ ‡æ¨¡å—ä¸æ‰€éœ€åº“å‡½æ•°é“¾æ¥åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ•´ä½“</li>
<li>é™æ€é“¾æ¥ã€è£…å…¥æ—¶åŠ¨æ€é“¾æ¥ã€è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥</li>
<li>
<p>å½¢æˆé€»è¾‘åœ°å€</p>
</li>
<li>
<p>è£…å…¥</p>
</li>
<li>å°†è™šæ‹Ÿåœ°å€æ˜ å°„ä¸ºå†…å­˜å®é™…çš„ç‰©ç†åœ°å€</li>
<li>ç»å¯¹è£…å…¥ã€é™æ€é‡å®šä½ ( å¯é‡å®šä½è£…å…¥ ) ã€åŠ¨æ€é‡å®šä½ ( åŠ¨æ€è¿è¡Œæ—¶è£…å…¥ )</li>
</ul>
<hr />
<p>è¿›ç¨‹å†…å­˜æ˜ åƒ image</p>
<ul>
<li>ä»£ç æ®µ</li>
<li>åªè¯»ä»£ç æ®µ <code>.init</code> <code>.text</code>(ç”¨æˆ·ç¨‹åºæœºå™¨ç ) <code>.rodata</code></li>
<li>æ•°æ®æ®µ</li>
<li>
<p><code>.data</code>(å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡) <code>.bss</code>(æœªåˆå§‹åŒ–å’Œæ‰€æœ‰åˆå§‹åŒ–ä¸º 0 çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡)</p>
</li>
<li>
<p>è¿›ç¨‹æ§åˆ¶å— PCB</p>
</li>
<li>å †</li>
<li>æ ˆ</li>
</ul>
<h3 id="contiguous-memory-allocation">è¿ç»­åˆ†é… Contiguous Memory Allocation<a class="headerlink" href="#contiguous-memory-allocation" title="Permanent link">&para;</a></h3>
<p>Relocation register å¯é‡å®šä½å¯„å­˜å™¨ contains value of smallest <span style="color:#00CC00;"> physical address </span></p>
<p>å•ä¸€è¿ç»­åˆ†é…ï¼Œç”¨æˆ·ç¨‹åºç‹¬å ç”¨æˆ·åŒº</p>
<ul>
<li>ç®€å•ã€æ— å¤–éƒ¨ç¢ç‰‡</li>
<li>åªèƒ½ç”¨äºå•ç”¨æˆ·ã€å•æ“ä½œç³»ç»Ÿï¼Œæœ‰å†…éƒ¨ç¢ç‰‡ã€å‚¨å­˜å™¨çš„åˆ©ç”¨ç‡ä½</li>
</ul>
<p>Limit register contains range of logical addresses â€“ each logical address must be less than the limit register</p>
<p>MMU maps logical address dynamically</p>
<p><strong>å¤šåˆ†åŒºåˆ†é… Multi</strong></p>
<ul>
<li>
<p>å›ºå®šåˆ†åŒº fixed partitioningï¼šå¦‚æœå†…å­˜å¤§ç¨‹åºå°ï¼Œæµªè´¹èµ„æº</p>
</li>
<li>
<p>åŠ¨æ€åˆ†åŒº dynamic partition</p>
</li>
<li>
<p>Hole â€“ block of available memory; holes of various size are scattered throughout memory</p>
</li>
<li>
<p>When a process arrives, it is allocated memory from a hole large enough to accommodate it</p>
</li>
<li>
<p>Operating system maintains information about: a) allocated partitions b) free partitions (hole)</p>
</li>
</ul>
<h4 id="dynamic-storage-allocation-problem">åŠ¨æ€åˆ†é…çš„ç®—æ³• Dynamic storage-allocation problem<a class="headerlink" href="#dynamic-storage-allocation-problem" title="Permanent link">&para;</a></h4>
<p>åŸºäºé¡ºåºæœç´¢çš„åˆ†é…ç®—æ³•ï¼š</p>
<p><strong>FF(First Fit)</strong>ï¼šAllocate the first hole that is big enough æŒ‰é¡ºåºç¬¬ä¸€ä¸ªæ”¾å¾—ä¸‹çš„æ´ï¼›ç©ºé—²åˆ†åŒºæŒ‰åœ°å€é€’å¢çš„æ¬¡åºæ’åˆ—</p>
<p><strong>NF(Next Fit)</strong>ï¼šä¸‹ä¸€ä¸ªæ”¾çš„ä¸‹çš„æ´</p>
<p><strong>BF(Best Fit)</strong>ï¼š Allocate the smallest hole that is big enough; must search entire list, unless ordered by size æœ€å°èƒ½æ”¾å¾—ä¸‹çš„æ´ï¼Œä¼šäº§ç”Ÿä¸€äº›å°ç¢ç‰‡ï¼ˆtiny leftover holesï¼‰æœ€å®¹æ˜“äº§ç”Ÿç¢ç‰‡</p>
<ul>
<li>ç©ºé—²åˆ†åŒºæŒ‰å®¹é‡é€’å¢çš„æ¬¡åºæ’åˆ—</li>
</ul>
<p><strong>WF(Worst Fit)</strong>ï¼šAllocate the largest hole; must also search entire list æœ€å¤§çš„æ´ï¼Œä¼šäº§ç”Ÿä¸€äº›å¤§ç¢ç‰‡ï¼ˆlarge leftover holesï¼‰</p>
<ul>
<li>ç©ºé—²åˆ†åŒºæŒ‰å®¹é‡é€’å‡çš„æ¬¡åºæ’åˆ—</li>
</ul>
<blockquote>
<p>[!NOTE]</p>
<p>First-fit and best-fit better than worst-fit in terms of speed and storage utilization</p>
</blockquote>
<h4 id="fragmentation">Fragmentation<a class="headerlink" href="#fragmentation" title="Permanent link">&para;</a></h4>
<p><strong>External Fragmentation å¤–éƒ¨ç¢ç‰‡</strong>â€“ total memory space exists to satisfy a request, but it is not contiguous</p>
<p><strong>Internal Fragmentation å†…éƒ¨ç¢ç‰‡</strong>(refer to the textbook p287) â€“ allocated memory may be slightly larger than requested memory; this size difference is memory internal to a partition, but not being used</p>
<p><strong>Reduce external fragmentation by compaction/defragmentation</strong> é€šè¿‡å‹ç¼©å‡å°‘å¤–éƒ¨ç¢ç‰‡</p>
<ul>
<li>Shuffle memory contents to place all free memory together in one large block</li>
<li>Compaction is possible <em>only if</em> <span style="color:#CC0066;"> relocation is dynamic </span>, and is done at execution time</li>
<li>I/O problem I/O æ“ä½œæ—¶ä¹Ÿä¸å…è®¸è¿›è¡Œå‹ç¼©</li>
<li>Latch job in memory while it is involved in I/O</li>
<li>Do I/O only into OS buffers</li>
<li>Another solution to external frag. is non-contiguous allocation</li>
</ul>
<h3 id="paging">åˆ†é¡µ Paging<a class="headerlink" href="#paging" title="Permanent link">&para;</a></h3>
<p>åˆ†é¡µå­˜å‚¨ç®¡ç†</p>
<p>Logical address space of a process can be noncontiguous é€»è¾‘åœ°å€å¯ä»¥ä¸è¿ç»­; process is allocated physical memory whenever the latter is available</p>
<p>Divide physical memory into fixed-sized blocks called <strong>frames</strong>(size is power of 2, between 512 bytes and 8,192 bytes)
Divide logical memory into blocks of same size called <strong>pages</strong></p>
<p>To run a program of size n pages, need to find n free frames and load program</p>
<p>åˆ†é¡µé€šè¿‡ç¡¬ä»¶æœºåˆ¶å®ç°</p>
<h4 id="address-translation-scheme">Address Translation Scheme<a class="headerlink" href="#address-translation-scheme" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241120144532930.png" alt="image-20241120144532930" style="zoom: 67%;" /></p>
<p>é¡µå·ã€é¡µé¢åç§»</p>
<p>åœ°å€è½¬æ¢</p>
<p><img src="./assets/image-20241125100730054.png" alt="image-20241125100730054" style="zoom: 67%;" /></p>
<blockquote>
<p>ä¸ºäº†å°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ï¼Œéœ€è¦ç»“åˆè™šæ‹Ÿåœ°å€çš„é¡µå·å’Œé¡µå†…åç§»ï¼Œä»¥åŠé¡µè¡¨ä¸­é¡µå·ä¸é¡µæ¡†å·çš„æ˜ å°„å…³ç³»ã€‚ä»¥ä¸‹æ˜¯è®¡ç®—æ­¥éª¤ï¼š</p>
<p><strong>å·²çŸ¥æ¡ä»¶</strong></p>
<ol>
<li><strong>é¡µé¢å¤§å°</strong> = $<span class="arithmatex">\(4 \, \text{KB} = 2^{12} = 4096 \, \text{bytes}\)</span>$ï¼Œé¡µå·ç”¨é«˜ 20 ä½ï¼Œé¡µå†…åç§»ç”¨ä½ 12 ä½è¡¨ç¤ºã€‚</li>
<li>è™šæ‹Ÿåœ°å€ï¼š
   - 2362H =  <span class="arithmatex">\(9026_{10}\)</span>
   - 1565H = <span class="arithmatex">\(5477_{10}\)</span></li>
<li>é¡µè¡¨ï¼š
   - é¡µå· 0 â†’ é¡µæ¡†å· 101H
   - é¡µå· 1 â†’ é¡µæ¡†å· 102H
   - é¡µå· 2 â†’ é¡µæ¡†å· 254H</li>
</ol>
<p><strong>è½¬æ¢æ­¥éª¤</strong></p>
<ol>
<li>è®¡ç®—è™šæ‹Ÿåœ°å€çš„é¡µå·å’Œé¡µå†…åç§»</li>
</ol>
<div class="arithmatex">\[\text{é¡µå·} = \left\lfloor \frac{\text{è™šæ‹Ÿåœ°å€}}{\text{é¡µé¢å¤§å°}} \right\rfloor$$, $$\quad \text{é¡µå†…åç§»} = \text{è™šæ‹Ÿåœ°å€} \mod \text{é¡µé¢å¤§å°}\]</div>
<ul>
<li><strong>2362H</strong>ï¼š $<span class="arithmatex">\(\text{é¡µå·} = \left\lfloor \frac{9026}{4096} \right\rfloor = 2\)</span>$, $<span class="arithmatex">\(\quad \text{é¡µå†…åç§»} = 9026 \mod 4096 = 1834\)</span>$</li>
<li><strong>1565H</strong>ï¼š $<span class="arithmatex">\(\text{é¡µå·} = \left\lfloor \frac{5477}{4096} \right\rfloor = 1\)</span>$,  <span class="arithmatex">\(\text{é¡µå†…åç§»} = 5477 \mod 4096 = 1381\)</span>$</li>
</ul>
<ol start="2">
<li>æ ¹æ®é¡µè¡¨æ‰¾åˆ°å¯¹åº”é¡µæ¡†å·</li>
</ol>
<ul>
<li><strong>é¡µå· 2</strong> â†’ é¡µæ¡†å· 254H</li>
<li><strong>é¡µå· 1</strong> â†’ é¡µæ¡†å· 102H</li>
</ul>
<p>é¡µæ¡†å·å·¦ç§» 12 ä½ï¼ˆä¹˜ä»¥ 4096ï¼‰ï¼Œå†åŠ ä¸Šé¡µå†…åç§»ï¼Œå¾—åˆ°ç‰©ç†åœ°å€ã€‚</p>
<ol start="3">
<li>è®¡ç®—ç‰©ç†åœ°å€</li>
</ol>
<ul>
<li><strong>2362Hï¼ˆé¡µå· 2ï¼Œé¡µæ¡†å· 254Hï¼‰</strong>ï¼š$<span class="arithmatex">\(\text{ç‰©ç†åœ°å€} = \text{é¡µæ¡†å·} \times 4096 + \text{é¡µå†…åç§»}\)</span><span class="arithmatex">\(ï¼Œ\)</span><span class="arithmatex">\(\text{ç‰©ç†åœ°å€} = 254H \times 4096 + 1834 = 254000H + 072A = 25472AH\)</span>$</li>
<li><strong>1565Hï¼ˆé¡µå· 1ï¼Œé¡µæ¡†å· 102Hï¼‰</strong>ï¼š$<span class="arithmatex">\(\text{ç‰©ç†åœ°å€} = 102H \times 4096 + 1381 = 102000H + 0565 = 1020565H\)</span>$</li>
</ul>
<p>ç»“æœ</p>
<ol>
<li>è™šæ‹Ÿåœ°å€ 2362H â†’ ç‰©ç†åœ°å€ 25472AH</li>
<li>è™šæ‹Ÿåœ°å€ 1565H â†’ ç‰©ç†åœ°å€ 1020565H</li>
</ol>
</blockquote>
<h4 id="page">Page<a class="headerlink" href="#page" title="Permanent link">&para;</a></h4>
<p>TablePage table is kept in main memory</p>
<p><strong>Page-table base register (PTBR)</strong> points to the page table
<strong>Page-table length register (PTLR)</strong> indicates size of the page table
In this scheme every data/instruction access requires <strong>two</strong> memory accesses. One for the page table and one for the data/instruction.</p>
<blockquote>
<p>[!NOTE]</p>
<p>Pagetable æ”¾åœ¨å†…å­˜é‡Œï¼Œè®¿é—®é€»è¾‘åœ°å€è¦è®¿é—®ä¸¤æ¬¡å†…å­˜</p>
</blockquote>
<p>The two-memory-access problem can be solved by the use of a special fast-lookup hardware cache called associative memory or translation look-aside buffers (<strong>TLB</strong> s è½¬æ¢æ—è§†ç¼“å†² , ä¸€ç§°å¿«è¡¨ )</p>
<h4 id="paging-hardware-with-tlb">Paging Hardware With TLB<a class="headerlink" href="#paging-hardware-with-tlb" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241120150234672.png" alt="image-20241120150234672" style="zoom:50%;" /></p>
<h4 id="effective-access-time">Effective Access Time<a class="headerlink" href="#effective-access-time" title="Permanent link">&para;</a></h4>
<p>TLB å¿«è¡¨å‘½ä¸­ç‡ï¼ˆEATï¼‰
$$
EAT = (M + \varepsilon) \times \alpha + (2M +\varepsilon)\times(1 â€“ \alpha)
$$</p>
<p>Associative Lookup æŸ¥ TLB æ—¶é—´  <span class="arithmatex">\(\varepsilon\)</span> </p>
<p>Assume memory cycle time è®¿é—®å†…å­˜æ—¶é—´ <span class="arithmatex">\(M\)</span> </p>
<p>Hit ratio â€“ percentage of times that a page number is found in the associative registers; ratio related to number of associative registers</p>
<p>Hit ratio = <span class="arithmatex">\(\alpha\)</span>â€‹</p>
<p>ä¾‹å­ï¼š<img src="../images/image-20241120150846991.png" alt="image-20241120150846991" style="zoom:50%;" /></p>
<h4 id="memory-protection-in-paged-scheme">Memory Protection in Paged Scheme<a class="headerlink" href="#memory-protection-in-paged-scheme" title="Permanent link">&para;</a></h4>
<p>å†…å­˜ä¿æŠ¤</p>
<p>Valid-invalid bit attached to each entry in the page table</p>
<h4 id="shared-pages">Shared Pages<a class="headerlink" href="#shared-pages" title="Permanent link">&para;</a></h4>
<p><strong>Shared code</strong>ï¼šOne copy of <span style="color:#CC0066;"> read-only </span> (reentrant) code shared among processes (i.e., text editors, compilers, window systems)ï¼›</p>
<p>Shared code must appear in <span style="color:#CC0066;"> same location in the logical address space </span> of all processes é€»è¾‘åœ°å€ä¸€æ ·åœ¨ TLB åªç”¨å­˜ä¸€æ¬¡</p>
<h3 id="structure-of-the-page-table">Structure of the Page Table<a class="headerlink" href="#structure-of-the-page-table" title="Permanent link">&para;</a></h3>
<h4 id="hierarchical-paging">Hierarchical Paging åˆ†çº§é¡µè¡¨/å¤šçº§é¡µè¡¨<a class="headerlink" href="#hierarchical-paging" title="Permanent link">&para;</a></h4>
<p>ä¸¤çº§é¡µè¡¨</p>
<p><img src="./assets/image-20241120152043420.png" alt="image-20241120152043420" style="zoom:50%;" /></p>
<p>p1-&gt; outer page table -- p2 -&gt; page of page table -- d -&gt; real physical address </p>
<p>64 = 42+10+12, 32 = 12+10+10</p>
<blockquote>
<p>[!NOTE]</p>
<p><strong>Page-table base register (PTBR)</strong> ï¼Ÿ</p>
<p><strong>What are the benefits of the hierarchical page</strong>? èŠ‚çœå†…å­˜ï¼ˆpagetable çš„å†…å­˜ç©ºé—´ï¼‰</p>
</blockquote>
<h4 id="hashed-page-tables">Hashed Page Tables<a class="headerlink" href="#hashed-page-tables" title="Permanent link">&para;</a></h4>
<p>Variation for 64-bit addresses is the <strong>clustered page table</strong></p>
<p><img src="./assets/image-20241120153044232.png" alt="image-20241120153044232" style="zoom:50%;" /></p>
<p>å“ˆå¸Œä¼˜ç‚¹ï¼šå¿«ï¼Œhashtable æ¯” pagetable å°</p>
<h4 id="inverted-page-tables">å€’æ’é¡µè¡¨ Inverted Page Tables<a class="headerlink" href="#inverted-page-tables" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241120153453098.png" alt="image-20241120153453098" style="zoom:50%;" /></p>
<p>ç¼ºç‚¹ï¼šæ…¢ï¼›å¥½å¤„ï¼šåªæœ‰ä¸€ä¸ª pagetable</p>
<p>Search is slow, so put page table entries into a hash table. TLB can be used to speed up hash-table reference.</p>
<h4 id="_31">é¡µè¡¨é¡¹è®¡ç®—<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h4>
<p><img src="././assets/image-20241229131108605.png" alt="image-20241229131108605" style="zoom:50%;" /></p>
<h3 id="swapping">Swapping<a class="headerlink" href="#swapping" title="Permanent link">&para;</a></h3>
<p>A process can be swapped temporarily out of memory to a backing store, and then brought back into memory for continued execution è¿›ç¨‹å¯ä»¥æš‚æ—¶ä»å†…å­˜äº¤æ¢åˆ°å¤‡ç”¨å­˜å‚¨å™¨ï¼Œç„¶åå†è¿”å›åˆ°å†…å­˜ä¸­ç»§ç»­æ‰§è¡Œ
<strong>Backing store äº¤æ¢åŒº</strong> â€“ fast disk large enough to accommodate copies of all memory images for all users; must provide direct access to these memory images è¶³å¤Ÿå¤§çš„å¿«é€Ÿç£ç›˜ï¼Œå¯ä»¥å®¹çº³æ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰å†…å­˜æ˜ åƒçš„å‰¯æœ¬ï¼›å¿…é¡»æä¾›å¯¹è¿™äº›å†…å­˜æ˜ åƒçš„ç›´æ¥è®¿é—®</p>
<p><img src="./assets/image-20241120154044395.png" alt="image-20241120154044395" style="zoom:50%;" /></p>
<h3 id="segmentation">åˆ†æ®µ Segmentation<a class="headerlink" href="#segmentation" title="Permanent link">&para;</a></h3>
<p>Memory-management scheme that supports user view of memory </p>
<p><strong>Segment table</strong> â€“ maps two-dimensional physical addresses; each table entry has: </p>
<ul>
<li>
<p><strong>base</strong> â€“ contains the starting physical address where the segments reside in memory</p>
</li>
<li>
<p><strong>limit</strong> â€“ specifies the length of the segment</p>
</li>
</ul>
<p><strong>Segment-table base register (STBR)</strong> points to the segment tableâ€™s location in memory æ®µè¡¨ä¸­æ¯ä¸ªå—å¯¹åº”çš„èµ·å§‹ç‰©ç†åœ°å€</p>
<p><strong>Segment-table length register (STLR)</strong> indicates number of segments used by a program</p>
<ul>
<li>segment number <strong>s</strong> is legal if <strong>s</strong> &lt; <strong>STLR</strong></li>
</ul>
<p>ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é…</p>
<p>å¼•å…¥æ®µå¼å­˜å‚¨ç®¡ç†æ–¹å¼ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ»¡è¶³ç”¨æˆ·çš„ä¸‹åˆ—è¦æ±‚ï¼š</p>
<ul>
<li>æ–¹ä¾¿ç¼–ç¨‹ã€åˆ†æ®µå…±äº«ã€åˆ†æ®µä¿æŠ¤ã€åŠ¨æ€é“¾æ¥å’ŒåŠ¨æ€å¢é•¿</li>
</ul>
<p><img src="./assets/image-20241120154721954.png" alt="image-20241120154721954" style="zoom:50%;" /></p>
<p>éè¿ç»­åˆ†é…</p>
<ul>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€å¼ æ®µè¡¨ï¼Œæ¯ä¸ªæ®µè¡¨é¡¹å¯¹åº”è¿›ç¨‹ä¸­çš„ä¸€æ®µ</li>
</ul>
<p>åˆ†æ®µç®¡ç†ä¿æŠ¤</p>
<ul>
<li>å­˜å–æ§åˆ¶ä¿æŠ¤</li>
<li>åœ°å€è¶Šç•Œä¿æŠ¤</li>
</ul>
<p>åœ¨ <strong>æ®µå¼åˆ†é…</strong> ä¸­ï¼Œå–ä¸€æ¬¡æ•°æ®æ—¶å…ˆä»å†…å­˜æŸ¥æ‰¾æ®µè¡¨ï¼Œå†æ‹¼æˆç‰©ç†åœ°å€åè®¿é—®å†…å­˜ï¼Œå…±éœ€è¦ 2 æ¬¡å†…å­˜è®¿é—®ã€‚</p>
<p>åœ¨ <strong>æ®µé¡µå¼åˆ†é…</strong> ä¸­ï¼Œå–ä¸€æ¬¡æ•°æ®æ—¶å…ˆä»å†…å­˜æŸ¥æ‰¾æ®µè¡¨ï¼Œå†è®¿é—®å†…å­˜æŸ¥æ‰¾ç›¸åº”çš„é¡µè¡¨ï¼Œæœ€åæ‹¼æˆç‰©ç†åœ°å€åè®¿é—®å†…å­˜ï¼Œå…±éœ€è¦ 3 æ¬¡å†…å­˜è®¿é—®ã€‚</p>
<h3 id="example-the-intel-pentium">Example: The Intel Pentium<a class="headerlink" href="#example-the-intel-pentium" title="Permanent link">&para;</a></h3>
<p>å¥”è…¾å¤„ç†å™¨</p>
<p>Supports both segmentation and segmentation with paging æ®µé¡µæ··åˆï¼Œå…ˆåˆ†æ®µå†åˆ†é¡µ</p>
<p>linear address: 32 offset</p>
<p><img src="./assets/image-20241125104027505.png" alt="image-20241125104027505" style="zoom:50%;" /></p>
<h4 id="intel-pentium-segmentation">Intel Pentium Segmentation<a class="headerlink" href="#intel-pentium-segmentation" title="Permanent link">&para;</a></h4>
<p>æ ¹æ®æ®µå·æ‰¾é¡µè¡¨åŸºå€ï¼Œæ ¹æ®åˆ†é¡µçš„ vaï¼ˆé¡µæ¡†å·ï¼‰æ‰¾åˆ°é¡µå·ï¼Œä¸¤è€…æ‹¼æ¥</p>
<p>Local Descriptor Table contains entries for the segments local to each program itself; 
Global Descriptor Table contains entries of the system (OS).</p>
<hr />
<p><strong>åˆ†æ®µ</strong> å¼å­˜å‚¨ç®¡ç†æ–¹æ³•æœ‰åˆ©äºç¨‹åºçš„ <strong>åŠ¨æ€é“¾æ¥</strong></p>
<p>æ“ä½œç³»ç»Ÿå®ç° <strong>åˆ†åŒº</strong> å­˜å‚¨ç®¡ç†çš„ä»£ä»·æœ€å°</p>
<p>å­˜å‚¨ç®¡ç†æ–¹å¼ä¸­ï¼Œåªè¦æ˜¯å›ºå®šçš„åˆ†é…å°±ä¼šäº§ç”Ÿå†…éƒ¨ç¢ç‰‡ï¼Œå…¶ä½™çš„éƒ½ä¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡ã€‚è‹¥å›ºå®šå’Œä¸å›ºå®šåŒæ—¶å­˜åœ¨(ä¾‹å¦‚æ®µé¡µå¼)ï¼Œåˆ™ä»è§†ä¸ºå›ºå®šã€‚</p>
<h2 id="virtual-memory">Virtual Memory è™šæ‹Ÿå†…å­˜<a class="headerlink" href="#virtual-memory" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>è™šæ‹Ÿå†…å­˜åŸºæœ¬æ¦‚å¿µï¼šå®šä¹‰ã€å¥½å¤„</p>
<ul>
<li>æŒ‰éœ€åˆ†é¡µã€åˆ†æ®µ</li>
</ul>
<p>è¯·æ±‚é¡µå¼ç®¡ç†ï¼š</p>
<ul>
<li>å¥½å¤„</li>
<li>é€»è¾‘åœ°å€è½¬æ¢</li>
<li>page fault ç¼ºé¡µä¸­æ–­å¤„ç†</li>
<li>ç¼ºé¡µæœ‰æ•ˆè®¿é—®æ—¶é—´</li>
<li>é¡µé¢æ›¿æ¢</li>
<li>é¡µé¢æ›¿æ¢ç®—æ³•ï¼ˆFIFO OPTIMAL LRU CLOCK ENAHNCED CLOCKï¼‰</li>
<li>å¸§çš„åˆ†é…å’Œç½®æ¢ç­–ç•¥ã€æŠ–åŠ¨ã€å·¥ä½œé›†</li>
</ul>
<p>kernel å†…å­˜åˆ†é…</p>
</blockquote>
<h3 id="background_2">Background<a class="headerlink" href="#background_2" title="Permanent link">&para;</a></h3>
<p><strong>Virtual memory</strong> â€“ separation of user logical memory from physical memory è™šæ‹Ÿå†…å­˜ä¸æ˜¯ç‰©ç†å¯¹è±¡ï¼Œè€Œæ˜¯æŒ‡å†…æ ¸æä¾›çš„ç”¨äºç®¡ç†ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿåœ°å€çš„æŠ½è±¡å’Œæœºåˆ¶çš„é›†åˆ</p>
<ul>
<li>Only <strong>part</strong> of the program needs to be in memory for execution ä½œä¸šä¸å¿…å…¨éƒ¨è£…å…¥å†…å­˜</li>
<li>Logical address space can therefore be much <strong>larger</strong> than physical address space é€»è¾‘åœ°å€å¯ä»¥æ¯”ç‰©ç†åœ°å€å¤§å¾ˆå¤š</li>
<li>Allows address spaces to be <strong>shared</strong> by several processes åœ°å€ç©ºé—´å¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹å…±äº«</li>
<li>Allows for more efficient process <strong>creation</strong></li>
</ul>
<blockquote>
<p>éè™šæ‹Ÿå­˜å‚¨å™¨ï¼šä½œä¸šåœ¨è¿è¡Œå‰å¿…é¡»å…¨éƒ¨è£…å…¥å†…å­˜ï¼Œä¸”åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¹Ÿä¸€ç›´é©»ç•™å†…å­˜</p>
<p>è™šæ‹Ÿå­˜å‚¨å™¨ï¼šä½œä¸šåœ¨è¿è¡Œå‰ä¸å¿…å…¨éƒ¨è£…å…¥å†…å­˜ï¼Œä¸”åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¹Ÿä¸å¿…ä¸€ç›´é©»ç•™å†…å­˜</p>
</blockquote>
<p>Virtual memory can be implemented via è™šæ‹Ÿå†…å­˜çš„å®ç°ï¼š</p>
<ul>
<li>
<p><strong>Demand paging è¯·æ±‚å¼åˆ†é¡µ</strong></p>
</li>
<li>
<p><strong>Demand segmentation è¯·æ±‚å¼åˆ†æ®µ</strong></p>
</li>
</ul>
<hr />
<h4 id="principle-of-locality">principle of locality<a class="headerlink" href="#principle-of-locality" title="Permanent link">&para;</a></h4>
<p><strong>å±€éƒ¨æ€§åŸç† (principle of locality)</strong>: æŒ‡ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªè¾ƒçŸ­æ—¶æœŸæ‰€æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€å’ŒæŒ‡ä»¤çš„æ“ä½œæ•°åœ°å€ï¼Œåˆ†åˆ«å±€é™äºä¸€å®šåŒºåŸŸã€‚</p>
<ul>
<li>æ—¶é—´å±€éƒ¨æ€§ : ä¸€æ¡æŒ‡ä»¤çš„ä¸€æ¬¡æ‰§è¡Œå’Œä¸‹æ¬¡æ‰§è¡Œï¼Œä¸€ä¸ªæ•°æ®çš„ä¸€æ¬¡è®¿é—®å’Œä¸‹æ¬¡è®¿é—®éƒ½é›†ä¸­åœ¨ä¸€ä¸ªè¾ƒçŸ­æ—¶æœŸå†… ; </li>
<li>ç©ºé—´å±€éƒ¨æ€§ : å½“å‰æŒ‡ä»¤å’Œé‚»è¿‘çš„å‡ æ¡æŒ‡ä»¤ï¼Œå½“å‰è®¿é—®çš„æ•°æ®å’Œé‚»è¿‘çš„æ•°æ®éƒ½é›†ä¸­åœ¨ä¸€ä¸ªè¾ƒå°åŒºåŸŸå†…ã€‚</li>
<li>è™šæ‹Ÿå­˜å‚¨å™¨æ˜¯å…·æœ‰è¯·æ±‚è°ƒå…¥åŠŸèƒ½å’Œç½®æ¢åŠŸèƒ½ï¼Œä»…æŠŠè¿›ç¨‹çš„ä¸€éƒ¨åˆ†è£…å…¥å†…å­˜ä¾¿å¯è¿è¡Œè¿›ç¨‹çš„å­˜å‚¨ç®¡ç†ç³»ç»Ÿï¼Œå®ƒèƒ½ä»é€»è¾‘ä¸Šå¯¹å†…å­˜å®¹é‡è¿›è¡Œæ‰©å……çš„ä¸€ç§è™šæ‹Ÿçš„å­˜å‚¨ç®¡ç†ç³»ç»Ÿã€‚</li>
<li>è™šæ‹Ÿå­˜å‚¨å™¨åªèƒ½åŸºäºéè¿ç»­åˆ†é…â€”â€”os è™šæ‹ŸæŠ€æœ¯ä¸­çš„ç©ºåˆ†å¤ç”¨æŠ€æœ¯</li>
</ul>
<hr />
<p>è™šæ‹Ÿå†…å­˜å…¶ä»–ä¼˜ç‚¹ï¼š</p>
<ul>
<li>System libraries can be shared by several processes through mapping of the shared object into a virtual address space é€šè¿‡å°†å…±äº«å¯¹è±¡æ˜ å°„åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œç³»ç»Ÿåº“å¯ç”±å¤šä¸ªè¿›ç¨‹å…±äº«</li>
<li>Shared memory is enabled å…±äº«å†…å­˜</li>
<li>Pages can be shared during process creation (speeds up creation) å¯åœ¨è¿›ç¨‹åˆ›å»ºæœŸé—´å…±äº«é¡µé¢ï¼ˆåŠ å¿«åˆ›å»ºé€Ÿåº¦ï¼‰</li>
</ul>
<h4 id="process-creation_1">Process Creation<a class="headerlink" href="#process-creation_1" title="Permanent link">&para;</a></h4>
<p>Virtual memory allows other benefits during process creation:
- <strong>Copy-on-Write(COW) å†™æ—¶å¤åˆ¶</strong>ï¼šCoW çš„ä¸»è¦ç›®çš„æ˜¯å‡å°‘å†…å­˜ä½¿ç”¨å’Œæé«˜æ€§èƒ½ï¼Œé€šè¿‡å»¶è¿Ÿå®é™…çš„å†…å­˜
  å¤åˆ¶ï¼Œç›´åˆ°æŸä¸ªè¿›ç¨‹å°è¯•ä¿®æ”¹å†…å­˜å†…å®¹æ—¶æ‰è¿›è¡Œå¤åˆ¶ï¼ˆçœæ—¶é—´å’Œç©ºé—´ï¼‰
- <strong>Memory-Mapped Files (later)</strong>: å°†æ–‡ä»¶å†…å®¹æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´çš„æŠ€æœ¯ã€‚é€šè¿‡å†…å­˜æ˜ å°„æ–‡ä»¶ï¼Œå¯ä»¥åƒè®¿é—®å†…å­˜ä¸€æ ·è®¿é—®æ–‡ä»¶å†…å®¹ï¼Œè€Œæ— éœ€æ˜¾å¼åœ°è¿›è¡Œè¯»å†™æ“ä½œã€‚è¿™ç§æŠ€æœ¯åœ¨å¤„ç†å¤§æ–‡ä»¶ã€æé«˜æ–‡ä»¶è®¿é—®æ€§èƒ½ä»¥åŠå®ç°è¿›ç¨‹é—´é€šä¿¡ç­‰æ–¹é¢éå¸¸æœ‰ç”¨</p>
<h3 id="demand-paging">Demand Paging<a class="headerlink" href="#demand-paging" title="Permanent link">&para;</a></h3>
<p>è¯·æ±‚è°ƒé¡µï¼Œéœ€è¦æ—¶å°†é¡µé¢æ”¾åˆ°å†…å­˜</p>
<p>Bring a page into memory only when it is needed</p>
<ul>
<li>
<p>Less I/O needed</p>
</li>
<li>
<p>Less memory needed </p>
</li>
<li>
<p>Faster response</p>
</li>
<li>
<p>More users</p>
</li>
<li>
<p>Page is needed =&gt; reference to it</p>
</li>
<li>
<p>invalid reference =&gt; abort</p>
</li>
<li>
<p>not-in-memory =&gt; bring to memory</p>
</li>
<li>
<p>Lazy swapper â€“ never swaps a page into memory unless page will be needed</p>
</li>
<li>Swapper that deals with pages is a pager</li>
</ul>
<p>Transfer of a Paged Memory to Contiguous Disk Space è¿ç»­åˆ†é…</p>
<h4 id="valid-invalid-bit">Valid-Invalid Bit<a class="headerlink" href="#valid-invalid-bit" title="Permanent link">&para;</a></h4>
<p>With each page table entry a validâ€“invalid bit is associated (<strong>v</strong>: in-memory, <strong>i</strong>: not-in-memory)</p>
<ul>
<li>Initially validâ€“invalid bit is set to i on all entries</li>
<li>During address translation, if validâ€“invalid bit in page table entry is <strong>i</strong> =&gt; <strong>page fault</strong> (a trap to the OS ç¼ºé¡µä¸­æ–­)</li>
</ul>
<p><img src="./assets/image-20241125112104401.png" alt="image-20241125112104401" style="zoom: 33%;" /></p>
<h4 id="page-fault">Page Fault<a class="headerlink" href="#page-fault" title="Permanent link">&para;</a></h4>
<p>If there is a reference to a page, first reference to that page will trap to operating system: <strong>page fault</strong></p>
<p>ç¼ºé¡µå¤„ç†æµç¨‹ï¼š</p>
<ol>
<li>Operating system looks at <span style="color:#CC0000;"> another table </span> (kept with PCB) to decide:
  - Invalid reference =&gt; abort
  - Just not in memory</li>
<li>Get empty frame</li>
<li>Swap page into frame</li>
<li>Reset tables ç£ç›˜å†…éƒ¨è¡¨å’Œé¡µè¡¨</li>
<li>Set <code>validation bit = v</code></li>
<li>Restart the instruction that caused the page fault</li>
<li>ä¸­æ–­åæ¢å¤ block move</li>
<li>auto increment/decrement location</li>
</ol>
<blockquote>
<p>é¡µé¢æ›¿æ¢ä¸æ˜¯å¿…é¡»çš„</p>
</blockquote>
<hr />
<p>Whatâ€™s the state of the process that has page fault?</p>
<blockquote>
<p><strong>è¿è¡Œæ€ (Running)</strong> <span class="arithmatex">\(\rightarrow\)</span> <strong>é˜»å¡æ€ (Blocked)</strong> <span class="arithmatex">\(\rightarrow\)</span> <strong>å°±ç»ªæ€ (Ready)</strong> <span class="arithmatex">\(\rightarrow\)</span> <strong>è¿è¡Œæ€ (Running)</strong></p>
</blockquote>
<h4 id="performance-of-demand-paging">Performance of Demand Paging<a class="headerlink" href="#performance-of-demand-paging" title="Permanent link">&para;</a></h4>
<p>Page Fault Rate 0 â‰¤ p â‰¤ 1.0</p>
<ul>
<li>if p = 0 no page faults </li>
<li>if p = 1, every reference is a fault</li>
</ul>
<p><strong>Effective Access Time (EAT)</strong>
EAT = (1 â€“ p) Ã— memory access + p (page fault overhead + swap page out + swap page in + restart overhead)</p>
<p>ä¾‹å­ï¼š</p>
<p><img src="./assets/image-20241125113529011.png" alt="image-20241125113529011" style="zoom: 33%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†ä¸­ï¼Œè‹¥æŠŠé¡µé¢å°ºå¯¸å¢å¤§ï¼Œé‚£ä¹ˆé¡µå¸§æ•°å‡å°ï¼Œç¼ºé¡µä¸­æ–­æ¬¡æ•°ä¹Ÿä¼šå‡å°‘</p>
</blockquote>
<h3 id="copy-on-write">Copy-on-Write<a class="headerlink" href="#copy-on-write" title="Permanent link">&para;</a></h3>
<p>Copy-on-Write (COW) allows both parent and child processes to initially share the same pages in memory</p>
<p>If either process modifies a shared page, only then is the page copied</p>
<p>COW allows more efficient process creation as only modified pages are copied</p>
<p>Free pages are allocated from a <strong>pool</strong> of zeroed-out pages</p>
<p>CoW çš„ä¸»è¦ç›®çš„æ˜¯å‡å°‘å†…å­˜ä½¿ç”¨å’Œæé«˜æ€§èƒ½ï¼Œé€šè¿‡å»¶è¿Ÿå®é™…çš„å†…å­˜å¤åˆ¶ï¼Œç›´åˆ°æŸä¸ªè¿›ç¨‹å°è¯•ä¿®æ”¹å†…å­˜å†…å®¹æ—¶æ‰è¿›è¡Œå¤åˆ¶</p>
<h3 id="page-replacement">Page Replacement<a class="headerlink" href="#page-replacement" title="Permanent link">&para;</a></h3>
<h4 id="page-replacement_1">Page replacement<a class="headerlink" href="#page-replacement_1" title="Permanent link">&para;</a></h4>
<p>å¦‚æœæ²¡æœ‰ç©ºé—²å¸§ free frameï¼š</p>
<p><strong>Page replacement é¡µé¢æ›¿æ¢</strong> â€“ find some page in memory, but not really in use, swap it out</p>
<ul>
<li>algorithm é¡µé¢æ›¿æ¢ç®—æ³•</li>
<li>performance â€“ want an algorithm which will result in minimum number of page faults</li>
<li>Same page may be brought into memory several times</li>
</ul>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>Prevent over-allocation of memory by modifying page-fault service routine to include page replacement</li>
<li>Use <strong>modify (dirty) bit è„ä½</strong> to reduce overhead of page transfers â€“ only modified pages are written to disk</li>
<li>Page replacement completes separation between logical memory and physical memory â€“ large virtual memory can be provided on a smaller physical memory</li>
</ul>
<p>å®é™…ä¸Šä¸æ˜¯ç­‰åˆ°æ²¡æœ‰ç©ºé—²å¸§çš„æ—¶å€™è¿›è¡Œæ›¿æ¢ï¼Œæ“ä½œç³»ç»Ÿä¼šæå‰åš</p>
<p><img src="./assets/image-20241127143706318.png" alt="image-20241127143706318" style="zoom: 33%;" /></p>
<h4 id="page-replacement-algorithms">Page Replacement Algorithms<a class="headerlink" href="#page-replacement-algorithms" title="Permanent link">&para;</a></h4>
<p>Want lowest page-fault rate æœ€ä½ç¼ºé¡µç‡</p>
<p>è¾“å…¥ï¼šå¼•ç”¨ä¸² reference stringï¼›è¾“å‡ºï¼šç¼ºé¡µçš„æ¬¡æ•° number of page faults on that string</p>
<blockquote>
<p>[!NOTE]</p>
<p><strong>å†…å­˜æ— é™å¤§ï¼Œç¼ºé¡µä¼šæ— çº¿è¶‹è¿‘äºé›¶å—</strong>ï¼Ÿä¸ä¼šï¼Œè¶‹äºä¸€ä¸ªå¸¸æ•°ï¼Œç¼ºé¡µæ¬¡æ•°éšç€å†…å­˜å˜å¤§ä¼šå˜å°</p>
</blockquote>
<h5 id="first-in-first-out-fifo-algorithm">First-In-First-Out (FIFO) Algorithm<a class="headerlink" href="#first-in-first-out-fifo-algorithm" title="Permanent link">&para;</a></h5>
<p>å…ˆè¿›å…ˆå‡ºç®—æ³•</p>
<p>Belady</p>
<p><img src="./assets/image-20241127145037198.png" alt="image-20241127145037198" style="zoom: 40%;" /></p>
<h5 id="optimal-algorithm">Optimal Algorithm<a class="headerlink" href="#optimal-algorithm" title="Permanent link">&para;</a></h5>
<p><strong>æœ€ä½³ç½®æ¢ç®—æ³•</strong> ç¼ºé¡µæ¬¡æ•°æœ€å° =&gt; optimal</p>
<p>æ›¿æ¢å°†æ¥æœ€é•¿ä¸ä½¿ç”¨çš„ page Replace page that will not be used for longest period of time</p>
<p><img src="./assets/image-20241127145836832.png" alt="image-20241127145836832" style="zoom:40%;" /></p>
<h5 id="least-recently-used-lru-algorithm">Least Recently Used (LRU) Algorithm<a class="headerlink" href="#least-recently-used-lru-algorithm" title="Permanent link">&para;</a></h5>
<p><strong>æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨</strong> ç½®æ¢ç®—æ³•ï¼šé€‰æ‹©å†…å­˜ä¸­æœ€ä¹…æ²¡æœ‰å¼•ç”¨çš„é¡µé¢è¢«ç½®æ¢ã€‚è¿™æ˜¯å±€éƒ¨æ€§åŸç†çš„åˆç†è¿‘ä¼¼ï¼Œæ€§èƒ½æ¥è¿‘æœ€ä½³ç®—æ³•ã€‚ä½†ç”±äºéœ€è¦è®°å½•é¡µé¢ä½¿ç”¨æ—¶é—´ï¼Œç¡¬ä»¶å¼€é”€å¤ªå¤§ã€‚</p>
<p><img src="./assets/image-20241127145959957.png" alt="image-20241127145959957" style="zoom:40%;" /></p>
<h5 id="lru-algorithm">LRU Algorithm<a class="headerlink" href="#lru-algorithm" title="Permanent link">&para;</a></h5>
<p>ä»¥ä¸‹ä¸‰ç§æ–¹æ³•éƒ½æ˜¯é€šè¿‡ç¡¬ä»¶å®ç°</p>
<p>Counter implementationï¼šæ¯æ¬¡å¼•ç”¨æ—¶é’Ÿ+1</p>
<p>Stack implementationï¼šè®¾ç½®ä¸€ä¸ªç‰¹æ®Šçš„æ ˆï¼ŒæŠŠè¢«è®¿é—®çš„é¡µé¢ç§»åˆ°æ ˆé¡¶ï¼Œäºæ˜¯æ ˆåº•çš„æ˜¯æœ€ä¹…æœªä½¿ç”¨é¡µé¢ã€‚</p>
<p>ç§»ä½å¯„å­˜å™¨ : è¢«è®¿é—®æ—¶å·¦è¾¹æœ€é«˜ä½ç½® 1 ï¼Œå®šæœŸå³ç§»å¹¶ä¸”æœ€é«˜ä½è¡¥ 0 ï¼Œäºæ˜¯å¯„å­˜å™¨æ•°å€¼æœ€å°çš„æ˜¯æœ€ä¹…æœªä½¿ç”¨é¡µé¢ã€‚ (AdditionalReference-Bits Algorithm é™„åŠ å¼•ç”¨ä½ç®—æ³• )</p>
<h5 id="lru-approximation-algorithms">LRU Approximation Algorithms<a class="headerlink" href="#lru-approximation-algorithms" title="Permanent link">&para;</a></h5>
<p>åˆå« second chance algorithmï¼Œclock algorithm</p>
<p>reference bit</p>
<ul>
<li>å½“è®¿é—®åˆ° pageï¼Œbit = 1ï¼Œå‘¨æœŸå†…è¢«è®¿é—®è¿‡è‡³å°‘ä¸€æ¬¡ï¼›bit = 0ï¼Œè¾ƒé•¿æ—¶é—´å†…æ²¡è¢«è®¿é—®è¿‡ï¼Œæ›¿æ¢å‡ºå»</li>
</ul>
<p>second chance</p>
<h5 id="enhanced-second-chance-algorithm">Enhanced second chance Algorithm<a class="headerlink" href="#enhanced-second-chance-algorithm" title="Permanent link">&para;</a></h5>
<p>ä½¿ç”¨å¼•ç”¨ä½å’Œä¿®æ”¹ä½ (reference bit, modified bit)ï¼Œå¼•ç”¨è¿‡æˆ–è€…ä¿®æ”¹è¿‡ç½®ä¸º 1 è®°å½•æ¯ä¸ªé¡µé¢è¢«å¼•ç”¨çš„æ¬¡æ•°</p>
<p>æ·˜æ±°æ¬¡åºï¼š(0,0) &gt; (0,1) &gt; (1,0) &gt; (1,1)</p>
<p>åŸºæœ¬æ€æƒ³ï¼š</p>
<p>ç¬¬ 1 è½®æ‰«æ : æŸ¥æ‰¾ (0, 0) ï¼Œä¸åšä¿®æ”¹
ç¬¬ 2 è½®æ‰«æ : æŸ¥æ‰¾ (0, 1) ï¼Œä¿®æ”¹è®¿é—®ä½ä¸º 0 
ç¬¬ 3 è½®æ‰«æ : æŸ¥æ‰¾ (0, 0) ï¼Œä¸åšä¿®æ”¹
ç¬¬ 4 è½®æ‰«æ : æŸ¥æ‰¾ (0, 1)</p>
<h5 id="counting-based-algorithms">Counting-based Algorithms<a class="headerlink" href="#counting-based-algorithms" title="Permanent link">&para;</a></h5>
<p>Keep a counter of the number of references that have been made to each page </p>
<ul>
<li><strong>LFU Algorithm</strong>: replaces page with smallest count ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„é¡µé¢ç½®æ¢å‡ºå»</li>
<li><strong>MFU Algorithm(most frequently used)</strong>: based on the argument that the page with the smallest count was probably just brought in and has yet to be used ä½¿ç”¨æ¬¡æ•°æœ€å¤šçš„é¡µé¢ç½®æ¢å‡ºå»</li>
</ul>
<h5 id="page-buffering-algorithm">Page Buffering Algorithm é¡µé¢ç¼“å†²ç®—æ³•<a class="headerlink" href="#page-buffering-algorithm" title="Permanent link">&para;</a></h5>
<p>é€šè¿‡è¢«ç½®æ¢é¡µé¢çš„ç¼“å†²ï¼Œæœ‰æœºä¼šæ‰¾å›åˆšè¢«ç½®æ¢çš„é¡µé¢</p>
<p>è¢«ç½®æ¢é¡µé¢çš„é€‰æ‹©å’Œå¤„ç†ï¼šç”¨ FIFO ç®—æ³•é€‰æ‹©è¢«ç½®æ¢é¡µï¼ŒæŠŠè¢«ç½®æ¢çš„é¡µé¢æ”¾å…¥ä¸¤ä¸ªé“¾è¡¨ä¹‹ä¸€ï¼Œå¦‚æœé¡µé¢æœªè¢«ä¿®æ”¹ï¼Œå°±å°†å…¶å½’å…¥åˆ° <strong>ç©ºé—²é¡µé¢é“¾è¡¨</strong> çš„æœ«å°¾ï¼Œå¦åˆ™å°†å…¶å½’å…¥åˆ° <strong>å·²ä¿®æ”¹é¡µé¢é“¾è¡¨</strong>ã€‚ </p>
<p>éœ€è¦è°ƒå…¥æ–°çš„é¡µé¢æ—¶ï¼šå°†æ–°é¡µé¢å†…å®¹è¯»å…¥åˆ°ç©ºé—²é¡µé¢é“¾è¡¨çš„ç¬¬ä¸€é¡¹æ‰€æŒ‡çš„é¡µé¢ï¼Œç„¶åå°†ç¬¬ä¸€é¡¹åˆ é™¤ã€‚ 
ç©ºé—²é¡µé¢å’Œå·²ä¿®æ”¹é¡µé¢ï¼Œä»åœç•™åœ¨å†…å­˜ä¸­ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœè¿™äº›é¡µé¢è¢«å†æ¬¡è®¿é—®ï¼Œè¿™äº›é¡µé¢è¿˜åœ¨å†…å­˜ä¸­ã€‚
å½“å·²ä¿®æ”¹é¡µé¢è¾¾åˆ°ä¸€å®šæ•°ç›®åï¼Œå†å°†å®ƒä»¬ä¸€èµ·è°ƒå‡ºåˆ°å¤–å­˜ï¼Œç„¶åå°†å®ƒä»¬å½’å…¥ç©ºé—²é¡µé¢é“¾è¡¨ã€‚</p>
<p>å®é™…ä¸­ï¼ŒWindows ã€ Linux é¡µé¢ç½®æ¢ç®—æ³•æ˜¯åŸºäº <strong>é¡µé¢ç¼“å†²ç®—æ³•</strong></p>
<h3 id="allocation-of-frames">Allocation of Frames<a class="headerlink" href="#allocation-of-frames" title="Permanent link">&para;</a></h3>
<p>åˆ†é…ï¼šEach process needs minimum number of pages ï¼ usually determined by computer architecture</p>
<h4 id="fixed-allocation">Fixed Allocation å›ºå®šåˆ†é…<a class="headerlink" href="#fixed-allocation" title="Permanent link">&para;</a></h4>
<p>Equal allocation ç­‰åˆ†</p>
<p>Proportional allocation â€“ Allocate according to the size of process æŒ‰è¿›ç¨‹æ¯”ä¾‹åˆ†é…</p>
<h4 id="priority-allocation">Priority Allocation ä¼˜å…ˆçº§åˆ†é…<a class="headerlink" href="#priority-allocation" title="Permanent link">&para;</a></h4>
<p>Use a proportional allocation scheme using priorities rather than size</p>
<p>If process Pi generates a page fault,</p>
<ul>
<li>select for a replacement one of its frames</li>
<li>select for replacement a frame from a process with a lower priority number</li>
</ul>
<h4 id="global-vs-local-allocation">Global vs. Local Allocation<a class="headerlink" href="#global-vs-local-allocation" title="Permanent link">&para;</a></h4>
<p><strong>Global replacement</strong> å…¨å±€æ›¿æ¢â€“ process selects a replacement frame from the set of all frames; one process can take a frame from another</p>
<p><strong>Local replacement</strong> æœ¬åœ°æ›¿æ¢â€“ each process selects from only its own set of allocated frames</p>
<p>Problem with global replacement é—®é¢˜: unpredictable page-fault rate. Cannot control its own page-fault rate. </p>
<p>More common Problem with local replacement: free frames are not available for others. â€“ Low throughput</p>
<p>å›ºå®šåˆ†é…ã€å…¨å±€ç½®æ¢ä¸èƒ½ç»„åˆä½¿ç”¨</p>
<h3 id="thrashing">Thrashing æŠ–åŠ¨ã€é¢ ç°¸<a class="headerlink" href="#thrashing" title="Permanent link">&para;</a></h3>
<blockquote>
<p>æ‰€æœ‰é¡µé¢ç½®æ¢ç­–ç•¥éƒ½å¯èƒ½å¼•èµ·æŠ–åŠ¨</p>
</blockquote>
<p>If a process does not have â€œenoughâ€ pages, the page-fault rate is very high. This leads to:</p>
<ul>
<li>low CPU utilization</li>
<li>Queuing at the paging device, the ready queue becomes empty</li>
<li>operating system thinks that it needs to increase the degree of multiprogramming</li>
<li>another process added to the system å¾ªç¯</li>
</ul>
<p><strong>Thrashing</strong>ï¼ša process is busy swapping pages in and out å¿™äºé¡µé¢æ›¿æ¢ï¼Œå†…å­˜ä¸å¤Ÿ</p>
<p>Thrashing è§£å†³æ–¹æ³• : </p>
<ul>
<li>å¢åŠ ç‰©ç†å†…å­˜</li>
<li>ä¼˜åŒ–é¡µé¢ç½®æ¢ç®—æ³•</li>
<li>åœ¨ cpu è°ƒåº¦ä¸­å¼•å…¥å·¥ä½œé›†ç®—æ³•</li>
<li>åŠ¨æ€è°ƒæ•´è¿›ç¨‹çš„å†…å­˜åˆ†é…</li>
<li>é™åˆ¶å¹¶å‘è¿›ç¨‹æ•°</li>
<li>å†…å­˜å‹ç¼©</li>
</ul>
<hr />
<h4 id="demand-paging-and-thrashing">Demand Paging and Thrashing<a class="headerlink" href="#demand-paging-and-thrashing" title="Permanent link">&para;</a></h4>
<p>Why does demand paging work?
Locality model å±€éƒ¨æ€§
- Process migrates from one locality to another
- Localities may overlap</p>
<p>Why does thrashing occur? </p>
<ul>
<li>size of locality &gt; total memory size</li>
</ul>
<p>To limit the effect of thrashing:  local replacement algo cannot steal frames from other processes. But queue in page device 
increases effective access time. </p>
<p>To prevent thrashing: allocate memory to accommodate its locality</p>
<h4 id="working-set-model">Working-Set Model å·¥ä½œé›†<a class="headerlink" href="#working-set-model" title="Permanent link">&para;</a></h4>
<p>â–³ â‰¡ working-set window: a fixed number of page references</p>
<p>m = total available frames</p>
<p>WSSi (working set size of Process Pi ) = total number of pages referenced in the most recent  (varies </p>
<p>in time)</p>
<p>D = WSSi ï¼ˆtotal demand frames for all processes in the system</p>
<p>if D &gt; mï¼ŒThrashing</p>
<p>Policy if D &gt; m, then suspend one of the processes</p>
<p><img alt="image-20241202112051748" src="assets/image-20241202112051748.png" /></p>
<h4 id="page-fault-frequency-scheme">Page-Fault Frequency Scheme<a class="headerlink" href="#page-fault-frequency-scheme" title="Permanent link">&para;</a></h4>
<p>Establish â€œacceptableâ€ page-fault rate for each process è°ƒèŠ‚ frame æ•°æ§åˆ¶ page fault</p>
<ul>
<li>
<p>If actual rate too low, process loses frame</p>
</li>
<li>
<p>If actual rate too high, process gains frame</p>
</li>
</ul>
<p><img src="./assets/image-20241202101952067.png" alt="image-20241202101952067" style="zoom:50%;" /></p>
<h3 id="memory-mapped-files">å†…å­˜æ˜ å°„æ–‡ä»¶ Memory-Mapped Files<a class="headerlink" href="#memory-mapped-files" title="Permanent link">&para;</a></h3>
<p>Simplifies file access by treating file I/O through memory rather than <strong>read() write()</strong> system calls</p>
<p>Also allows several processes to map the same file allowing the pages in memory to be shared</p>
<p><img src="./assets/image-20241202102258495.png" alt="image-20241202102258495" style="zoom:50%;" /></p>
<p>å†…å­˜æ˜ å°„æ–‡ä»¶å¯ä»¥é€šè¿‡ä¿®æ”¹å†…å­˜ä¸­çš„æ•°æ®æ¥å®ç°å¯¹æ–‡ä»¶çš„å†™æ“ä½œ</p>
<h3 id="allocating-kernel-memory">Allocating Kernel Memory<a class="headerlink" href="#allocating-kernel-memory" title="Permanent link">&para;</a></h3>
<p>reated differently from user memory</p>
<p>Often allocated from a free-memory pool</p>
<ul>
<li>
<p>Kernel requests memory for structures of varying sizes â€“ needs to reduce fragmentation</p>
</li>
<li>
<p>Some kernel memory needs to be contiguous (certain h/w device interacts with contiguous physical memory)</p>
</li>
</ul>
<p>Therefore, many systems do NOT utilize paging for kernel code and data.</p>
<h4 id="buddy-system">Buddy System ï¼ˆä¼™ä¼´ç³»ç»Ÿï¼‰<a class="headerlink" href="#buddy-system" title="Permanent link">&para;</a></h4>
<p>Allocates memory from fixed-size segment consisting of physically contiguous pages</p>
<p>Memory allocated using <strong>power-of-2 allocator</strong> 32 64 128 256</p>
<p>Linux å†…å­˜ç®¡ç†å­ç³»ç»Ÿé‡‡ç”¨åŸºäºå†…å­˜åŒºåŸŸ <strong>ä¼™ä¼´ç®—æ³•</strong> æ¥ç®¡ç†ç‰©ç†é¡µå¸§çš„åˆ†é…å’Œå›æ”¶</p>
<h4 id="slab-allocator">Slab Allocator<a class="headerlink" href="#slab-allocator" title="Permanent link">&para;</a></h4>
<p><strong>Slab</strong> is one or more physically contiguous pages-- æ˜¯ä¸€ä¸ªé¢„åˆ†é…çš„å†…å­˜æ± ï¼ŒåŒ…å«å¤šä¸ªç›¸åŒå¤§å°çš„å¯¹è±¡ </p>
<p><strong>Cache</strong> consists of one or more slabs</p>
<ul>
<li>
<p>Single cache for each unique kernel data structure</p>
</li>
<li>
<p>Each cache filled with <strong>objects</strong> â€“ instantiations of the data structure</p>
</li>
</ul>
<p>When cache created, filled with objects marked as <strong>free</strong></p>
<p>When structures stored, objects marked as <strong>used</strong></p>
<ul>
<li>
<p>If slab is full of used objects, next object allocated from empty slab</p>
</li>
<li>
<p>If no empty slabs, new slab allocated</p>
</li>
</ul>
<p><strong>Benefits</strong> include no fragmentation, fast memory request satisfaction</p>
<p>ä¸»è¦ç›®çš„ï¼šä¸ºç”³è¯·ä¸è¶³ä¸€é¡µå¸§çš„å°å¯¹è±¡ï¼ˆç¼“å†²ï¼‰ç”³è¯·ä¸é‡Šæ”¾ç‰©ç†å†…å­˜ï¼Œä»¥å‡å°‘ç¢ç‰‡</p>
<h4 id="other-issues-prepaging">Other Issues â€“ Prepaging ( é¢„è°ƒé¡µ )<a class="headerlink" href="#other-issues-prepaging" title="Permanent link">&para;</a></h4>
<p>To reduce the large number of page faults that occurs at process startup</p>
<ul>
<li>Prepage all or some of the pages a process will need, before they are referenced</li>
</ul>
<h4 id="other-issues-page-size">Other Issues â€“ Page Size<a class="headerlink" href="#other-issues-page-size" title="Permanent link">&para;</a></h4>
<p>Page size selection must take into consideration:</p>
<ul>
<li>
<p>Fragmentation -&gt; small page size</p>
</li>
<li>
<p>table size -&gt; large page size</p>
</li>
<li>
<p>I/O times -&gt; large page size</p>
</li>
<li>
<p>Locality -&gt; small page size, accurate locality</p>
</li>
</ul>
<h4 id="other-issues-tlb-reach-tlb">Other Issues â€“ TLB Reachï¼ˆ TLB èŒƒå›´ï¼‰<a class="headerlink" href="#other-issues-tlb-reach-tlb" title="Permanent link">&para;</a></h4>
<p>TLB Reach - The amount of memory accessible from the TLB å¢å¤§ TLB èŒƒå›´å‡å°‘ç¼ºé¡µ</p>
<p>TLB Reach = (TLB Size) âœ– (Page Size)</p>
<p>Increase the Page Size</p>
<ul>
<li>This may lead to an increase in fragmentation as not all applications require a large page size </li>
</ul>
<p>Provide Multiple Page Sizes</p>
<ul>
<li>This allows applications that require larger page sizes the opportunity to use them without an increase in fragmentation</li>
</ul>
<h4 id="other-issues-program-structure">Other Issues â€“ Program Structure<a class="headerlink" href="#other-issues-program-structure" title="Permanent link">&para;</a></h4>
<p>ç¼ºé¡µæ¬¡æ•°å’Œç¨‹åºæœ‰å…³</p>
<p>EGï¼ŒæŒ‰åˆ—è®¿é—®å’ŒæŒ‰è¡Œè®¿é—®</p>
<p><img src="./assets/image-20241202103517964.png" alt="image-20241202103517964" style="zoom: 33%;" /></p>
<h3 id="other-considerations">Other Considerations<a class="headerlink" href="#other-considerations" title="Permanent link">&para;</a></h3>
<p>ä¸é‡è¦ è¿‡</p>
<h3 id="operating-system-examples">Operating-System Examples<a class="headerlink" href="#operating-system-examples" title="Permanent link">&para;</a></h3>
<p>ä¸é‡è¦ è¿‡</p>
<h2 id="file-system-interface">File-System Interface<a class="headerlink" href="#file-system-interface" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>è§£é‡Šæ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½
æè¿°æ–‡ä»¶ç³»ç»Ÿçš„æ¥å£
è®¨è®ºæ–‡ä»¶ç³»ç»Ÿè®¾è®¡æƒè¡¡ï¼ŒåŒ…æ‹¬è®¿é—®æ–¹æ³•ã€æ–‡ä»¶å…±äº«ã€æ–‡ä»¶é”å®šå’Œç›®å½•ç»“æ„
æ¢ç´¢æ–‡ä»¶ç³»ç»Ÿä¿æŠ¤</p>
</blockquote>
<h3 id="file-concept">File Concept<a class="headerlink" href="#file-concept" title="Permanent link">&para;</a></h3>
<h4 id="file-system">File system<a class="headerlink" href="#file-system" title="Permanent link">&para;</a></h4>
<p>ä»€ä¹ˆæ˜¯æ–‡ä»¶ç³»ç»Ÿï¼ŸThe way that controls how data is stored and retrieved in a storage medium.</p>
<ul>
<li>File naming æ–‡ä»¶å‘½å</li>
<li>Where files are placed ä½ç½®</li>
<li>Metadata å’Œæ–‡ä»¶å†…å®¹ç›¸å…³çš„ç®¡ç†ä¿¡æ¯</li>
<li>Access rules è®¿é—®è§„åˆ™</li>
</ul>
<h4 id="file-concept_1">File Concept<a class="headerlink" href="#file-concept_1" title="Permanent link">&para;</a></h4>
<p>ä»€ä¹ˆæ˜¯æ–‡ä»¶ï¼Ÿ</p>
<ul>
<li>Contiguous logical address space. A sequence of bits, bytes, lines, or records. The meaning is defined by the creator and user. è¿ç»­çš„é€»è¾‘åœ°å€ç©ºé—´ï¼Œä¸€äº›ä½ã€å­—èŠ‚ã€è¡Œæˆ–è®°å½•çš„åºåˆ—</li>
<li>åœ¨ç”¨æˆ·è¿›è¡Œè¾“å…¥ã€è¾“å‡ºä¸­ï¼Œæ–‡ä»¶æ˜¯åŸºæœ¬å•ä½</li>
</ul>
<p>æ–‡ä»¶ç±»å‹ Types: </p>
<p>Dataï¼šnumeric, character, binary
Programï¼šSource, Object, Executable</p>
<h4 id="file-structure">File Structure<a class="headerlink" href="#file-structure" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>None æ— ç»“æ„æ–‡ä»¶ - sequence of words, bytes</p>
</li>
<li>
<p>Simple record structure</p>
</li>
<li>
<p>Lines </p>
</li>
<li>
<p>Fixed length å®šé•¿è®°å½•</p>
</li>
<li>
<p>Variable length å˜é•¿è®°å½•</p>
</li>
<li>
<p>Complex Structures</p>
</li>
<li>
<p>Formatted documentï¼šé¡ºåºæ–‡ä»¶ã€ç´¢å¼•æ–‡ä»¶ã€ç´¢å¼•é¡ºåºã€æ•£åˆ—</p>
</li>
<li>
<p>Relocatable load file   </p>
</li>
<li>
<p>Can simulate last two with first method by inserting appropriate control characters
  é€šè¿‡æ’å…¥é€‚å½“çš„æ§åˆ¶å­—ç¬¦ï¼Œå¯ä»¥ç”¨ç¬¬ä¸€ç§æ–¹æ³•æ¨¡æ‹Ÿæœ€åä¸¤ç§</p>
</li>
<li>
<p>Who decides:</p>
</li>
<li>
<p>Operating system æ“ä½œç³»ç»Ÿå†³å®šæ–‡ä»¶</p>
</li>
<li>Program ç¨‹åº</li>
</ul>
<h4 id="operations-file-attributes">Operations &amp; file attributes<a class="headerlink" href="#operations-file-attributes" title="Permanent link">&para;</a></h4>
<p>File is an abstract data type æŠ½è±¡æ•°æ®ç±»å‹</p>
<p><strong>Create</strong> â€“ ä¸ºæ–°æ–‡ä»¶åˆ†é…å¤–å­˜ç©ºé—´ + åœ¨ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªç›®å½•é¡¹</p>
<p><strong>Write</strong> â€“ define a pointerï¼Œæ¯å‘ç”Ÿå†™æ“ä½œï¼Œæ›´æ–°å†™æŒ‡é’ˆ</p>
<p><strong>Read</strong> â€“ use the same pointer
    Per-process current file-position pointer</p>
<p><strong>Reposition within file</strong> (<strong>file seek</strong>) - æ–‡ä»¶è·³è½¬åˆ°ç‰¹å®šä½ç½®å¼€å§‹è¯»å†™</p>
<p><strong>Delete</strong> - åˆ é™¤æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹å’Œæ–‡ä»¶æ§åˆ¶å—ï¼ˆFCBï¼‰ï¼Œå›æ”¶ç£ç›˜ç©ºé—´å’Œå†…å­˜ç¼“å†²åŒº</p>
<p><strong>Truncate</strong> - æ€ä¹ˆæˆªæ–­æ–‡ä»¶</p>
<p><strong>Open</strong>(Fi) â€“ search the directory structure on disk for entry F<sub>i</sub>, and move the content of entry to memory</p>
<p><strong>Close</strong> (Fi) â€“ move the content of entry F<sub>i</sub> in memory to directory structure on disk</p>
<hr />
<p>æ–‡ä»¶å±æ€§</p>
<p><strong>Name</strong> â€“ only information kept in human-readable form æ–‡ä»¶åå”¯ä¸€</p>
<p><strong>Identifier</strong> æ–‡ä»¶æ ‡è¯†ç¬¦ â€“ unique tag (number) identifies file within file system</p>
<p><strong>Type</strong> ç±»å‹ â€“ needed for systems that support different types</p>
<p><strong>Location</strong> â€“ pointer to file location on device</p>
<p><strong>Size</strong> â€“ current file size</p>
<p><strong>Protection</strong> â€“ controls who can do reading, writing, executing</p>
<p><strong>Time, date, and user identification</strong> â€“ data for protection, security, and usage monitoring</p>
<p>Information about files are kept in the <span style="color:#CC0000;"> directory structure </span>, which is maintained on the disk</p>
<h4 id="open-files">Open files<a class="headerlink" href="#open-files" title="Permanent link">&para;</a></h4>
<p>æ–‡ä»¶æè¿°ç¬¦æ˜¯å­˜å‚¨åœ¨è¿›ç¨‹çš„ <code>files_struct</code> ç»“æ„ä¸­çš„ <code>fd</code>ï¼ˆæ–‡ä»¶æè¿°ç¬¦è¡¨ï¼‰æ•°ç»„çš„ä¸‹æ ‡ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ªå·²æ‰“å¼€çš„æ–‡ä»¶</p>
<p><code>Open()</code> <strong>system call</strong> returns a pointer to an entry in the <strong>open-file table</strong></p>
<p>Per-process table æ¯ä¸ªè¿›ç¨‹çš„æ‰“å¼€æ–‡ä»¶è¡¨: maintained by the kernel; unique for each</p>
<ul>
<li>Current file pointer</li>
<li>Access rights</li>
<li>â€¦</li>
</ul>
<p>System-wide table å…¨å±€ table: maintained by the kernel</p>
<ul>
<li>Open count è®¡æ•°</li>
<li>locationï¼Ÿæ–‡ä»¶ç£ç›˜ä½ç½®</li>
<li>...</li>
</ul>
<hr />
<p>Several pieces of data are needed to manage open files:</p>
<p><strong>File pointer</strong>:  pointer to last read/write location, per process that has the file open</p>
<p><strong>File-open count</strong>: counter of number of times a file is open â€“ to allow removal of data from open-file table when last processes closes it è®¿é—®è®¡æ•°å€¼</p>
<p><strong>Disk location of the file</strong>: cache of data access information â€“ system doesnâ€™t need to read it from disk for every operation. æ–‡ä»¶ç‰©ç†åœ°å€</p>
<p><strong>Access rights</strong>: <em>per-process</em> access mode information</p>
<p>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå±äºå†…å­˜ç´¢å¼•ç»“ç‚¹è€Œç£ç›˜ç´¢å¼•ç»“ç‚¹æ²¡æœ‰çš„å†…å®¹æ˜¯ è®¿é—®è®¡æ•°å€¼</p>
<blockquote>
<p>[!NOTE]</p>
<p><strong>æ–‡ä»¶æè¿°ç¬¦ FD &amp; æ–‡ä»¶æ§åˆ¶å— FCBï¼Ÿ</strong></p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>æ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰</th>
<th>æ–‡ä»¶æ§åˆ¶å—ï¼ˆFCBï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å®šä¹‰å±‚æ¬¡</strong></td>
<td>ç”¨æˆ·è¿›ç¨‹ä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„æ¥å£</td>
<td>æ–‡ä»¶ç³»ç»Ÿå†…éƒ¨çš„ç®¡ç†ç»“æ„</td>
</tr>
<tr>
<td><strong>ä½œç”¨</strong></td>
<td>æ ‡è¯†æ‰“å¼€çš„æ–‡ä»¶ï¼Œç”¨äºæ–‡ä»¶æ“ä½œ</td>
<td>å­˜å‚¨æ–‡ä»¶å…ƒä¿¡æ¯ï¼Œç®¡ç†æ–‡ä»¶å†…å®¹</td>
</tr>
<tr>
<td><strong>ä¸è¿›ç¨‹çš„å…³ç³»</strong></td>
<td>è¿›ç¨‹ç›¸å…³ï¼Œå±äºè¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦è¡¨</td>
<td>ç‹¬ç«‹äºè¿›ç¨‹ï¼Œå…¨å±€å…±äº«</td>
</tr>
<tr>
<td><strong>å­˜åœ¨å½¢å¼</strong></td>
<td>æ•´æ•°å€¼ï¼Œæ“ä½œç³»ç»Ÿåˆ†é…å’Œç®¡ç†</td>
<td>æ•°æ®ç»“æ„ï¼Œä½äºå†…å­˜å’Œç£ç›˜</td>
</tr>
<tr>
<td><strong>å­˜å‚¨çš„ä¿¡æ¯</strong></td>
<td>æ‰“å¼€çš„æ–‡ä»¶æ ‡è¯†ç¬¦</td>
<td>æ–‡ä»¶å…ƒæ•°æ®ï¼ˆå¤§å°ã€æƒé™ã€ä½ç½®ç­‰ï¼‰</td>
</tr>
<tr>
<td><strong>å…¸å‹æ“ä½œ</strong></td>
<td>ç³»ç»Ÿè°ƒç”¨ <code>open()</code>ã€<code>read()</code>ã€<code>write()</code></td>
<td>æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼Œæ¶‰åŠæ–‡ä»¶å®šä½ä¸ç®¡ç†</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>æ–‡ä»¶æè¿°ç¬¦</strong> æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™ç”¨æˆ·è¿›ç¨‹çš„ç®€åŒ–æ–‡ä»¶æ¥å£ï¼Œç”¨äºæ–‡ä»¶æ“ä½œçš„å¿«æ·æ ‡è¯†ã€‚</li>
<li><strong>æ–‡ä»¶æ§åˆ¶å—</strong> æ˜¯æ–‡ä»¶ç³»ç»Ÿç”¨äºå­˜å‚¨æ–‡ä»¶ä¿¡æ¯å’Œç®¡ç†æ–‡ä»¶çš„åº•å±‚ç»“æ„ï¼Œä½“ç°äº†æ–‡ä»¶çš„å…¨å±€å±æ€§å’ŒçŠ¶æ€ã€‚</li>
</ul>
<p>ä¸¤è€…äº’ç›¸å…³è”ä½†å±‚æ¬¡ä¸åŒï¼šæ–‡ä»¶æè¿°ç¬¦é€šè¿‡æ“ä½œç³»ç»Ÿå†…éƒ¨ç»“æ„ï¼ˆå¦‚æ–‡ä»¶æè¿°ç¬¦è¡¨ã€æ‰“å¼€æ–‡ä»¶è¡¨ç­‰ï¼‰æœ€ç»ˆæ˜ å°„åˆ°æ–‡ä»¶æ§åˆ¶å—ï¼Œä»è€Œå®Œæˆå…·ä½“çš„æ–‡ä»¶æ“ä½œã€‚</p>
</blockquote>
<h3 id="access-methods">Access Methods<a class="headerlink" href="#access-methods" title="Permanent link">&para;</a></h3>
<p><img src="./assets/image-20241204151552427.png" alt="image-20241204151552427" style="zoom:50%;" /></p>
<p>é¡ºåºè®¿é—®</p>
<p><img src="./assets/image-20241204151629460.png" alt="image-20241204151629460" style="zoom:50%;" /></p>
<p>ç›´æ¥è®¿é—®</p>
<h3 id="directory-structure">ç›®å½•ç»“æ„ Directory Structure<a class="headerlink" href="#directory-structure" title="Permanent link">&para;</a></h3>
<p>The directory can be viewed as <strong>a symbol table</strong> that translates file names into their file control blocks.</p>
<p>FCB æ–‡ä»¶æ§åˆ¶å—</p>
<p>A collection of nodes containing (management)  information about all files</p>
<p>ç›®å½•ç‹¬ç«‹äºæ‰€æœ‰æ–‡ä»¶ä¹‹å¤–çš„æ–‡ä»¶ï¼Œæœ‰ç»“æ„ã€æ¯ä¸ª entry å°±æ˜¯ä¸€ä¸ª FCBï¼Œæ¯ä¸ª FCB å¯¹åº”äºä¸€ä¸ªæ–‡ä»¶</p>
<p>Both the directory structure and the files reside on disk.</p>
<h4 id="both-the-directory-structure-and-the-files-reside-on-disk">Both the directory structure and the files reside on disk<a class="headerlink" href="#both-the-directory-structure-and-the-files-reside-on-disk" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241204153053743.png" alt="image-20241204153053743" style="zoom:50%;" /></p>
<p>The directory records information about the files in the system â€“ such as name, location, size and type.</p>
<h4 id="operations-performed-on-directory">Operations Performed on Directory<a class="headerlink" href="#operations-performed-on-directory" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241204153144630.png" alt="image-20241204153144630" style="zoom:50%;" /></p>
<h4 id="_32">ç›®å½•ä½œç”¨<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<p><strong>Efficiency</strong> â€“ locating a file quickly</p>
<p><strong>Naming</strong> â€“ convenient to users</p>
<ol>
<li>Two users can have same name for different files</li>
<li>The same file can have several different names</li>
</ol>
<p><strong>Grouping</strong> â€“ logical grouping of files by properties, (e.g., all Java programs, all games, â€¦)</p>
<h4 id="single-level-directory">Single-Level Directory<a class="headerlink" href="#single-level-directory" title="Permanent link">&para;</a></h4>
<p>ä¸ºæ‰€æœ‰ç”¨æˆ·åªæä¾›ä¸€çº§ç›®å½•ï¼Œä¸æ–¹ä¾¿ï¼Œå‘½åã€åˆ†ç»„é—®é¢˜</p>
<p><img src="./assets/image-20241204153539634.png" alt="image-20241204153539634" style="zoom:50%;" /></p>
<h4 id="two-level-directory">Two-Level Directory<a class="headerlink" href="#two-level-directory" title="Permanent link">&para;</a></h4>
<p>æ¯ä¸ªç”¨æˆ·æœ‰ä¸ªæ–‡ä»¶å¤¹</p>
<p><img src="./assets/image-20241204153630912.png" alt="image-20241204153630912" style="zoom:50%;" /></p>
<p>è¿˜æ˜¯ä¸å¤Ÿé«˜æ•ˆ</p>
<h4 id="tree-structured-directories">Tree-Structured Directories<a class="headerlink" href="#tree-structured-directories" title="Permanent link">&para;</a></h4>
<p>æ ‘çŠ¶ç›®å½•</p>
<p><img src="./assets/image-20241204154112574.png" alt="image-20241204154112574" style="zoom:50%;" /></p>
<p>ä»ä¸€ä¸ªç›®å½•åˆ°ä¸€ä¸ªå­ç›®å½•éœ€è¦ä¸€æ¬¡ç£ç›˜ I/O æ“ä½œ</p>
<p><img src="./assets/image-20241204154200785.png" alt="image-20241204154200785" style="zoom:50%;" /></p>
<h4 id="acyclic-graph-directories">Acyclic-Graph Directories<a class="headerlink" href="#acyclic-graph-directories" title="Permanent link">&para;</a></h4>
<p>æ— ç¯ç›®å½•</p>
<p>å…±äº«å­ç›®å½•æˆ–æ–‡ä»¶</p>
<ul>
<li>Requirement for file sharing</li>
<li>Have shared subdirectories and files</li>
</ul>
<p><img src="./assets/image-20241204154308896.png" alt="image-20241204154308896" style="zoom:50%;" /></p>
<p><img src="./assets/image-20241204154716519.png" alt="image-20241204154716519" style="zoom:50%;" /></p>
<p>å¦‚æœæœ‰ç¯çš„è¯ï¼Œä¼šæœ‰åˆ é™¤é—®é¢˜ï¼Œé‡å¤æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œreference countï¼ˆæ–‡ä»¶è¢«å¼•ç”¨æ¬¡æ•°ï¼‰&lt;&gt; 0 å³ä½¿æ²¡è¢«ä½¿ç”¨è¿‡</p>
<h4 id="soft-symbolic-link-vs-hard-link">Soft (Symbolic) Link vs. Hard Link<a class="headerlink" href="#soft-symbolic-link-vs-hard-link" title="Permanent link">&para;</a></h4>
<p>è½¯é“¾æ¥</p>
<p>A <strong>soft link</strong> is a <strong>separate file</strong> that points to the original file by storing its path. </p>
<p>The soft link <strong>has its own inode</strong> (FCB), and its data contains the path to the linked file, not the file data itself.</p>
<p>Soft links can <strong>span file systems</strong> since they are simply paths to other files.</p>
<p>å­—ç¬¦ä¸²æŒ‡å‘è·¯å¾„ï¼Œç±»ä¼¼å¿«æ·æ–¹å¼ï¼Œå¯ä»¥è·¨ç£ç›˜ï¼Œå¯ä»¥åœ¨æœ‰å¼•ç”¨çš„æ—¶å€™è¢«å…¶ä»–ç”¨æˆ·åˆ é™¤ï¼ˆé“¾æ¥æ— æ•ˆï¼‰</p>
<hr />
<p>A <strong>hard link</strong> is <strong>an additional name</strong> for an existing file. It increases the file's <em>link count</em>, which is a count of how many names (links) a file has.</p>
<p>Hard Link ç¡¬é“¾æ¥: Both the original file and the hard link point to the <strong>same inode</strong> (FCB).</p>
<p>Hard links cannot span file systems; one <strong>cannot</strong> create a hard link for a directory to <strong>prevent the creation of cycles</strong>.</p>
<p>æŒ‡é’ˆæŒ‡å‘ ç´¢å¼•å— -&gt; æ–‡ä»¶ï¼ˆFCB/inode ç´¢å¼•èŠ‚ç‚¹ï¼‰ï¼Œåªèƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­è¢«ä½¿ç”¨ï¼Œåœ¨æœ‰å¼•ç”¨çš„æ—¶å€™ä¸èƒ½è¢«å…¶ä»–ç”¨æˆ·åˆ é™¤</p>
<p><strong>Summary</strong>: hard link points to the actual data on the disk, while the symbolic link points to the path of the file ç¡¬é“¾æ¥æŒ‡å‘ç£ç›˜ä¸Šçš„å®é™…æ•°æ®ï¼Œè€Œç¬¦å·é“¾æ¥æŒ‡å‘æ–‡ä»¶çš„è·¯å¾„</p>
<ul>
<li>ä¸¤ç§é“¾æ¥æ–¹å¼éƒ½èƒ½è§£å†³ dangling pointer çš„é—®é¢˜</li>
<li>ç¡¬é“¾æ¥çš„æŸ¥æ‰¾é€Ÿåº¦æ¯”è½¯é“¾æ¥å¿«</li>
</ul>
<h3 id="file-system-mounting">File-System Mounting æ–‡ä»¶ç³»ç»ŸæŒ‚è½½<a class="headerlink" href="#file-system-mounting" title="Permanent link">&para;</a></h3>
<p>A file system must be <strong>mounted</strong> before it can be accessed æ–‡ä»¶ç³»ç»Ÿå¿…é¡»å…ˆ <strong>æŒ‚è½½</strong> æ‰èƒ½è®¿é—®</p>
<p>An un-mounted file system is mounted at a <strong>mount point</strong></p>
<p><img src="./assets/image-20241209104208477.png" alt="image-20241209104208477" style="zoom:50%;" /></p>
<blockquote>
<p>å¯ä»¥æŒ‚è½½åˆ° fred ä¸Šå—ï¼Ÿå¯ä»¥</p>
<p>åŸæ¥ fred ä¸‹çš„å†…å®¹ï¼ˆhelpï¼‰å¯ä»¥è®¿é—®å—ï¼Ÿè®¿é—®ä¸äº†ä½†è¿˜åœ¨ç›˜ä¸Š</p>
</blockquote>
<h4 id="mount-point">Mount Point<a class="headerlink" href="#mount-point" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241209104533983.png" alt="image-20241209104533983" style="zoom:50%;" /></p>
<h3 id="file-sharing">File Sharing<a class="headerlink" href="#file-sharing" title="Permanent link">&para;</a></h3>
<p>Sharing of files on multi-user systems is desirable</p>
<p>Sharing may be done through a protection scheme</p>
<p>On distributed systems, files may be shared across a network</p>
<p>Network File System (NFS) is a common distributed file-sharing method</p>
<h4 id="multiple-users">Multiple Users<a class="headerlink" href="#multiple-users" title="Permanent link">&para;</a></h4>
<p><strong>User ID</strong> s identify users, allowing permissions and protections to be per-user</p>
<p><strong>Group ID</strong> s allow users to be in groups, permitting group access rights</p>
<h4 id="remote-file-systems">Remote File Systems<a class="headerlink" href="#remote-file-systems" title="Permanent link">&para;</a></h4>
<h4 id="consistency-semantics">Consistency Semantics<a class="headerlink" href="#consistency-semantics" title="Permanent link">&para;</a></h4>
<h3 id="protection">Protection<a class="headerlink" href="#protection" title="Permanent link">&para;</a></h3>
<p>File owner/creator should be able to control:</p>
<ul>
<li>what can be done</li>
<li>by whom</li>
</ul>
<p>Types of accessï¼šRead, Write, Execute, Append, Delete, List</p>
<h4 id="access-lists-and-groups">Access Lists and Groups<a class="headerlink" href="#access-lists-and-groups" title="Permanent link">&para;</a></h4>
<p>Mode of access:  read, write, execute</p>
<p>æƒé™</p>
<p><img src="./assets/image-20241209105120787.png" alt="image-20241209105120787" style="zoom: 33%;" /></p>
<blockquote>
<p>d æŒ‡ç›®å½•</p>
<p>pbg æŒ‡ hard link çš„æ•°é‡</p>
</blockquote>
<h2 id="file-system-implementation">æ–‡ä»¶ç³»ç»Ÿå®ç° File system Implementation<a class="headerlink" href="#file-system-implementation" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>To describe the <strong>details</strong> of implementing local file systems and directory structures</p>
<p>To discuss <strong>block allocation</strong> and <strong>free-block algorithms</strong> and trade-offs</p>
<p>ç£ç›˜ç»“æ„</p>
<p>å†…å­˜ç»“æ„</p>
</blockquote>
<h3 id="file-system-structure">File-System Structure<a class="headerlink" href="#file-system-structure" title="Permanent link">&para;</a></h3>
<p>File structure</p>
<ul>
<li>Logical storage unit</li>
<li>Collection of related information</li>
</ul>
<p>File system resides on secondary storage (disks)</p>
<p>File system organized into <strong>layers</strong></p>
<p>æ–‡ä»¶çš„ç‰©ç†ç»“æ„ï¼šè¿ç»­åˆ†é…ã€é“¾æ¥åˆ†é…</p>
<p>ç‰©ç†æ–‡ä»¶çš„ç»„ç»‡æ–¹å¼æ˜¯ç”±æ“ä½œç³»ç»Ÿç¡®å®šçš„</p>
<p>ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿå¯ä»¥å­˜æ”¾æ–‡ä»¶çš„æ•°é‡å—é™äºæ–‡ä»¶æ§åˆ¶å—çš„æ•°é‡</p>
<h4 id="layered-file-system">Layered File System åˆ†å±‚<a class="headerlink" href="#layered-file-system" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241209111207161.png" alt="image-20241209111207161" style="zoom:50%;" /></p>
<h4 id="data-structures-used-to-implement-fs">Data Structures Used to Implement FS<a class="headerlink" href="#data-structures-used-to-implement-fs" title="Permanent link">&para;</a></h4>
<p><strong>Disk structures</strong> ç£ç›˜ç»“æ„</p>
<ul>
<li>ä¸»å¼•å¯¼è®°å½• Master Boot Recordï¼ˆMBRï¼‰</li>
<li>åˆ†åŒºè¡¨</li>
<li>
<p>Boot control block (per volume) å¼•å¯¼å—/å¯åŠ¨å·</p>
</li>
<li>
<p>Volume control block per volume (<strong>superblock</strong> in Unix) è¶…çº§å—</p>
</li>
<li>Directory structure per file system ç›®å½•</li>
<li>
<p>Per-file FCB (<strong>inode</strong> in Unix) æ–‡ä»¶æ§åˆ¶å—</p>
</li>
<li>
<p>æ–‡ä»¶ç³»ç»Ÿç©ºé—²å—æ¯</p>
</li>
<li>
<p>å…¶ä»–æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶</p>
</li>
</ul>
<p><strong>In-memory structures</strong></p>
<ul>
<li>In-memory mount table about each mounted volume å…³äºæ¯ä¸ªå·²å®‰è£…å·çš„å†…å­˜å®‰è£…è¡¨</li>
<li>Directory cache</li>
<li>System-wide open-file table</li>
<li>Per-process open-file table</li>
</ul>
<h4 id="fcb">FCB<a class="headerlink" href="#fcb" title="Permanent link">&para;</a></h4>
<p><strong>File control block</strong> â€“ storage structure consisting of information about a file</p>
<p>FCB å­˜æ”¾æ§åˆ¶æ–‡ä»¶éœ€è¦çš„å„ç§ä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼Œä»¥å®ç°æŒ‰åå­˜å–</p>
<p>FCB ä¸æ–‡ä»¶ä¸€ä¸€å¯¹åº”ï¼Œä¸€ä¸ª FCB å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ç›®å½•é¡¹</p>
<p>FCB åŒ…å«ï¼šåŸºæœ¬ä¿¡æ¯ã€å­˜å–æ§åˆ¶ä¿¡æ¯ã€ä½¿ç”¨ä¿¡æ¯</p>
<p>ACLï¼šaccess control list è®¿é—®æ§åˆ¶è¡¨</p>
<p><img src="./assets/image-20241209112133801.png" alt="image-20241209112133801" style="zoom:50%;" /></p>
<h4 id="in-memory-structure">In-memory Structure<a class="headerlink" href="#in-memory-structure" title="Permanent link">&para;</a></h4>
<p>open/read a file</p>
<p><img src="./assets/image-20241209112651669.png" alt="image-20241209112651669" style="zoom:50%;" /></p>
<h3 id="virtual-file-system-vfs">Virtual File System (VFS) è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ<a class="headerlink" href="#virtual-file-system-vfs" title="Permanent link">&para;</a></h3>
<p>Virtual File Systems (VFS) provide an <strong>object-oriented way</strong> of implementing file systems. é¢å‘å¯¹è±¡æ–¹æ³•</p>
<p>VFS allows the same system call interface (the API) to be used for different types of file systems.</p>
<p>The API is to the VFS interface, rather than any specific type of file system.</p>
<p>Defines a network-wide unique structure called <strong>vnode</strong>.</p>
<p>å°è£…</p>
<p><img src="./assets/image-20241209113303154.png" alt="image-20241209113303154" style="zoom: 33%;" /></p>
<p>The four primary object types of VFS è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿçš„ç‰©ç†ç»“æ„:</p>
<ul>
<li><strong>superblock object</strong> è¶…çº§å—: a specific mounted filesystem, corresponding to (but not equal) the superblock in the disk structure</li>
<li><strong>inode object</strong> ç´¢å¼•èŠ‚ç‚¹: a specific file, corresponding to (but not equal) FCB in the disk structure</li>
<li><strong>dentry object</strong> ç›®å½•: an individual directory entry</li>
<li><strong>file object</strong> æ–‡ä»¶: an open file as associated with a process, existing as long as the file is opened</li>
</ul>
<h3 id="directory-implementation">Directory Implementation<a class="headerlink" href="#directory-implementation" title="Permanent link">&para;</a></h3>
<p>Linear list of file names with pointer to the data blocks. çº¿æ€§åˆ—è¡¨</p>
<ul>
<li>simple to program</li>
<li>time-consuming to execute Hash </li>
</ul>
<p>Table â€“ linear list with hash data structure. å“ˆå¸Œè¡¨</p>
<ul>
<li>decreases directory search time</li>
<li>collisions â€“ situations where two file names hash to the same locationfixed size</li>
<li>can use chained-overflow hash table</li>
<li>Or rehashing to another larger hash table</li>
</ul>
<h3 id="allocation-methods">Allocation Methods<a class="headerlink" href="#allocation-methods" title="Permanent link">&para;</a></h3>
<h4 id="contiguous-allocation">Contiguous allocation è¿ç»­åˆ†é…<a class="headerlink" href="#contiguous-allocation" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Each file occupies a set of contiguous blocks on the disk</p>
</li>
<li>
<p>Simple â€“ only starting location (block #) and length (number of blocks) are required</p>
</li>
<li>
<p>Random access supported</p>
</li>
<li>
<p>Wasteful of space (dynamic storage-allocation problem)</p>
</li>
<li>
<p>Files cannot grow Mapping from logical to physical</p>
</li>
</ul>
<p>Block to be accessed = Q + start_no
Displacement into block = R</p>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¼šæœ‰ç¢ç‰‡ï¼Œä¸æ–¹ä¾¿æ–‡ä»¶æ‰©å±•</li>
<li>ç£ç›˜ I/O æ¬¡æ•°æœ€å¤š</li>
</ul>
<hr />
<p>æ”¹è¿›ï¼š<strong>Extent-Based Systems</strong></p>
<p>Many newer file systems (I.e. Veritas File System) use a modified contiguous allocation scheme</p>
<p>Extent-based file systems allocate disk blocks in <strong>extents</strong></p>
<p>An extent is a contiguous block of disks</p>
<ul>
<li>Extents are allocated for file allocation</li>
<li>A file consists of one or more extents.</li>
</ul>
<p>Extend å¤ªå¤šï¼Œæµªè´¹</p>
<h4 id="linked-allocation">Linked allocation é“¾æ¥åˆ†é…<a class="headerlink" href="#linked-allocation" title="Permanent link">&para;</a></h4>
<h5 id="_33">éšå¼é“¾æ¥<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h5>
<p>Each file is a linked list of disk blocks: blocks may be scattered anywhere on the disk.</p>
<p>block æœ€å‰é¢æœ‰ä¸ª pointer</p>
<p><img src="./assets/image-20241211145704443.png" alt="image-20241211145704443" style="zoom:33%;" /></p>
<p>ç‰¹ç‚¹</p>
<ul>
<li>Simple â€“ need only starting address</li>
<li>Free-space management system â€“ no waste of space </li>
<li><strong>No random access, poor reliability</strong> ä¸æ”¯æŒéšæœºè®¿é—®</li>
<li>Mapping</li>
</ul>
<h5 id="_34">æ˜¾å¼é“¾æ¥<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h5>
<p>æ”¹è¿›ï¼šæ–‡ä»¶åˆ†é…è¡¨ File-Allocation Tableï¼ˆFATï¼‰ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´</p>
<p>å¥½å¤„ï¼šçµæ´»ï¼Œå¿«ï¼Œæé«˜æ£€ç´¢é€Ÿåº¦ã€å‡å°‘è®¿é—®ç£ç›˜çš„æ¬¡æ•°</p>
<p>åå¤„ï¼šè¦åœ¨å†…å­˜ä¸­å­˜ FATï¼Œå ç”¨ä¸€å®šç©ºé—´</p>
<h4 id="indexed-allocation">Indexed allocation ç´¢å¼•åˆ†é…<a class="headerlink" href="#indexed-allocation" title="Permanent link">&para;</a></h4>
<p>Brings all pointers together into the index blockï¼Œindex block å­˜ pointer ä¿¡æ¯</p>
<p><img src="./assets/image-20241211145954492.png" alt="image-20241211145954492" style="zoom:33%;" /></p>
<ul>
<li>
<p>Need index table (analogous to <em>page table</em>)</p>
</li>
<li>
<p>Random access</p>
</li>
<li>
<p>Dynamic access without external fragmentation, but have overhead of index block.</p>
</li>
<li>
<p>When mapping from logical to physical in a file of maximum size of 256K words and block size of 512 words.  We need only 1 block for index table.</p>
</li>
</ul>
<p><img src="./assets/image-20241211150401806.png" alt="image-20241211150401806" style="zoom:33%;" /></p>
<p>Mapping</p>
<p>When mapping from logical to physical in a file of unbounded length (block size of 512 words). â€“ more pointers are needed</p>
<h5 id="linked-scheme">Linked scheme<a class="headerlink" href="#linked-scheme" title="Permanent link">&para;</a></h5>
<p><strong>Linked scheme</strong> â€“ Link blocks of index table (no limit on size). é“¾å¼</p>
<p><img src="./assets/image-20241211150753298.png" alt="image-20241211150753298" style="zoom: 33%;" /></p>
<p><img src="./assets/image-20241211150625283.png" alt="image-20241211150625283" style="zoom:50%;" /></p>
<hr />
<h5 id="two-level-index">Two-level index<a class="headerlink" href="#two-level-index" title="Permanent link">&para;</a></h5>
<p><strong>Two-level index</strong> (maximum file size is 512^3^)</p>
<p><img src="./assets/image-20241211151259004.png" alt="image-20241211151259004" style="zoom:33%;" /></p>
<p><img src="./assets/image-20241211151324165.png" alt="image-20241211151324165" style="zoom:50%;" /></p>
<table>
<thead>
<tr>
<th></th>
<th><strong>Two-level</strong> <strong>Index</strong></th>
<th><strong>Linked</strong> <strong>Scheme</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Scalability</strong></td>
<td>Supports very large files (up to 512Â³ words)</td>
<td>Supports dynamic file growth, but chaining may limit scalability</td>
</tr>
<tr>
<td><strong>Random</strong> <strong>Access</strong> <strong>Efficiency</strong></td>
<td>High: Quick locates data blocks using two-level index</td>
<td>Low: Requires sequential traversal of the linked list to find the target block</td>
</tr>
<tr>
<td><strong>Sequential</strong> <strong>Access</strong> <strong>Efficiency</strong></td>
<td>Low: Requires multiple index lookups</td>
<td>High: Linked blocks are directly connected</td>
</tr>
<tr>
<td><strong>Storage</strong> <strong>Overhead</strong></td>
<td>High: Index tables consume significant space, especially for small files</td>
<td>Low: Only requires additional space for pointers in each block</td>
</tr>
<tr>
<td><strong>Implementation</strong> <strong>Complexity</strong></td>
<td>High: Requires management of two-level index table</td>
<td>Low: Easier to implement with simple linked structure</td>
</tr>
<tr>
<td><strong>Reliability</strong></td>
<td>High: Index table corruption affects only part of the file</td>
<td>Low: A broken link can make subsequent blocks inaccessible</td>
</tr>
<tr>
<td><strong>Disk</strong> <strong>Fragmentation</strong></td>
<td>None: Blocks donâ€™t need to be stored contiguously</td>
<td>Present: Linked structure can lead to scattered data blocks</td>
</tr>
<tr>
<td><strong>Best</strong> <strong>Use</strong> <strong>Case</strong></td>
<td>Suitable for random access and very large files (e.g., databases, large file systems)</td>
<td>Suitable for sequential access and small to medium-sized files (e.g., log files, streaming data)</td>
</tr>
</tbody>
</table>
<h5 id="combined-scheme">Combined Scheme<a class="headerlink" href="#combined-scheme" title="Permanent link">&para;</a></h5>
<p>Combined Scheme:  UNIX (4K bytes per block)</p>
<p><img src="./assets/image-20241211151641943.png" alt="image-20241211151641943" style="zoom:33%;" /></p>
<h4 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h4>
<p><img alt="image-20241211151709367" src="assets/image-20241211151709367.png" /></p>
<h3 id="free-space-management">Free-Space Management ç£ç›˜ç©ºé—²ç©ºé—´ç®¡ç†<a class="headerlink" href="#free-space-management" title="Permanent link">&para;</a></h3>
<h4 id="_35">ç©ºé—²è¡¨æ³•<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<p>å±äºè¿ç»­åˆ†é…æ–¹å¼</p>
<p>ä¼˜ç‚¹</p>
<ul>
<li>è¾ƒé«˜åˆ†é…é€Ÿåº¦ï¼Œå‡å°‘è®¿é—®ç£ç›˜çš„ I/O é¢‘ç‡</li>
</ul>
<h4 id="bit-map">Bit Map ä½ç¤ºå›¾<a class="headerlink" href="#bit-map" title="Permanent link">&para;</a></h4>
<p>å½“å‰ç©ºé—²çš„ç£ç›˜å—è®°å½•åœ¨ super block ä¸­</p>
<p><img src="./assets/image-20241216100958836.png" alt="image-20241216100958836" style="zoom:50%;" /></p>
<ul>
<li>ç¼ºç‚¹</li>
<li>
<p>Bit map requires extra space</p>
</li>
<li>
<p>ä¼˜ç‚¹</p>
</li>
<li>Easy to get contiguous files</li>
<li>ç®€å•</li>
</ul>
<p>Example:        </p>
<p>block size = 212 bytes    <br />
disk size = 230 bytes (1 gigabyte)    <br />
n = 230/212 = 218 bits (or 32K bytes)</p>
<h4 id="linked-list">Linked list é“¾è¡¨æ³•<a class="headerlink" href="#linked-list" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Linked list (free list) ç©ºé—²é“¾è¡¨</p>
</li>
<li>
<p>Cannot get contiguous space easily éš¾ä»¥å¾—åˆ°è¿ç»­ç©ºé—´</p>
</li>
<li>
<p>But basically can work (FAT)</p>
</li>
<li>
<p>No waste of space</p>
</li>
<li>
<p>Grouping åˆ†ç»„â€“ a modification of the Linked List æˆç»„é“¾è¡¨æ³•</p>
</li>
<li>Addresses of the n free blocks are stored in the first block. </li>
<li>The first n-1 blocks are actually free. </li>
<li>The last block contains addresses of another n free blocks</li>
<li>Counting è®¡æ•°</li>
<li>Address of the first free block and number n contiguous blocks </li>
</ul>
<h4 id="protect">Protect<a class="headerlink" href="#protect" title="Permanent link">&para;</a></h4>
<p>Need to protect:</p>
<ul>
<li>Pointer to free list</li>
<li>Bit map</li>
<li>Must be kept on disk</li>
<li>The copy in memory and disk may differ</li>
<li>Cannot allow for block [i] to have a situation where bit [i] = 1 in memory and bit [i] = 0 on disk</li>
</ul>
<p>Solution:</p>
<ul>
<li>Set bit [i] = 1 in diskï¼ˆ1 ä»£è¡¨ç©ºé—²ï¼‰</li>
<li>deallocate block [i]</li>
<li>Set bit [i] = 1 in memory</li>
</ul>
<p>å…ˆæ›´æ–°ç£ç›˜å†æ›´æ–°å†…å­˜ï¼Œä¿æŒæ•°æ®ä¸€è‡´æ€§ï¼Œé¿å… crash</p>
<h3 id="efficiency-and-performance">Efficiency and Performance<a class="headerlink" href="#efficiency-and-performance" title="Permanent link">&para;</a></h3>
<p>Efficiency dependent on:</p>
<ul>
<li><strong>disk allocation</strong> and <strong>directory</strong> algorithms</li>
<li>types of data kept in fileâ€™s directory entry (for example â€œlast write dateâ€ is recorded in directory)</li>
<li>Generally, every data item has to be considered for its effect.</li>
</ul>
<p>Performance</p>
<ul>
<li><strong>disk cache</strong> â€“ separate section of main memory for frequently used blocks</li>
<li><strong>free-behind and read-ahead</strong> â€“ techniques to optimize sequential access</li>
<li>improve PC performance by dedicating section of memory as virtual disk, or RAM disk</li>
</ul>
<h4 id="page-cache">Page Cache<a class="headerlink" href="#page-cache" title="Permanent link">&para;</a></h4>
<p>A page cache caches <strong>pages</strong> rather than disk blocks using <span style="color:#CC0000;"> virtual memory </span> techniques</p>
<p>Memory-mapped I/O uses a page cache</p>
<p>Routine I/O through the file system uses the buffer (disk) cache</p>
<p>This leads to the following figure</p>
<p><img src="./assets/image-20241216102559255.png" alt="image-20241216102559255" style="zoom:33%;" /></p>
<h4 id="unified-buffer-cache">Unified Buffer Cache<a class="headerlink" href="#unified-buffer-cache" title="Permanent link">&para;</a></h4>
<p>A unified buffer cache uses the same page cache to cache both <strong>memory-mapped</strong> pages and ordinary <strong>file system I/O</strong></p>
<p>Avoids double caching</p>
<p>ç”¨ä¸€ä¸ªç»Ÿä¸€çš„ buffer cache</p>
<p><img src="./assets/image-20241216102902616.png" alt="image-20241216102902616" style="zoom:33%;" /></p>
<h2 id="mass-storage-systems">Mass-Storage Systems<a class="headerlink" href="#mass-storage-systems" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>Time to access a disk block</p>
<ul>
<li>seek time, rotational delay, transfer time</li>
</ul>
<p>ç£ç›˜è°ƒåº¦ç®—æ³•</p>
<p>RAID concept</p>
</blockquote>
<h3 id="overview-of-mass-storage-structure">Overview of Mass Storage Structure<a class="headerlink" href="#overview-of-mass-storage-structure" title="Permanent link">&para;</a></h3>
<h4 id="magnetic-disks">Magnetic disks<a class="headerlink" href="#magnetic-disks" title="Permanent link">&para;</a></h4>
<p>Magnetic disks provide bulk of secondary storage of modern computers</p>
<p>Drives rotate at 60 to 200 times per secondTransfer rate is rate at which data flow between drive and computer</p>
<p><strong>Positioning time</strong> (random-access time) is time to move disk arm to desired cylinder (seek time) and time for desired sector to rotate under the disk head (rotational latency)</p>
<p>Head crash results from disk head making contact with the disk surfaceThatâ€™s bad</p>
<p>æ¯ç§’è½¬é€Ÿ rï¼Œå®é™…ä¸Š</p>
<p>åŠå¾„å°ï¼ˆå†…åœˆï¼‰çš„å’ŒåŠå¾„å¤§çš„ï¼ˆå¤–åœˆï¼‰å­˜çš„æ•°æ®å¤§å°ä¸€æ ·</p>
<p>Disks can be removable</p>
<p>Drive attached to computer via <strong>I/O bus</strong></p>
<p>Buses vary, including EIDE, ATA, SATA, USB, Fiber Channel, SCSIHost controller in computer uses bus to talk to disk controller built into drive or storage array</p>
<p><img src="./assets/image-20241216104144039.png" alt="image-20241216104144039" style="zoom:33%;" /></p>
<h4 id="nonvolatile-memory-devices">Nonvolatile Memory Devices<a class="headerlink" href="#nonvolatile-memory-devices" title="Permanent link">&para;</a></h4>
<p>SSD uses NVM devices</p>
<p>Magnetic tape</p>
<h3 id="disk">Disk<a class="headerlink" href="#disk" title="Permanent link">&para;</a></h3>
<h4 id="disk-structure">Disk Structure<a class="headerlink" href="#disk-structure" title="Permanent link">&para;</a></h4>
<p>Disk drives are addressed as large <em>1-dimensional arrays of logical blocks</em>, where the logical block is the smallest unit of transfer. </p>
<ul>
<li>ä¸»å¼•å¯¼è®°å½• Master Boot Record</li>
<li>åˆ†åŒºè¡¨</li>
<li>
<p>Boot control block (per volume) å¼•å¯¼å—/å¯åŠ¨å·</p>
</li>
<li>
<p>Volume control block per volume (<strong>superblock</strong> in Unix) è¶…çº§å—</p>
</li>
<li>Directory structure per file system ç›®å½•</li>
<li>
<p>Per-file FCB (<strong>inode</strong> in Unix) æ–‡ä»¶æ§åˆ¶å—</p>
</li>
<li>
<p>æ–‡ä»¶ç³»ç»Ÿç©ºé—²å—æ¯</p>
</li>
<li>
<p>å…¶ä»–æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶</p>
</li>
</ul>
<p>SSD å›ºæ€ç¡¬ç›˜</p>
<ul>
<li>ç¼ºç‚¹ï¼šæ˜“ç£¨æŸ</li>
<li>åŸºäºé—ªå­˜æŠ€æœ¯ï¼Œéšæœºè¯»å†™é€Ÿåº¦é«˜äºç£ç›˜ï¼ˆå†™ &gt; è¯»ï¼‰</li>
<li>æœ‰ç£¨æŸå‡è¡¡æœºåˆ¶ï¼Œç›®çš„æ˜¯å»¶é•¿å›ºæ€ç¡¬ç›˜å¯¿å‘½</li>
<li>é™æ€ç£¨æŸå‡è¡¡ç®—æ³•é€šå¸¸æ¯”åŠ¨æ€~è¡¨ç°æ›´ä¼˜ç§€</li>
</ul>
<h4 id="disk-attachment">Disk Attachment<a class="headerlink" href="#disk-attachment" title="Permanent link">&para;</a></h4>
<p>ç£ç›˜æ¥å£</p>
<p>Network-Attached Storage</p>
<h4 id="accessing-a-disk-page">Accessing a Disk Page<a class="headerlink" href="#accessing-a-disk-page" title="Permanent link">&para;</a></h4>
<p><img src="./assets/image-20241216110137892.png" alt="image-20241216110137892" style="zoom:50%;" /></p>
<p>transfer time å’Œ rotational delay å’Œç£ç›˜è½¬é€Ÿæœ‰å…³ï¼Œè½¬é€Ÿè¶Šé«˜ï¼Œå¼€é”€è¶Šå°</p>
<p>æ—‹è½¬å»¶è¿Ÿ</p>
<ul>
<li>
<p>Average rotational latency (half a rotation) å¹³å‡ &frac12; ä¸ªåœˆçš„å»¶è¿Ÿ</p>
</li>
<li>
<p>ä¸ç£ç›˜è°ƒåº¦ç®—æ³•æ— å…³</p>
</li>
<li>
<p>å–å†³äºç£ç›˜ç©ºé—´çš„åˆ†é…ç¨‹åº</p>
</li>
<li>
<p>ä¸æ–‡ä»¶çš„ç‰©ç†ç»“æ„æœ‰å…³</p>
</li>
</ul>
<p>ä¸»è¦ç›®æ ‡æ˜¯å‡å°‘ seek time ä»¥æé«˜æ•ˆç‡</p>
<ul>
<li>å¯»é“æ—¶é—´æœ€é•¿</li>
</ul>
<p>å¯»é“æ—¶é—´ <span class="arithmatex">\(T_S=m\times n+s\)</span>ï¼Œm æ˜¯ä¸ç£ç›˜ç§»åŠ¨ç›¸å…³çš„å¸¸æ•°ï¼Œn æ˜¯è·¨è¶Šç£é“æ•°é‡ï¼Œs æ˜¯å¯åŠ¨ç£å¤´è‡‚çš„æ—¶é—´</p>
<p>æ—‹è½¬å»¶è¿Ÿæ—¶é—´ <span class="arithmatex">\(T_r = \frac{1}{2r}\)</span>ï¼Œr æ˜¯ç£ç›˜çš„æ—‹è½¬é€Ÿåº¦</p>
<p>ä¼ è¾“æ—¶é—´ <span class="arithmatex">\(T_t=\frac{b}{rN}\)</span>ï¼Œb æ˜¯æ¯æ¬¡è¯»/å†™çš„å­—èŠ‚æ•°ï¼ŒN æ˜¯ä¸€ä¸ªç£é“ä¸Šçš„å­—èŠ‚æ•°</p>
<p>æ€»å¹³å‡å­˜å–æ—¶é—´ <span class="arithmatex">\(T_a=T_s+T_r+T_t\)</span></p>
<h4 id="disk-scheduling">Disk Scheduling<a class="headerlink" href="#disk-scheduling" title="Permanent link">&para;</a></h4>
<p>ç£ç›˜è°ƒåº¦ç®—æ³•</p>
<p>Access time has two major components</p>
<ul>
<li>Seek time is the time for the disk are to move the heads to the cylinder containing the desired sector.</li>
<li>Rotational latency is the additional time waiting for the disk to rotate the desired sector to the disk head.</li>
</ul>
<p>Minimize seek time</p>
<p>Metric: Seek time â‰ˆ seek distance</p>
<p>Several algorithms exist to schedule the servicing of disk I/O requests. </p>
<p>We illustrate them with a request queue (0-199). æœ€å¤–ä¾§ 0ï¼Œæœ€é‡Œå±‚ 199</p>
<p>Distance = 98-45 = 53 ä¸¤ä¸ªæ•°ç›¸å‡å°±è¡Œ</p>
<h5 id="fcfs">FCFS<a class="headerlink" href="#fcfs" title="Permanent link">&para;</a></h5>
<p>å…ˆæ¥å…ˆæœåŠ¡</p>
<ul>
<li>
<p>ä¼šå‡ºç° zig zag</p>
</li>
<li>
<p>ä¼˜ç‚¹ï¼šå…¬å¹³æ€§</p>
</li>
<li>å¹³å‡å¯»é“é•¿åº¦ =  æ€»ç£é“æ•°/ç§»åŠ¨æ¬¡æ•°</li>
</ul>
<h5 id="sstf">SSTF<a class="headerlink" href="#sstf" title="Permanent link">&para;</a></h5>
<p>shortest seek time first æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ</p>
<ul>
<li>
<p>æ¯æ¬¡è°ƒåº¦ä¸å½“å‰ç£å¤´æœ€è¿‘çš„ç£é“</p>
</li>
<li>
<p>å¯èƒ½ä¼šäº§ç”Ÿé¥¥é¥¿ç°è±¡ may cause starvation of some requests</p>
</li>
<li>æ€§èƒ½æ¯” FCFS å¥½</li>
</ul>
<h5 id="scan">SCAN<a class="headerlink" href="#scan" title="Permanent link">&para;</a></h5>
<p>æ‰«æç®—æ³•</p>
<p>The disk arm starts at one end of the disk, and moves toward the other end, servicing requests until it gets to the other end of the disk, where the head movement is reversed and servicing continues.</p>
<p>Sometimes called the elevator algorithm ç”µæ¢¯è°ƒåº¦ç®—æ³•</p>
<ul>
<li>
<p>è§„å®šäº†ç£å¤´ç§»åŠ¨æ–¹å‘ï¼Œå¯é¿å…é¥¥é¥¿</p>
</li>
<li>
<p>EG, [0, 200] 100, 160, 200, 90, 10</p>
<p><img src="././assets/image-20250104161909559.png" alt="image-20250104161909559" style="zoom:40%;" /></p>
</li>
<li>
<p>å¯¹æœ€è¿‘æ‰«æè¿‡çš„åŒºåŸŸä¸å…¬å¹³ï¼Œå› æ­¤å®ƒåœ¨å±€éƒ¨æ€§æ–¹é¢ä¸å¦‚ FCFS å’Œ SSTF</p>
</li>
</ul>
<h5 id="c-scan">C-SCAN<a class="headerlink" href="#c-scan" title="Permanent link">&para;</a></h5>
<p>å¾ªç¯æ‰«æç®—æ³• circular-SCAN</p>
<p>Provides a more uniform wait time than SCAN.</p>
<p>The head moves from one end of the disk to the other, servicing requests as it goes.  When it reaches the other end, however, it immediately returns to the beginning of the disk, without servicing any requests on the return trip.</p>
<p>Treats the cylinders as a circular list that wraps around from the last cylinder to the first one.</p>
<ul>
<li>EG, [0, 200] 100, 160, 200, 0, 10, 90</li>
</ul>
<p><img src="././assets/image-20250104161926401.png" alt="image-20250104161926401" style="zoom: 33%;" /></p>
<h5 id="c-look">C-Look<a class="headerlink" href="#c-look" title="Permanent link">&para;</a></h5>
<p>æ”¹è¿› SCAN å’Œ C-SCANï¼Œç£å¤´åªéœ€è¦ç§»åŠ¨åˆ°æœ€è¿œç«¯çš„ä¸€ä¸ªè¯·æ±‚å³å¯è¿”å›ï¼Œä¸éœ€è¦åˆ°è¾¾ç£ç›˜ç«¯ç‚¹</p>
<p><img src="././assets/image-20250104161951659.png" alt="image-20250104161951659" style="zoom:40%;" /></p>
<blockquote>
<p>Question: What scheduling algorithm is good for SSDï¼ˆsolid state diskï¼Œå›ºæ€ç¡¬ç›˜ï¼‰? </p>
<ul>
<li>FCFS</li>
</ul>
</blockquote>
<p><img src="././assets/image-20250104162015836.png" alt="image-20250104162015836" style="zoom:50%;" /></p>
<h4 id="disk-management">Disk Management<a class="headerlink" href="#disk-management" title="Permanent link">&para;</a></h4>
<p><strong>Low-level formatting</strong>, or physical formatting â€” Dividing a disk into sectors that the disk controller can read and write.</p>
<p>To use a disk to hold files, the operating system still needs to record its own data structures on the disk.</p>
<ul>
<li>Partition the disk into one or more groups of cylinders.</li>
<li>Logical formatting or â€œmaking a file systemâ€.</li>
</ul>
<p>Boot block initializes system.</p>
<ul>
<li>The <em>bootstrap</em> is stored in ROM.</li>
<li>Bootstrap loader program.</li>
</ul>
<p>Methods such as sector sparing used to handle bad blocks.</p>
<p>ç£ç›˜é€»è¾‘æ ¼å¼åŒ–ç¨‹åº</p>
<ul>
<li>å»ºç«‹æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ï¼ˆé€»è¾‘æ ¼å¼åŒ–ï¼‰</li>
<li>å¯¹ä¿å­˜ç©ºé—²ç£ç›˜å—ä¿¡æ¯çš„æ•°æ®ç»“æ„è¿›è¡Œåˆå§‹åŒ–</li>
</ul>
<h3 id="swap-space-management">Swap-Space Management<a class="headerlink" href="#swap-space-management" title="Permanent link">&para;</a></h3>
<p>Swap-space â€” Virtual memory uses disk space as an extension of main memory.</p>
<p>Swap-space can be carved out of the normal file system, or, more commonly, it can be in a separate disk partition. å¯ä»¥æ˜¯æ–‡ä»¶ä¹Ÿå¯ä»¥æ˜¯åˆ†åŒº</p>
<p><img src="./assets/image-20241218151850790.png" alt="image-20241218151850790" style="zoom:33%;" /></p>
<h3 id="raid-structure">RAID Structure<a class="headerlink" href="#raid-structure" title="Permanent link">&para;</a></h3>
<p>RAIDï¼šRedundant Arrays of Independent Disks ç‹¬ç«‹ç£ç›˜å†—ä½™é˜µåˆ—</p>
<p>RAID â€“ multiple disk drives provides reliability via redundancy.</p>
<p>RAID is arranged into six different levels.</p>
<p>Disk <strong>striping</strong> uses a group of disks as one storage unit.</p>
<ul>
<li>Bit-level StripingBlock-level Striping </li>
<li>different blocks of a file are striped</li>
</ul>
<h3 id="stable-storage-implementation">Stable-Storage Implementation<a class="headerlink" href="#stable-storage-implementation" title="Permanent link">&para;</a></h3>
<p>æ—¢å¯ä»¥é¡ºåºè¯»å†™ï¼Œä¹Ÿå¯ä»¥æŒ‰ä»»æ„æ¬¡åºè¯»å†™çš„å­˜å‚¨å™¨</p>
<ul>
<li>U ç›˜ã€å…‰ç›˜ã€ç£ç›˜</li>
</ul>
<h2 id="io-systems">I/O Systems<a class="headerlink" href="#io-systems" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!IMPORTANT]</p>
<p>Explore the structure of an operating systemâ€™s I/O subsystem</p>
<p>Discuss the principles of I/O hardware and its complexity</p>
<p>Provide details of the performance aspects of I/O hardware and software</p>
<p>Interrupts, DMA,</p>
</blockquote>
<h3 id="io-hardware-application">I/O Hardware Application<a class="headerlink" href="#io-hardware-application" title="Permanent link">&para;</a></h3>
<p>Common concepts</p>
<ul>
<li><strong>Port</strong> ç«¯å£</li>
<li>port addresses, used by Special I/O instructions &amp; <strong>Memory-mapped</strong> I/O</li>
<li>Device control registers mapped into processor address space.</li>
<li><strong>Bus</strong> æ€»çº¿ (daisy chain or shared direct access)</li>
<li><strong>Controller</strong> (host adapter) æ§åˆ¶å™¨</li>
</ul>
<p><img src="./assets/image-20241223102241700.png" alt="image-20241223102241700" style="zoom:50%;" /></p>
<h4 id="io-port-registers">I/O Port Registers<a class="headerlink" href="#io-port-registers" title="Permanent link">&para;</a></h4>
<p><strong>Data-in</strong>: read by the host to get input</p>
<p><strong>Data-out</strong>: written by the host to send output</p>
<ul>
<li>data in/out æ˜¯ç›¸å¯¹äº CPU è€Œè¨€ï¼Œä»å¤–éƒ¨è®¾å¤‡è¯»å–æ˜¯ inï¼Œè¾“å‡ºæ˜¯ out</li>
</ul>
<p><strong>Status</strong> çŠ¶æ€å¯„å­˜å™¨: device status read by the host</p>
<p><strong>Control</strong> æ§åˆ¶å¯„å­˜å™¨: written by the host to start a command or change the mode of a device</p>
<h4 id="io-controling-methods">I/O controling methods<a class="headerlink" href="#io-controling-methods" title="Permanent link">&para;</a></h4>
<h5 id="polling">Polling<a class="headerlink" href="#polling" title="Permanent link">&para;</a></h5>
<p>è½®å¾ªâ€”â€”ä¸€ç§ I/O æ§åˆ¶æ–¹å¼</p>
<p>Repeated for each byte:</p>
<p><img src="./assets/image-20241223103025651.png" alt="image-20241223103025651" style="zoom:50%;" /></p>
<p>Determines state of device </p>
<ul>
<li>command-ready</li>
<li>busy</li>
<li>Error</li>
</ul>
<p>Busy-wait cycle in Step 1 to wait for I/O from device</p>
<blockquote>
<p>[!CAUTION]</p>
<p>Repeatedly reading the status register until the busy bit becomes clear. <span style="color:#CC0000;"> Can be inefficient!! </span></p>
</blockquote>
<h5 id="interrupts">Interrupts<a class="headerlink" href="#interrupts" title="Permanent link">&para;</a></h5>
<p>ä¸€ç§ I/O æ§åˆ¶æ–¹å¼</p>
<p><strong>CPU Interrupt-request line</strong> triggered by I/O device</p>
<p><strong>Interrupt handler</strong> ä¸­æ–­å¤„ç† receives interrupts</p>
<p><strong>Maskable</strong> to ignore or delay some interrupts</p>
<p>Interrupt vector to dispatch interrupt to correct handler</p>
<ul>
<li>Based on priority</li>
<li>Some nonmaskable</li>
<li>Interrupt chaining: To handle more devices than interrupt vector elements. Handlers on each list are called one by one.</li>
</ul>
<p>Interrupt mechanism also used for exceptions</p>
<p>EGï¼Œé”®ç›˜ keyboard</p>
<hr />
<p><strong>Various Interrupt Processing</strong> å…¶ä»–ä¸­æ–­å¤„ç†è¿‡ç¨‹</p>
<p><strong>Page fault</strong>: saves the state of the process, moves it to the waiting queue, schedules another process to resume execution, then returns.</p>
<p><strong>Trap</strong> (s/w interrupt): saves the state of user code, switches to supervisor mode. Low priority ä½ä¼˜å…ˆçº§</p>
<p>Low priority interrupt can be preempted by high priority ones. ä½ä¼˜å…ˆçº§ä¸­æ–­èƒ½è¢«é«˜ä¼˜å…ˆçº§ä¸­æ–­æŠ¢å </p>
<p>Example usage: </p>
<ul>
<li>high-priority handler records the I/O status, clears the device interrupt, starts the next pending I/O, and raises a low-priority interrupt to complete the work</li>
<li>Later, the low-priority handlercompletes the user-level I/O by copying data from kernel buffers to the application space and calling the scheduler to place the application on the ready queue</li>
</ul>
<h5 id="direct-memory-access">Direct Memory Access<a class="headerlink" href="#direct-memory-access" title="Permanent link">&para;</a></h5>
<p>DMA ç›´æ¥å†…å­˜è®¿é—®â€”â€”ä¸€ç§ I/O æ§åˆ¶æ–¹å¼ï¼Œæ˜¯æ§åˆ¶å™¨</p>
<p>Used to avoid programmed I/O (å¯ç¼–ç¨‹ I/O) for large data movement </p>
<p>Requires DMA controller</p>
<p>éœ€è¦ CPU æŒ‡å‡ºæ‰€å–æ•°æ®çš„åœ°å€ä¸é•¿åº¦</p>
<p>ä¼˜ç‚¹</p>
<ul>
<li>Bypasses CPU to transfer data directly between I/O device and memory ç»•è¿‡ CPUï¼Œç›´æ¥åœ¨ I/O è®¾å¤‡å’Œå†…å­˜ä¹‹é—´ä¼ è¾“æ•°æ® &rarr; CPU å’Œè®¾å¤‡å¹¶è¡Œæ“ä½œç¨‹åº¦å¾—åˆ°æå‡</li>
<li>æ•°æ®ä¼ è¾“ä»¥å—ä¸ºå•ä½ï¼ŒCPU ä»‹å…¥çš„é¢‘ç‡è¿›ä¸€æ­¥é™ä½</li>
</ul>
<p><img src="./assets/image-20241223105154629.png" alt="image-20241223105154629" style="zoom:50%;" /></p>
<p>éœ€è¦ 4 ç±»å¯„å­˜å™¨</p>
<ul>
<li>CR å‘½ä»¤å¯„å­˜å™¨</li>
<li>MAR å†…å­˜åœ°å€å¯„å­˜å™¨</li>
<li>DR æ•°æ®å¯„å­˜å™¨</li>
<li>DC æ•°æ®è®¡æ•°å™¨</li>
</ul>
<h4 id="application-io-interface-io">Application I/O Interface åº”ç”¨ç¨‹åº I/O æ¥å£<a class="headerlink" href="#application-io-interface-io" title="Permanent link">&para;</a></h4>
<p>Devices vary in many dimensions</p>
<ul>
<li>Character-stream or block</li>
<li>Sequential or random-access</li>
<li>Sharable or dedicated</li>
<li>Speed of operation</li>
<li>read-write, read only, or write only</li>
</ul>
<p><img src="./assets/image-20241223105355845.png" alt="image-20241223105355845" style="zoom:50%;" /></p>
<p>Permissions  Owner  Group  Major Device Number  Minor Device Number  Timestamp  Device  Name</p>
<p><img src="./assets/image-20241223105509629.png" alt="image-20241223105509629" style="zoom:50%;" /></p>
<p>ç”¨æˆ·ç¨‹åºå¯¹ I/O è®¾å¤‡çš„è¯·æ±‚é‡‡ç”¨é€»è¾‘è®¾å¤‡åã€‚è€Œç¨‹åºæ‰§è¡Œæ—¶ä½¿ç”¨ç‰©ç†è®¾å¤‡åï¼Œå®ƒä»¬ä¹‹é—´çš„è½¬æ¢æ˜¯è®¾å¤‡æ— å…³è½¯ä»¶å±‚å®Œæˆçš„ã€‚ä¸»è®¾å¤‡å’Œä»è®¾å¤‡æ˜¯æ€»çº¿ä»²è£ä¸­çš„æ¦‚å¿µã€‚</p>
<h4 id="io-devices">I/O Devices<a class="headerlink" href="#io-devices" title="Permanent link">&para;</a></h4>
<p>è®¾å¤‡è§†ä¸ºç‰¹æ®Šçš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶åè®¿é—®ç‰©ç†è®¾å¤‡</p>
<p><strong>Block devices</strong> å—è®¾å¤‡ include disk drives</p>
<ul>
<li>Commands include read, write, seek </li>
<li>Raw I/O or file-system access </li>
<li>Memory-mapped file access possible å¯å¯»å€</li>
</ul>
<p><strong>Character devices</strong> å­—ç¬¦è®¾å¤‡ include keyboards, mice, serial ports</p>
<ul>
<li>Commands include get, put</li>
<li>Libraries layered on top allow line editing</li>
</ul>
<p>Clocks and Timers</p>
<hr />
<p>å…±äº«è®¾å¤‡å¿…é¡»æ˜¯å¯å¯»å€å’Œå¯éšæœºè®¿é—®çš„è®¾å¤‡</p>
<p>å°†ç³»ç»Ÿè°ƒç”¨å‚æ•°ç¿»è¯‘æˆè®¾å¤‡æ“ä½œå‘½ä»¤çš„å·¥ä½œç”± <em>è®¾å¤‡æ— å…³çš„ os è½¯ä»¶</em> å®Œæˆ</p>
<p>å‘è®¾å¤‡å¯„å­˜å™¨çš„å†™å‘½ä»¤æ˜¯åœ¨ I/O è½¯ä»¶çš„ <em>è®¾å¤‡é©±åŠ¨ç¨‹åº</em> ä¸­å®Œæˆçš„</p>
<p>è¾“å…¥/è¾“å‡ºè½¯ä»¶ä¸€èˆ¬ä»ä¸Šåˆ°ä¸‹åˆ†ä¸º 4 ä¸ªå±‚æ¬¡ï¼šç”¨æˆ·å±‚ã€ä¸è®¾å¤‡æ— å…³çš„è½¯ä»¶å±‚ã€è®¾å¤‡é©±åŠ¨ç¨‹åºåŠä¸­æ–­å¤„ç†ç¨‹åºã€‚ä¸è®¾å¤‡æ— å…³çš„è½¯ä»¶å±‚ä¹Ÿå°±æ˜¯ç³»ç»Ÿè°ƒç”¨çš„å¤„ç†ç¨‹åºã€‚</p>
<p>è®¾å¤‡çš„ç‹¬ç«‹æ€§æ˜¯æŒ‡ç”¨æˆ·ç¼–ç¨‹æ—¶ä½¿ç”¨çš„è®¾å¤‡ä¸å®é™…ä½¿ç”¨çš„è®¾å¤‡æ— å…³</p>
<h4 id="blocking-and-nonblocking-io">Blocking and Nonblocking I/O<a class="headerlink" href="#blocking-and-nonblocking-io" title="Permanent link">&para;</a></h4>
<p>Blocking é˜»å¡å¼ I/O- process suspended until I/O completed</p>
<ul>
<li>Easy to use and understand</li>
<li>Insufficient for some needs</li>
</ul>
<p>Nonblocking éé˜»å¡å¼ I/O - I/O call returns as much as available</p>
<ul>
<li>User interface, data copy (buffered I/O)</li>
<li>Implemented via multi-threading</li>
<li>Returns quickly with count of bytes read or written</li>
</ul>
<p>Asynchronous - process runs while I/O executes</p>
<ul>
<li>Difficult to use</li>
<li>I/O subsystem signals process when I/O completed</li>
</ul>
<p><img src="./assets/image-20241223112145908.png" alt="image-20241223112145908" style="zoom:50%;" /></p>
<h3 id="kernel-io-interface">Kernel I/O Interface<a class="headerlink" href="#kernel-io-interface" title="Permanent link">&para;</a></h3>
<h4 id="kernel-io-subsystem">Kernel I/O Subsystem<a class="headerlink" href="#kernel-io-subsystem" title="Permanent link">&para;</a></h4>
<p>Device-status Table</p>
<h5 id="scheduling_1"><strong>Scheduling</strong> è°ƒåº¦<a class="headerlink" href="#scheduling_1" title="Permanent link">&para;</a></h5>
<ul>
<li>Some I/O request ordering via per-device queue</li>
<li>E.g. disk scheduling</li>
<li>Some OSs try fairness</li>
</ul>
<h5 id="buffering">Buffering<a class="headerlink" href="#buffering" title="Permanent link">&para;</a></h5>
<p><strong>Buffering</strong> ç¼“å­˜- store data in memory while transferring <em>between devices</em></p>
<ul>
<li>To cope with device <em>speed mismatch</em>, e.g. receiving data from  modem to disk. ç¼“å’Œ CPU å’Œ I/O è®¾å¤‡é—´é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾ï¼ˆé€šå¸¸ CPU æ¯” I/O å¿«ï¼‰</li>
<li>Double buffering åŒç¼“å†²</li>
<li>To cope with device transfer <em>size mismatch</em>, e.g. network packet</li>
<li>To maintain â€œcopy semanticsâ€ (when a write() system call specifies a buffer for storing the data, and modifies its contents after the system call)</li>
<li>å‡å°‘ç£ç›˜ I/O æ¬¡æ•°</li>
</ul>
<p>T ï¼šI/O è¾“å…¥åˆ°ç¼“å†²åŒºçš„æ—¶é—´
Mï¼šç¼“å†²åŒºä¼ é€åˆ°å·¥ä½œåŒºæ—¶é—´
Cï¼šCPU å¯¹æ•°æ®çš„å¤„ç†æ—¶é—´</p>
<p>å•ç¼“å†²åŒºå¹³å‡å¤„ç†æ¯å—æ•°æ®çš„æ—¶é—´ï¼š<span class="arithmatex">\(Max(C, T)+M\)</span></p>
<p>åŒç¼“å†²åŒºå¹³å‡å¤„ç†æ¯å—æ•°æ®çš„æ—¶é—´ï¼š<span class="arithmatex">\(Max(C+T, M)\)</span></p>
<p>å¾ªç¯ç¼“å†²</p>
<p>ç¼“å†²æ± </p>
<ul>
<li>å¯ä¾›å¤šä¸ªè¿›ç¨‹å…±äº«ä½¿ç”¨</li>
</ul>
<h5 id="disk-caching">Disk caching ç£ç›˜é«˜é€Ÿç¼“å­˜<a class="headerlink" href="#disk-caching" title="Permanent link">&para;</a></h5>
<p><strong>Caching</strong> - fast memory holding copy of data</p>
<ul>
<li>Always just <em>a copy</em></li>
<li>Key to performance</li>
<li>è½¯ä»¶æœºåˆ¶</li>
<li>è§£å†³ I/O æ¯” CPU æ…¢å¾ˆå¤šçš„é—®é¢˜</li>
</ul>
<p>é«˜é€Ÿç¼“å­˜å’Œç¼“å†²åŒºçš„å¯¹æ¯”</p>
<p><img src="././assets/image-20250104154338116.png" alt="image-20250104154338116" style="zoom:50%;" /></p>
<h5 id="spooling">Spooling<a class="headerlink" href="#spooling" title="Permanent link">&para;</a></h5>
<p><strong>Spooling</strong> å‡è„±æœº- hold output for a device</p>
<ul>
<li>If device can serve only one request at a time i.e., Printing</li>
<li>è½¯ä»¶æœºåˆ¶ï¼Œéœ€è¦å¤–å­˜ã€å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯çš„æ”¯æŒ</li>
<li>
<p>å¤§å®¹é‡ã€é«˜é€Ÿåº¦çš„å¤–å­˜ä½œä¸ºè¾“å…¥äº•ã€è¾“å‡ºäº•</p>
</li>
<li>
<p>æé«˜ I/O é€Ÿåº¦ï¼Œç‹¬å è®¾å¤‡æ”¹é€ æˆå…±äº«è®¾å¤‡</p>
</li>
<li>ä»¥ç©ºé—´æ¢æ—¶é—´</li>
<li>å¯ä»¥å®ç°è™šæ‹Ÿè®¾å¤‡</li>
</ul>
<p>é€šé“æŠ€æœ¯</p>
<ul>
<li>ç¡¬ä»¶æœºåˆ¶</li>
</ul>
<p><strong>Device reservation</strong> - provides exclusive access to a device</p>
<ul>
<li>System calls for allocation and deallocation</li>
<li>Watch out for deadlock</li>
</ul>
<h4 id="io-subsystem-transforming">I/O Subsystem Transforming<a class="headerlink" href="#io-subsystem-transforming" title="Permanent link">&para;</a></h4>
<p>å…ˆåˆ†é…è®¾å¤‡ï¼Œå†åˆ†é…è®¾å¤‡æ§åˆ¶å™¨ï¼Œæœ€ååˆ†é…é€šé“</p>
<p>ç”¨æˆ·ç¨‹åºå‘å‡ºç£ç›˜ I/O è¯·æ±‚åï¼Œ</p>
<ul>
<li>
<p>ç³»ç»Ÿçš„å¤„ç†æµç¨‹æ˜¯ï¼šç”¨æˆ·ç¨‹åº â†’ ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åº â†’ è®¾å¤‡é©±åŠ¨ç¨‹åº â†’ ä¸­æ–­å¤„ç†ç¨‹åº</p>
</li>
<li>
<p>å…¶ä¸­ï¼Œè®¡ç®—æ•°æ®æ‰€åœ¨ç£ç›˜çš„æŸ±é¢å·ã€ç£å¤´å·ã€æ‰‡åŒºå·çš„ç¨‹åºæ˜¯ <strong>è®¾å¤‡é©±åŠ¨ç¨‹åº</strong></p>
</li>
<li>
<p>é©±åŠ¨ç¨‹åºä¸ I/O æ§åˆ¶æ–¹å¼æœ‰å…³</p>
<p>åˆå§‹åŒ–è®¾å¤‡æ˜¯ç”±é©±åŠ¨ç¨‹åºæ§åˆ¶å®Œæˆçš„</p>
<p>è¿›ç¨‹å†æ‰§è¡Œé©±åŠ¨ç¨‹åºæ—¶å¯èƒ½è¿›å…¥é˜»å¡æ€</p>
<p>è¯»/å†™è®¾å¤‡çš„æ“ä½œæ˜¯ç”±é©±åŠ¨ç¨‹åºæ§åˆ¶å®Œæˆçš„</p>
</li>
<li>
<p>è®¾å¤‡é©±åŠ¨ç¨‹åºå¤„ç†é¡ºåº</p>
<ul>
<li>å°†æŠ½è±¡è¦æ±‚è½¬åŒ–æˆå…·ä½“è¦æ±‚ â†’ å¯¹æœåŠ¡è¯·æ±‚è¿›è¡Œæ ¡éªŒ â†’ æ£€æŸ¥è®¾å¤‡çš„çŠ¶æ€ â†’ ä¼ é€å¿…è¦å‚æ•° â†’ å¯åŠ¨ I/O è®¾å¤‡</li>
</ul>
</li>
</ul>
<h4 id="io-requests-to-hardware-operations">I/O Requests to Hardware Operations<a class="headerlink" href="#io-requests-to-hardware-operations" title="Permanent link">&para;</a></h4>
<p>é€šé“æ§åˆ¶è®¾å¤‡æ§åˆ¶å™¨ï¼Œè®¾å¤‡æ§åˆ¶å™¨æ§åˆ¶è®¾å¤‡å·¥ä½œ</p>
<p>è®¾å¤‡åˆ†é…è¿‡ç¨‹ä¸­ï¼Œå…ˆåè®¿é—®çš„æ•°æ®ç»“æ„ä¸º SDT DCT COCT CHCTï¼Œè®¾å¤‡ã€æ§åˆ¶å™¨ã€é€šé“éƒ½è¦å¯ç”¨</p>
<p>Consider reading a file from disk for a process: </p>
<ul>
<li>Determine device holding file MS-DOS uses the â€˜c:â€™ disk id; Unix uses the mount table</li>
<li>Translate name to device representation</li>
<li>Physically read data from disk into buffer</li>
<li>Make data available to requesting process</li>
<li>Return control to process</li>
</ul>
<h4 id="performance">Performance<a class="headerlink" href="#performance" title="Permanent link">&para;</a></h4>
<p><strong>I/O</strong> is a major factor in system performance:</p>
<ul>
<li>Demands CPU to execute device driver, kernel I/O code</li>
<li>Context switches due to interrupts are heavy burden on CPU</li>
<li>Data copying</li>
<li>Network traffic especially stressful</li>
</ul>
<p>æ”¹å–„ç£ç›˜ I/P æ€§èƒ½</p>
<ul>
<li>é‡æ’ I/O è¯·æ±‚æ¬¡åº</li>
<li>é¢„è¯»å’Œæ»åå†™</li>
<li>ä¼˜åŒ–æ–‡ä»¶ç‰©ç†å—çš„åˆ†å¸ƒ</li>
</ul>
<h2 id="quiz-lab">Quiz &amp; LAB<a class="headerlink" href="#quiz-lab" title="Permanent link">&para;</a></h2>
<h3 id="quiz">quiz<a class="headerlink" href="#quiz" title="Permanent link">&para;</a></h3>
<p>make install  Linux /boot</p>
<p>~ home directory</p>
<p>struct task_struct</p>
<p>hâœ– 10+200(1-h)=ï¼ˆ1+0.5ï¼‰âœ–100 </p>
<h3 id="lab">lab<a class="headerlink" href="#lab" title="Permanent link">&para;</a></h3>
<p>Linux æŒ‡ä»¤ï¼šls, cp, ln, mv, echo, ....</p>
<p><strong>ç›®å½•ç±»</strong></p>
<ol>
<li><strong>pwd</strong>
    <strong>ä½œç”¨</strong>ï¼šæ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a>$<span class="w"> </span><span class="nb">pwd</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a>/home/user
</span></code></pre></div></td></tr></table></div>
<ol start="2">
<li><strong>cd</strong>
    <strong>ä½œç”¨</strong>ï¼šåˆ‡æ¢å·¥ä½œç›®å½•ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/etc
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a>$<span class="w"> </span><span class="nb">pwd</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a>/etc
</span></code></pre></div></td></tr></table></div>
<ol start="3">
<li><strong>ls</strong>
    <strong>ä½œç”¨</strong>ï¼šåˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½•ã€‚
    <strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š</li>
</ol>
<ul>
<li><code>-l</code>ï¼šè¯¦ç»†ä¿¡æ¯æ ¼å¼ã€‚</li>
<li><code>-a</code>ï¼šæ˜¾ç¤ºéšè—æ–‡ä»¶ï¼ˆä»¥ <code>.</code> å¼€å¤´çš„æ–‡ä»¶ï¼‰ã€‚
      <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ul>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a>$<span class="w"> </span>ls<span class="w"> </span>-la
</span></code></pre></div></td></tr></table></div>
<ol start="4">
<li><strong>ln</strong>
    <strong>ä½œç”¨</strong>ï¼šåˆ›å»ºæ–‡ä»¶çš„é“¾æ¥ï¼ˆç¡¬é“¾æ¥æˆ–ç¬¦å·é“¾æ¥ï¼‰ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<ul>
<li>
<p>åˆ›å»ºç¬¦å·é“¾æ¥ï¼š</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a>$<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>/path/to/original<span class="w"> </span>/path/to/link
</span></code></pre></div></td></tr></table></div>
</li>
<li>
<p>åˆ›å»ºç¡¬é“¾æ¥ï¼š</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a>$<span class="w"> </span>ln<span class="w"> </span>/path/to/original<span class="w"> </span>/path/to/link
</span></code></pre></div></td></tr></table></div>
</li>
</ul>
<ol start="5">
<li><strong>.</strong>
    <strong>ä½œç”¨</strong>ï¼šè¡¨ç¤ºå½“å‰ç›®å½•ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a>$<span class="w"> </span>ls<span class="w"> </span>.
</span></code></pre></div></td></tr></table></div>
<ol start="6">
<li><strong>..</strong>
    <strong>ä½œç”¨</strong>ï¼šè¡¨ç¤ºä¸Šçº§ç›®å½•ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
</span></code></pre></div></td></tr></table></div>
<ol start="7">
<li><strong>~</strong>
    <strong>ä½œç”¨</strong>ï¼šè¡¨ç¤ºå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~
</span></code></pre></div></td></tr></table></div>
<p><strong>æƒé™ç±»</strong></p>
<ol>
<li><strong>chmod</strong>
    <strong>ä½œç”¨</strong>ï¼šæ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™ã€‚
    <strong>æ ¼å¼</strong>ï¼š<code>chmod [é€‰é¡¹] æƒé™ æ–‡ä»¶</code>
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a>$<span class="w"> </span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>file
</span></code></pre></div></td></tr></table></div>
<ol start="2">
<li><strong>chown</strong>
    <strong>ä½œç”¨</strong>ï¼šæ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…ã€‚
    <strong>æ ¼å¼</strong>ï¼š<code>chown [é€‰é¡¹] ç”¨æˆ·:ç»„ æ–‡ä»¶</code>
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a>$<span class="w"> </span>chown<span class="w"> </span>user:group<span class="w"> </span>file
</span></code></pre></div></td></tr></table></div>
<p><strong>è§£å‹ç±»</strong></p>
<ol>
<li><strong>tar</strong>
    <strong>ä½œç”¨</strong>ï¼šåˆ›å»ºå’Œæå– tar å‹ç¼©åŒ…ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<ul>
<li>
<p>åˆ›å»ºå‹ç¼©åŒ…ï¼š</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a>$<span class="w"> </span>tar<span class="w"> </span>-cvf<span class="w"> </span>archive.tar<span class="w"> </span>file1<span class="w"> </span>file2
</span></code></pre></div></td></tr></table></div>
</li>
<li>
<p>è§£å‹å‹ç¼©åŒ…ï¼š</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a>$<span class="w"> </span>tar<span class="w"> </span>-xvf<span class="w"> </span>archive.tar
</span></code></pre></div></td></tr></table></div>
</li>
</ul>
<ol start="2">
<li><strong>gzip</strong>
    <strong>ä½œç”¨</strong>ï¼šå¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©æˆ–è§£å‹ç¼©ï¼ˆ.gz æ ¼å¼ï¼‰ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<ul>
<li>
<p>å‹ç¼©ï¼š</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a>$<span class="w"> </span>gzip<span class="w"> </span>file
</span></code></pre></div></td></tr></table></div>
</li>
<li>
<p>è§£å‹ï¼š</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a>$<span class="w"> </span>gzip<span class="w"> </span>-d<span class="w"> </span>file.gz
</span></code></pre></div></td></tr></table></div>
</li>
</ul>
<p><strong>æœç´¢ç±»</strong></p>
<ol>
<li><strong>grep</strong>
    <strong>ä½œç”¨</strong>ï¼šæœç´¢æ–‡æœ¬å†…å®¹ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a>$<span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;pattern&quot;</span><span class="w"> </span>file
</span></code></pre></div></td></tr></table></div>
<ol start="2">
<li><strong>find</strong>
    <strong>ä½œç”¨</strong>ï¼šæœç´¢æ–‡ä»¶æˆ–ç›®å½•ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.h&quot;</span><span class="w"> </span>-print
</span></code></pre></div></td></tr></table></div>
<p><strong>è®¾å¤‡ç±»</strong></p>
<ol>
<li><strong>mount</strong>
    <strong>ä½œç”¨</strong>ï¼šæŒ‚è½½è®¾å¤‡æˆ–æ–‡ä»¶ç³»ç»Ÿã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a>$<span class="w"> </span>mount<span class="w"> </span>/dev/sda1<span class="w"> </span>/mnt
</span></code></pre></div></td></tr></table></div>
<ol start="2">
<li><strong>umount</strong>
    <strong>ä½œç”¨</strong>ï¼šå¸è½½æŒ‚è½½çš„è®¾å¤‡æˆ–æ–‡ä»¶ç³»ç»Ÿã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a>$<span class="w"> </span>umount<span class="w"> </span>/mnt
</span></code></pre></div></td></tr></table></div>
<p><strong>è¿›ç¨‹ç±»</strong></p>
<ol>
<li><strong>ps</strong>
    <strong>ä½œç”¨</strong>ï¼šæŸ¥çœ‹ç³»ç»Ÿä¸­çš„è¿›ç¨‹ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a>$<span class="w"> </span>ps<span class="w"> </span>aux
</span></code></pre></div></td></tr></table></div>
<ol start="2">
<li><strong>top</strong>
    <strong>ä½œç”¨</strong>ï¼šåŠ¨æ€æ˜¾ç¤ºç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œè¿›ç¨‹ä¿¡æ¯ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a>$<span class="w"> </span>top
</span></code></pre></div></td></tr></table></div>
<ol start="3">
<li><strong>kill</strong>
    <strong>ä½œç”¨</strong>ï¼šç»ˆæ­¢æŒ‡å®šè¿›ç¨‹ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a>$<span class="w"> </span><span class="nb">kill</span><span class="w"> </span>-9<span class="w"> </span>PID
</span></code></pre></div></td></tr></table></div>
<p><strong>æ–‡ä»¶ç±»</strong></p>
<ol>
<li><strong>echo</strong>
    <strong>ä½œç”¨</strong>ï¼šè¾“å‡ºå­—ç¬¦ä¸²åˆ°ç»ˆç«¯æˆ–æ–‡ä»¶ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Hello, World!&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>file
</span></code></pre></div></td></tr></table></div>
<ol start="2">
<li><strong>cat</strong>
    <strong>ä½œç”¨</strong>ï¼šæŸ¥çœ‹æ–‡ä»¶å†…å®¹æˆ–åˆå¹¶æ–‡ä»¶ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a>$<span class="w"> </span>cat<span class="w"> </span>file
</span></code></pre></div></td></tr></table></div>
<ol start="3">
<li><strong>touch</strong>
    <strong>ä½œç”¨</strong>ï¼šåˆ›å»ºç©ºæ–‡ä»¶æˆ–æ›´æ–°æ–‡ä»¶çš„æ—¶é—´æˆ³ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a>$<span class="w"> </span>touch<span class="w"> </span>file
</span></code></pre></div></td></tr></table></div>
<ol start="4">
<li><strong>mkdir</strong>
    <strong>ä½œç”¨</strong>ï¼šåˆ›å»ºç›®å½•ã€‚
    <strong>ç¤ºä¾‹</strong>ï¼š</li>
</ol>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a>$<span class="w"> </span>mkdir<span class="w"> </span>directory
</span></code></pre></div></td></tr></table></div>
<p>å®éªŒæŒ‡å¯¼ä¹¦</p>
<p>trap å’Œç³»ç»Ÿè°ƒç”¨</p>
<p>Linux æ–‡ä»¶ç³»ç»Ÿï¼šFCB, inode, VFS structure</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="æœ€åæ›´æ–°">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2026å¹´2æœˆ20æ—¥ 01:15:29 CST">2026å¹´2æœˆ20æ—¥ 01:15:29</span>
  </span>

    
    
    
    
  </aside>




<div id="__comments">
  
    <h2 ><!-- è¯„è®º -->è¯„è®ºåŒº~</h2>
    
    æœ‰ç”¨çš„è¯è¯·ç»™æˆ‘ä¸ªèµå’Œ star => <a href="https://cindyzhou2003.github.io/mymkdocs/">
        <img alt="GitHub stars" src="https://img.shields.io/github/stars/CindyZhou2003/mymkdocs.svg?style=plastic&amp;label=Stars"></a>
    
    
    </div>
    <script src="https://giscus.app/client.js"
        data-repo="CindyZhou2003/mymkdocs"
        data-repo-id="R_kgDOJHRt5g"
        data-category="General"
        data-category-id="DIC_kwDOJHRt5s4Cge0r"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>

        updateScheme();

    </script>
    
    
    <!-- Synchronize Giscus theme with palette -->
    <script>
    var giscus = document.querySelector("script[src*=giscus]")
    
    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme) 
    }
    
    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
            var theme = palette.color.scheme === "slate" ? "dark" : "light"
            localStorage.setItem("data-md-color-scheme", palette.color.scheme === "slate" ? "slate" : "default");
            /* Instruct Giscus to change theme */
            var frame = document.querySelector(".giscus-frame")
            frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
            )
        }
        })
    })
    </script>
                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  å›åˆ°é¡µé¢é¡¶éƒ¨
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="é¡µè„š" >
        
          
          <a href="PIS.html" class="md-footer__link md-footer__link--prev" aria-label="ä¸Šä¸€é¡µ: ä¿¡æ¯å®‰å…¨åŸç†">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                ä¸Šä¸€é¡µ
              </span>
              <div class="md-ellipsis">
                ä¿¡æ¯å®‰å…¨åŸç†
              </div>
            </div>
          </a>
        
        
          
          <a href="CN.html" class="md-footer__link md-footer__link--next" aria-label="ä¸‹ä¸€é¡µ: è®¡ç®—æœºç½‘ç»œ">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                ä¸‹ä¸€é¡µ
              </span>
              <div class="md-ellipsis">
                è®¡ç®—æœºç½‘ç»œ
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024-2025 <a href="https://github.com/CindyZhou2003/mymkdocs"  target="_blank" rel="noopener">Cindy</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/CindyZhou2003/mymkdocs" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.annotate", "navigation.indexes", "navigation.expand", "toc.follow", "navigation.top", "search.suggest", "navigation.footer", "navigation.tabs", "navigation.tracking", "navigation.instant.progress", "content.code.copy", "search.highlight", "search.share", "content.code.annotate", "navigation.tabs"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://gcore.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
      
        <script src="../js/katex.js"></script>
      
        <script src="../js/tablesort.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>