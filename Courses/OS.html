
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Cindyçš„ç¬”è®°æœ¬">
      
      
      
        <link rel="canonical" href="https://cindyzhou2003.github.io/mymkdocs/Courses/OS.html">
      
      
        <link rel="prev" href="PIS.html">
      
      
        <link rel="next" href="CN.html">
      
      
      <link rel="icon" href="../assets/images/favcion.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.12">
    
    
      
        <title>æ“ä½œç³»ç»Ÿ - Cindyçš„ç¬”è®°æœ¬</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=LXGW+WenKai:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"LXGW WenKai";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../css/style.css">
    
      <link rel="stylesheet" href="../css/font.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="forest" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#operating-system-concepts" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href=".." title="Cindyçš„ç¬”è®°æœ¬" class="md-header__button md-logo" aria-label="Cindyçš„ç¬”è®°æœ¬" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cindyçš„ç¬”è®°æœ¬
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              æ“ä½œç³»ç»Ÿ
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="forest" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="forest-dark" data-md-color-primary="Brown" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="åˆ†äº«" aria-label="åˆ†äº«" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/CindyZhou2003/mymkdocs" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Cindy's notebook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="æ ‡ç­¾" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index.html" class="md-tabs__link">
          
  
    
  
  ä¸»é¡µğŸ¤–

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="DM.html" class="md-tabs__link">
          
  
    
  
  SEè¯¾ç¨‹ğŸ“

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../skills/Algorithm.html" class="md-tabs__link">
          
  
    
  
  æŠ€èƒ½âš™ï¸

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../other/IELTs.html" class="md-tabs__link">
          
  
    
  
  å…¶ä»–ğŸŠ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../work/Interview.html" class="md-tabs__link">
          
  
    
  
  æ‰¾å·¥

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
  <!-- Add scripts that need to run before here -->
  
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cindyçš„ç¬”è®°æœ¬" class="md-nav__button md-logo" aria-label="Cindyçš„ç¬”è®°æœ¬" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>

    </a>
    Cindyçš„ç¬”è®°æœ¬
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CindyZhou2003/mymkdocs" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Cindy's notebook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ä¸»é¡µğŸ¤–
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            ä¸»é¡µğŸ¤–
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SEè¯¾ç¨‹ğŸ“
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            SEè¯¾ç¨‹ğŸ“
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    å¤§ä¸€æ˜¥å¤
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            å¤§ä¸€æ˜¥å¤
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DM.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    å¤§äºŒç§‹å†¬
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            å¤§äºŒç§‹å†¬
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="OOP.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="FDS.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    æ•°æ®ç»“æ„åŸºç¡€
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    å¤§äºŒæ˜¥å¤
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            å¤§äºŒæ˜¥å¤
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    é«˜çº§æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    æ•°æ®åº“ç³»ç»Ÿ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ML.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    æœºå™¨å­¦ä¹ ï¼ˆå›½é™…åŒ–ï¼‰
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="PIS.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ä¿¡æ¯å®‰å…¨åŸç†
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    å¤§ä¸‰ç§‹å†¬
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            å¤§ä¸‰ç§‹å†¬
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    æ“ä½œç³»ç»Ÿ
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="OS.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    æ“ä½œç³»ç»Ÿ
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      1 æ¦‚è¿° Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 æ¦‚è¿° Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 æ“ä½œç³»ç»ŸåŠŸèƒ½&amp;å®šä¹‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2 è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      ä¸­æ–­ interrupt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 å­˜å‚¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 è®¡ç®—æœºä½“ç³»ç»“æ„
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15" class="md-nav__link">
    <span class="md-ellipsis">
      1.5 æ“ä½œç³»ç»Ÿç»“æ„
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-os-operations" class="md-nav__link">
    <span class="md-ellipsis">
      1.6 æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.6 æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-management" class="md-nav__link">
    <span class="md-ellipsis">
      Process management è¿›ç¨‹ç®¡ç†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-management" class="md-nav__link">
    <span class="md-ellipsis">
      Memory managementå†…å­˜ç®¡ç†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-management" class="md-nav__link">
    <span class="md-ellipsis">
      File management æ–‡ä»¶ç®¡ç†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-management" class="md-nav__link">
    <span class="md-ellipsis">
      Storage management å­˜å‚¨ç®¡ç†
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-purposes" class="md-nav__link">
    <span class="md-ellipsis">
      æ€»ç»“ OS purposes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-operating-system-structures" class="md-nav__link">
    <span class="md-ellipsis">
      2 ç»“æ„ Operating-System Structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 ç»“æ„ Operating-System Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 æ“ä½œç³»ç»ŸæœåŠ¡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-system-call" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 System call ç³»ç»Ÿè°ƒç”¨
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 System call ç³»ç»Ÿè°ƒç”¨">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      ç³»ç»Ÿè°ƒç”¨å®ç°
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      å‚æ•°ä¼ é€’
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      ç³»ç»Ÿè°ƒç”¨åˆ†ç±»
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 ç³»ç»Ÿç¨‹åº
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-os" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 osè®¾è®¡å’Œå®ç°
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 æ“ä½œç³»ç»Ÿç»“æ„
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 æ“ä½œç³»ç»Ÿç»“æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unix" class="md-nav__link">
    <span class="md-ellipsis">
      UNIX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monolithic-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Monolithic System Structure å®å†…æ ¸æ¶æ„
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microkernel-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Microkernel System Structure å¾®å†…æ ¸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hybrid-structuredarwin" class="md-nav__link">
    <span class="md-ellipsis">
      Hybrid Structureâ€”â€”Darwin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layered-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Layered Approach åˆ†å±‚æ–¹æ³•
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules æ¨¡å—åŒ–
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Other Structures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-virtual-machines" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 è™šæ‹Ÿæœº Virtual Machines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.6 è™šæ‹Ÿæœº Virtual Machines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hypervisor" class="md-nav__link">
    <span class="md-ellipsis">
      HyperVisor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-os" class="md-nav__link">
    <span class="md-ellipsis">
      2.7 OSç”Ÿæˆ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28-system-boot" class="md-nav__link">
    <span class="md-ellipsis">
      2.8 ç³»ç»Ÿå¯åŠ¨ System Boot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-processes" class="md-nav__link">
    <span class="md-ellipsis">
      3 è¿›ç¨‹ Processes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 è¿›ç¨‹ Processes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 è¿›ç¨‹æ¦‚å¿µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 è¿›ç¨‹æ¦‚å¿µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      å®šä¹‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    <span class="md-ellipsis">
      Process state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-control-blockpcb" class="md-nav__link">
    <span class="md-ellipsis">
      Process control block(PCB)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 è¿›ç¨‹è°ƒåº¦ scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 è¿›ç¨‹è°ƒåº¦ scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-scheduling-queues" class="md-nav__link">
    <span class="md-ellipsis">
      Process Scheduling Queues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedulers" class="md-nav__link">
    <span class="md-ellipsis">
      Schedulers è°ƒåº¦å™¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-switch" class="md-nav__link">
    <span class="md-ellipsis">
      Context Switch ä¸Šä¸‹æ–‡åˆ‡æ¢
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 è¿›ç¨‹æ“ä½œ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 è¿›ç¨‹æ“ä½œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Process Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      Process Termination
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-cooperating" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 å…±åŒåä½œ cooperating
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4 å…±åŒåä½œ cooperating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cooperating-processes" class="md-nav__link">
    <span class="md-ellipsis">
      Cooperating Processes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#producer-consumer" class="md-nav__link">
    <span class="md-ellipsis">
      Producer-consumer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 è¿›ç¨‹é—´é€šä¿¡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.5 è¿›ç¨‹é—´é€šä¿¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interprocess-communication-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      Interprocess Communication (IPC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Direct Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indirect-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Indirect Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronization åŒæ­¥æ€§
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-communication-in-client-server-systems" class="md-nav__link">
    <span class="md-ellipsis">
      3.6 Communication in Client-Server Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.6 Communication in Client-Server Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sockets" class="md-nav__link">
    <span class="md-ellipsis">
      Sockets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-threads" class="md-nav__link">
    <span class="md-ellipsis">
      4 çº¿ç¨‹ Threads
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 çº¿ç¨‹ Threads">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-and-multithreaded-processes" class="md-nav__link">
    <span class="md-ellipsis">
      Single and Multithreaded Processes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benfits" class="md-nav__link">
    <span class="md-ellipsis">
      Benfits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-threads" class="md-nav__link">
    <span class="md-ellipsis">
      User Threads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-threads" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel Threads
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-multithreading-models" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Multithreading Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-threading-issues" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Threading Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Threading Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread-cancellation" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Cancellation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Signal Handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-pools" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Pools çº¿ç¨‹æ± 
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-activations" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduler Activations è°ƒåº¦æ¿€æ´»
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      5 è°ƒåº¦ CPU Scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 è°ƒåº¦ CPU Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Basic concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1 Basic concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Scheduler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispacher" class="md-nav__link">
    <span class="md-ellipsis">
      Dispacher
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 scheduling criteria
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 è°ƒåº¦ç®—æ³• scheduling algorithms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3 è°ƒåº¦ç®—æ³• scheduling algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fcfsfirst-come-first-served" class="md-nav__link">
    <span class="md-ellipsis">
      FCFS(First-Come, First-Served)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sjfshortest-job-first" class="md-nav__link">
    <span class="md-ellipsis">
      SJF(Shortest-Job-First)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Priority Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highest-response-ratio-next-hrrn" class="md-nav__link">
    <span class="md-ellipsis">
      Highest Response Ratio Next ï¼ˆHRRNï¼‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#round-robin-rr" class="md-nav__link">
    <span class="md-ellipsis">
      Round Robin (RR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multilevel-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Multilevel Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-feedback-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Feedback Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-processor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple-processor scheduling(äº†è§£)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Real-time scheduling(äº†è§£)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Thread scheduling(äº†è§£)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q" class="md-nav__link">
    <span class="md-ellipsis">
      Q
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-process-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      6 è¿›ç¨‹åŒæ­¥ Process synchronization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 è¿›ç¨‹åŒæ­¥ Process synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-background" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 èƒŒæ™¯ background
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1 èƒŒæ™¯ background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#race-condition" class="md-nav__link">
    <span class="md-ellipsis">
      Race condition ç«æ€æ¡ä»¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-critical-section-problem" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2 ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      è§£å†³æ–¹æ¡ˆ solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63" class="md-nav__link">
    <span class="md-ellipsis">
      6.3 åŒæ­¥æœºåˆ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.3 åŒæ­¥æœºåˆ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      è½¯ä»¶æ–¹æ³•
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      ç¡¬ä»¶æ–¹æ³•
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex-locks" class="md-nav__link">
    <span class="md-ellipsis">
      äº’æ–¥é” Mutex locks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphores" class="md-nav__link">
    <span class="md-ellipsis">
      ä¿¡å·é‡æ–¹æ³• Semaphores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      ç®¡ç¨‹æ–¹æ³•
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      ä¾‹å­
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      é¢˜ç›®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      7 æ­»é” Deadlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 æ­»é” Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-the-deadlock-problem" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 The Deadlock Problem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.1 The Deadlock Problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      äº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-system-model" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 ç³»ç»Ÿæ¨¡å‹ System Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.2 ç³»ç»Ÿæ¨¡å‹ System Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-allocation-graph" class="md-nav__link">
    <span class="md-ellipsis">
      èµ„æºåˆ†é…å›¾ Resource-Allocation Graph
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-methods-for-handling-deadlocks" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.3 æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deadlock-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Prevention (é¢„é˜²)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-avoidance" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Avoidance (é¿å…)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Detection ( æ£€æµ‹ )
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#77-recovery-from-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      7.7 Recovery from Deadlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.7 Recovery from Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-preemption" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Preemption
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CN.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    è®¡ç®—æœºç½‘ç»œ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="%E6%AF%9B%E6%A6%82.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    æ¯›æ¦‚
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="IoT.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ç‰©è”ç½‘
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    æŠ€èƒ½âš™ï¸
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            æŠ€èƒ½âš™ï¸
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../skills/Algorithm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ç®—æ³•
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../skills/deeplearning.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    æ·±åº¦å­¦ä¹ 
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    å…¶ä»–ğŸŠ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            å…¶ä»–ğŸŠ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other/IELTs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IELTS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other/test.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    æ‰¾å·¥
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            æ‰¾å·¥
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../work/Interview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    é¢è¯•
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      1 æ¦‚è¿° Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 æ¦‚è¿° Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 æ“ä½œç³»ç»ŸåŠŸèƒ½&amp;å®šä¹‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2 è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      ä¸­æ–­ interrupt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 å­˜å‚¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 è®¡ç®—æœºä½“ç³»ç»“æ„
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15" class="md-nav__link">
    <span class="md-ellipsis">
      1.5 æ“ä½œç³»ç»Ÿç»“æ„
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-os-operations" class="md-nav__link">
    <span class="md-ellipsis">
      1.6 æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.6 æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-management" class="md-nav__link">
    <span class="md-ellipsis">
      Process management è¿›ç¨‹ç®¡ç†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-management" class="md-nav__link">
    <span class="md-ellipsis">
      Memory managementå†…å­˜ç®¡ç†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-management" class="md-nav__link">
    <span class="md-ellipsis">
      File management æ–‡ä»¶ç®¡ç†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-management" class="md-nav__link">
    <span class="md-ellipsis">
      Storage management å­˜å‚¨ç®¡ç†
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-purposes" class="md-nav__link">
    <span class="md-ellipsis">
      æ€»ç»“ OS purposes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-operating-system-structures" class="md-nav__link">
    <span class="md-ellipsis">
      2 ç»“æ„ Operating-System Structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 ç»“æ„ Operating-System Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 æ“ä½œç³»ç»ŸæœåŠ¡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-system-call" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 System call ç³»ç»Ÿè°ƒç”¨
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 System call ç³»ç»Ÿè°ƒç”¨">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      ç³»ç»Ÿè°ƒç”¨å®ç°
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      å‚æ•°ä¼ é€’
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      ç³»ç»Ÿè°ƒç”¨åˆ†ç±»
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 ç³»ç»Ÿç¨‹åº
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-os" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 osè®¾è®¡å’Œå®ç°
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 æ“ä½œç³»ç»Ÿç»“æ„
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 æ“ä½œç³»ç»Ÿç»“æ„">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unix" class="md-nav__link">
    <span class="md-ellipsis">
      UNIX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monolithic-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Monolithic System Structure å®å†…æ ¸æ¶æ„
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microkernel-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Microkernel System Structure å¾®å†…æ ¸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hybrid-structuredarwin" class="md-nav__link">
    <span class="md-ellipsis">
      Hybrid Structureâ€”â€”Darwin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layered-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Layered Approach åˆ†å±‚æ–¹æ³•
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules æ¨¡å—åŒ–
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Other Structures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-virtual-machines" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 è™šæ‹Ÿæœº Virtual Machines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.6 è™šæ‹Ÿæœº Virtual Machines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hypervisor" class="md-nav__link">
    <span class="md-ellipsis">
      HyperVisor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-os" class="md-nav__link">
    <span class="md-ellipsis">
      2.7 OSç”Ÿæˆ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28-system-boot" class="md-nav__link">
    <span class="md-ellipsis">
      2.8 ç³»ç»Ÿå¯åŠ¨ System Boot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-processes" class="md-nav__link">
    <span class="md-ellipsis">
      3 è¿›ç¨‹ Processes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 è¿›ç¨‹ Processes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 è¿›ç¨‹æ¦‚å¿µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 è¿›ç¨‹æ¦‚å¿µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      å®šä¹‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    <span class="md-ellipsis">
      Process state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-control-blockpcb" class="md-nav__link">
    <span class="md-ellipsis">
      Process control block(PCB)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 è¿›ç¨‹è°ƒåº¦ scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 è¿›ç¨‹è°ƒåº¦ scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-scheduling-queues" class="md-nav__link">
    <span class="md-ellipsis">
      Process Scheduling Queues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedulers" class="md-nav__link">
    <span class="md-ellipsis">
      Schedulers è°ƒåº¦å™¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-switch" class="md-nav__link">
    <span class="md-ellipsis">
      Context Switch ä¸Šä¸‹æ–‡åˆ‡æ¢
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 è¿›ç¨‹æ“ä½œ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 è¿›ç¨‹æ“ä½œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Process Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      Process Termination
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-cooperating" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 å…±åŒåä½œ cooperating
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4 å…±åŒåä½œ cooperating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cooperating-processes" class="md-nav__link">
    <span class="md-ellipsis">
      Cooperating Processes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#producer-consumer" class="md-nav__link">
    <span class="md-ellipsis">
      Producer-consumer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 è¿›ç¨‹é—´é€šä¿¡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.5 è¿›ç¨‹é—´é€šä¿¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interprocess-communication-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      Interprocess Communication (IPC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Direct Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indirect-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Indirect Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronization åŒæ­¥æ€§
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-communication-in-client-server-systems" class="md-nav__link">
    <span class="md-ellipsis">
      3.6 Communication in Client-Server Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.6 Communication in Client-Server Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sockets" class="md-nav__link">
    <span class="md-ellipsis">
      Sockets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-threads" class="md-nav__link">
    <span class="md-ellipsis">
      4 çº¿ç¨‹ Threads
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 çº¿ç¨‹ Threads">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-and-multithreaded-processes" class="md-nav__link">
    <span class="md-ellipsis">
      Single and Multithreaded Processes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benfits" class="md-nav__link">
    <span class="md-ellipsis">
      Benfits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-threads" class="md-nav__link">
    <span class="md-ellipsis">
      User Threads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-threads" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel Threads
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-multithreading-models" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Multithreading Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-threading-issues" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Threading Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Threading Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread-cancellation" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Cancellation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Signal Handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-pools" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Pools çº¿ç¨‹æ± 
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-activations" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduler Activations è°ƒåº¦æ¿€æ´»
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      5 è°ƒåº¦ CPU Scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 è°ƒåº¦ CPU Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Basic concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1 Basic concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Scheduler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispacher" class="md-nav__link">
    <span class="md-ellipsis">
      Dispacher
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 scheduling criteria
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 è°ƒåº¦ç®—æ³• scheduling algorithms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3 è°ƒåº¦ç®—æ³• scheduling algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fcfsfirst-come-first-served" class="md-nav__link">
    <span class="md-ellipsis">
      FCFS(First-Come, First-Served)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sjfshortest-job-first" class="md-nav__link">
    <span class="md-ellipsis">
      SJF(Shortest-Job-First)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Priority Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highest-response-ratio-next-hrrn" class="md-nav__link">
    <span class="md-ellipsis">
      Highest Response Ratio Next ï¼ˆHRRNï¼‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#round-robin-rr" class="md-nav__link">
    <span class="md-ellipsis">
      Round Robin (RR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multilevel-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Multilevel Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-feedback-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Feedback Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-processor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple-processor scheduling(äº†è§£)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Real-time scheduling(äº†è§£)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Thread scheduling(äº†è§£)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q" class="md-nav__link">
    <span class="md-ellipsis">
      Q
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-process-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      6 è¿›ç¨‹åŒæ­¥ Process synchronization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 è¿›ç¨‹åŒæ­¥ Process synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-background" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 èƒŒæ™¯ background
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1 èƒŒæ™¯ background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#race-condition" class="md-nav__link">
    <span class="md-ellipsis">
      Race condition ç«æ€æ¡ä»¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-critical-section-problem" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2 ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      è§£å†³æ–¹æ¡ˆ solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63" class="md-nav__link">
    <span class="md-ellipsis">
      6.3 åŒæ­¥æœºåˆ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.3 åŒæ­¥æœºåˆ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      è½¯ä»¶æ–¹æ³•
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      ç¡¬ä»¶æ–¹æ³•
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex-locks" class="md-nav__link">
    <span class="md-ellipsis">
      äº’æ–¥é” Mutex locks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphores" class="md-nav__link">
    <span class="md-ellipsis">
      ä¿¡å·é‡æ–¹æ³• Semaphores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      ç®¡ç¨‹æ–¹æ³•
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      ä¾‹å­
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      é¢˜ç›®
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      7 æ­»é” Deadlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 æ­»é” Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-the-deadlock-problem" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 The Deadlock Problem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.1 The Deadlock Problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      äº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-system-model" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 ç³»ç»Ÿæ¨¡å‹ System Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.2 ç³»ç»Ÿæ¨¡å‹ System Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-allocation-graph" class="md-nav__link">
    <span class="md-ellipsis">
      èµ„æºåˆ†é…å›¾ Resource-Allocation Graph
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-methods-for-handling-deadlocks" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.3 æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deadlock-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Prevention (é¢„é˜²)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-avoidance" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Avoidance (é¿å…)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Detection ( æ£€æµ‹ )
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#77-recovery-from-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      7.7 Recovery from Deadlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.7 Recovery from Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-preemption" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Preemption
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
  <!-- Add scripts that need to run afterwards here -->
  
    <script src="../js/toc.js" defer></script>
    <link rel="stylesheet" href="../css/fold_toc.css">
  

          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="operating-system-concepts">æ“ä½œç³»ç»Ÿ Operating System Concepts<a class="headerlink" href="#operating-system-concepts" title="Permanent link">&para;</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8V2m6.78 1a.69.69 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38-2.5-2.5Z"/></svg></span> çº¦ 9381 ä¸ªå­— <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg></span> 174 è¡Œä»£ç  <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3L12.5 13Z"/></svg></span> é¢„è®¡é˜…è¯»æ—¶é—´ 33 åˆ†é’Ÿ</p>
</div>
<blockquote>
<p>[!NOTE]</p>
<p>LAB 0-7ï¼ˆ5+15+15+15+20+20+10+10=110ï¼‰</p>
</blockquote>
<h2 id="1-overview">1 æ¦‚è¿° Overview<a class="headerlink" href="#1-overview" title="Permanent link">&para;</a></h2>
<h3 id="11">1.1 æ“ä½œç³»ç»ŸåŠŸèƒ½&amp;å®šä¹‰<a class="headerlink" href="#11" title="Permanent link">&para;</a></h3>
<p>ä»è®¡ç®—æœºè§’åº¦ï¼Œ<strong>æ“ä½œç³»ç»Ÿ</strong>æ˜¯ä¸ªç¨‹åºï¼Œç®¡ç†ç”µè„‘ç¡¬ä»¶</p>
<ul>
<li>resource allocatorï¼šåˆ†é…èµ„æºï¼ˆcpuã€å†…å­˜ã€I/Oè®¾å¤‡â€”â€”ç¡¬ä»¶hardware æä¾›èµ„æºï¼‰</li>
<li>control programï¼šé˜²æ­¢èµ„æºæ»¥ç”¨</li>
</ul>
<p><strong>å®šä¹‰</strong>ï¼šThe operating system is the one program running at all times on the computerâ€”â€”namely kernel
æ“ä½œç³»ç»Ÿæ˜¯ä¸€ç›´è¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„ç¨‹åºâ€”â€”é€šå¸¸ç§°ä¸ºå†…æ ¸</p>
<p>multi-user OS: Linux ubuntu</p>
<h3 id="12">1.2 è®¡ç®—æœºç³»ç»Ÿçš„è¿è¡Œ<a class="headerlink" href="#12" title="Permanent link">&para;</a></h3>
<p>è®¡ç®—æœº= CPU + å¤šä¸ªè®¾å¤‡æ§åˆ¶å™¨ï¼ˆI/O devicesï¼‰ï¼Œé€šè¿‡å…¬ç”¨æ€»çº¿ç›¸è¿ï¼Œè¯¥æ€»çº¿æä¾›äº†å…±äº«å†…å­˜çš„è®¿é—®</p>
<p>CPUå’ŒI/Oè®¾å¤‡å¯ä»¥å¹¶å‘æ‰§è¡Œï¼ˆexecute concurrentlyï¼‰ï¼Œå¹¶ç«äº‰è®¿é—®å†…å­˜ï¼Œéœ€è¦å†…å­˜æ§åˆ¶å™¨åè°ƒè®¿é—®å†…å­˜</p>
<p>æ¯ä¸ªè®¾å¤‡æ§åˆ¶å™¨ device controller</p>
<ul>
<li>æ§åˆ¶ç‰¹å®šçš„è®¾å¤‡ï¼ˆç£ç›˜é©±åŠ¨å™¨ã€éŸ³é¢‘ã€è§†é¢‘æ˜¾ç¤º..ï¼‰</li>
<li>æœ‰æœ¬åœ°ç¼“å†²åŒºï¼ˆlocal bufferï¼‰ï¼Œå­˜å‚¨I/O</li>
<li>ç»ç³»ç»Ÿæ€»çº¿system busè§¦å‘ä¸­æ–­interruptå‘ŠçŸ¥CPUå·²å®Œæˆ</li>
</ul>
<p>å¼•å¯¼ç¨‹åºbootstrap programåœ¨å¼€æœºpower-up/rebootæ—¶åŠ è½½</p>
<ul>
<li>åˆ°ROM/EPROMä¸Šï¼ˆRead-only Memoryæ˜¯firmwareå›ºä»¶ï¼‰</li>
<li>åˆå§‹åŒ–ç³»ç»Ÿ</li>
<li>bootstrapå®šä½æ“ä½œç³»ç»Ÿå†…æ ¸å¹¶åŠ è½½åˆ°å†…å­˜ã€å¼€å§‹æ‰§è¡Œ</li>
</ul>
<h4 id="interrupt">ä¸­æ–­ interrupt<a class="headerlink" href="#interrupt" title="Permanent link">&para;</a></h4>
<p>ä¸­æ–­æ˜¯</p>
<p>ISRä¸­æ–­æœåŠ¡ä¾‹ç¨‹interrupt service routine</p>
<p>ä¸­æ–­å‘é‡interrupt vectorï¼šå­˜å‚¨ä¸­æ–­<em>ä¾‹ç¨‹</em>çš„åœ°å€ the addresses of all the service routines</p>
<ul>
<li>å¯„å­˜å™¨ï¼ˆInterrupt architectureï¼‰å‚¨å­˜è¢«ä¸­æ–­<em>æŒ‡ä»¤</em>çš„åœ°å€ </li>
</ul>
<p>æœ‰ä¸­æ–­åœ¨å¤„ç†æ—¶ä¼šåœæ­¢å…¶ä»–æœªåˆ°çš„ä¸­æ–­
Incoming interrupts are disabled while another interrupt is being processed to prevent a lost interrupt.</p>
<p>trap ï¼šè½¯ä»¶çš„ä¸­æ–­ï¼Œç»å¸¸ç”±é”™è¯¯æˆ–ç”¨æˆ·è¯·æ±‚ï¼ˆåˆç§° ç³»ç»Ÿè°ƒç”¨system callï¼‰å¯¼è‡´</p>
<p><strong>æ“ä½œç³»ç»Ÿæ˜¯ç”±ä¸­æ–­é©±åŠ¨çš„ **
</strong>An operating system is interrupt-driven**</p>
<p>ä¸­æ–­å¤„ç†â€”â€”ä¸€ç§è½¯ä»¶ä¾‹ç¨‹å¤„ç†</p>
<ol>
<li>æ¢å¤CPUçŠ¶æ€â€”â€”å­˜å¯„å­˜å™¨&amp;ç¨‹åºè®¡æ•°å™¨ï¼ˆprogram counterï¼‰
   - è®¡æ•°å™¨ï¼šå­˜å‚¨ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„ä½ç½®</li>
<li>ç¡®å®šä¸­æ–­ç±»å‹ï¼špolling by a generic routine or vectored interrupt system</li>
</ol>
<p>ä¸¤ç§I/Oå¤„ç†æ–¹å¼ï¼š</p>
<ol>
<li>è¦ç­‰å¾…ï¼Œå¤„ç†å®Œä¼ å›â€”â€”åŒæ­¥ synchronous</li>
<li>æ¥æ”¶åˆ°ï¼ˆæ²¡åšå®Œï¼‰å°±ä¼ å›â€”â€”å¼‚æ­¥ asynchronous</li>
</ol>
<p><img src="../images/image-20240911152005368.png" alt="image-20240911152005368" style="zoom:50%;" /></p>
<p>DMAï¼šç›´æ¥å†…å­˜è®¿é—®</p>
<p><img src="../images/image-20240911152146945.png" alt="image-20240911152146945" style="zoom:50%;" /></p>
<p>æ¯å—åªäº§ç”Ÿä¸€ä¸ªä¸­æ–­</p>
<h3 id="13">1.3 å­˜å‚¨<a class="headerlink" href="#13" title="Permanent link">&para;</a></h3>
<p><img src="../images/image-20240911152243818.png" alt="image-20240911152243818" style="zoom:50%;" /></p>
<p>é€Ÿåº¦ã€èŠ±é”€ã€æ˜“å¤±æ€§</p>
<p>ä¸€çº§äºŒçº§ä¸‰çº§æ˜¯æŒ‰å®¹é‡åˆ†çš„</p>
<p>é«˜é€Ÿç¼“å­˜cacheâ€”â€”æ›´å¿«çš„æ•°æ®è®¿é—®æœºåˆ¶ï¼Œä¸»å­˜å¯ä»¥è®¤ä¸ºæ˜¯äºŒçº§å­˜å‚¨çš„æœ€åä¸€ä¸ªcache</p>
<h3 id="14">1.4 è®¡ç®—æœºä½“ç³»ç»“æ„<a class="headerlink" href="#14" title="Permanent link">&para;</a></h3>
<p><strong>å¤šå¤„ç†å™¨</strong> multiprocessing</p>
<ul>
<li>å¢åŠ ååé‡</li>
<li>è§„æ¨¡ç»æµ</li>
<li>å¢åŠ å¯é æ€§</li>
</ul>
<p>å¯¹ç§°å¤šå¤„ç†å™¨ SMP symmetric multiprocessingï¼šæ‰€æœ‰å¤„ç†å™¨å¯¹ç­‰ã€æ²¡æœ‰ä¸»ä»å…³ç³»ï¼Œå…±äº«å†…å­˜</p>
<p>å¤šæ ¸ multicore</p>
<ul>
<li>å•ç‰‡é€šä¿¡æ¯”èŠ¯ç‰‡é—´é€šä¿¡å¿«</li>
<li>å¤šæ ¸ç”µæºæ¶ˆè€—ä½</li>
</ul>
<p>éå‡åŒ€å†…å­˜è®¿é—® Non-uniform memory access(NUMA architecture)</p>
<ul>
<li>CPUé€šè¿‡ä¸€ä¸ªå…±äº«ç³»ç»Ÿè¿æ¥</li>
<li>éšç€å¤„ç†å™¨çš„å¢åŠ è€Œæ›´æœ‰æ•ˆåœ°æ‰©å±•</li>
<li>è·¨äº’è¿çš„è¿œç¨‹å†…å­˜é€Ÿåº¦è¾ƒæ…¢</li>
<li>æ“ä½œç³»ç»Ÿéœ€è¦ä»”ç»†çš„ CPU è°ƒåº¦å’Œå†…å­˜ç®¡ç†</li>
</ul>
<h3 id="15">1.5 æ“ä½œç³»ç»Ÿç»“æ„<a class="headerlink" href="#15" title="Permanent link">&para;</a></h3>
<p><strong>Multiprogramming å¤šé“ç¨‹åºè®¾è®¡</strong> needed for efficiency (<mark>CPU utilization</mark>)</p>
<ul>
<li>ç»„ç»‡å„é¡¹ä»»åŠ¡è®©CPUæ€»æœ‰å·¥ä½œåš</li>
<li>åŠ è½½å¤šé¡¹ä»»åŠ¡åˆ°å†…å­˜</li>
<li>é€šè¿‡ job scheduling å®‰æ’é€‰ä¸€ä¸ªä»»åŠ¡åš</li>
<li>å®šä¹‰ï¼šåœ¨ä¸€ä¸ªcpuä¸Šå¹¶å‘è¿è¡Œå¤šä¸ªè¿›ç¨‹</li>
</ul>
<p><strong>Timesharing (multitasking)</strong> is logical extension in which CPU switches jobs so frequently that users can interact with each job while it is running, creating interactive computing (<mark>interactivity</mark>)</p>
<ul>
<li>å“åº”é€Ÿåº¦è¶³å¤Ÿå¿«</li>
<li>å¤šä»»åŠ¡ï¼ˆè¿›ç¨‹ processï¼‰å¹¶å‘åœ¨CPUä¸Šæ‰§è¡Œ -&gt; CPUè°ƒåº¦scheduling</li>
<li>å¦‚æœä¸€ä¸ªè¿›ç¨‹ä¸èƒ½å…¨æ”¾å…¥å†…å­˜memory -&gt; æ¢å…¥æ¢å‡ºswappingï¼ˆå°†æ²¡ç”¨çš„è¿›ç¨‹æŒªå‡ºï¼‰</li>
<li>è™šå­˜virtual memoryï¼šä¸€ç§æŠ€æœ¯å…è®¸CPUæ‰§è¡Œä¸å®Œå…¨åœ¨å†…å­˜çš„è¿›ç¨‹</li>
</ul>
<h3 id="16-os-operations">1.6 æ“ä½œç³»ç»Ÿæ‰§è¡Œ OS operations<a class="headerlink" href="#16-os-operations" title="Permanent link">&para;</a></h3>
<blockquote>
<p>[!IMPORTANT]</p>
<p>Interrupt driven by hardware</p>
<p>Software error or request creates exception or trap</p>
<ul>
<li>Division by zero, request for operating system service</li>
</ul>
<p>Other process problems include infinite loop, processes modifying each other or the operating system</p>
</blockquote>
<p><strong>åŒæ¨¡å¼dual-mode</strong> æ“ä½œå…è®¸æ“ä½œç³»ç»Ÿä¿æŠ¤è‡ªèº«å’Œå…¶ä»–ç³»ç»Ÿç»„ä»¶</p>
<ul>
<li>ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼ user mode &amp; kernel mode</li>
<li>ç¡¬ä»¶æä¾›çš„æ¨¡å¼ä½ mode bit</li>
<li>æä¾›åŒºåˆ†ç³»ç»Ÿä½•æ—¶è¿è¡Œç”¨æˆ·ä»£ç æˆ–å†…æ ¸ä»£ç çš„èƒ½åŠ›</li>
<li>ä¸€äº›æŒ‡ä»¤è¢«æŒ‡å®šä¸ºç‰¹æƒprivilegedï¼Œåªèƒ½åœ¨å†…æ ¸æ¨¡å¼ä¸‹æ‰§è¡Œ</li>
<li>ç³»ç»Ÿè°ƒç”¨system callå°†æ¨¡å¼æ›´æ”¹ä¸º kernel æ¨¡å¼ï¼Œå†é€šè¿‡ç³»ç»Ÿè°ƒç”¨å›æ¥å°†å…¶é‡ç½®ä¸º user æ¨¡å¼</li>
</ul>
<p><img alt="image-20240914104446706" src="../images/image-20240914104446706.png" /></p>
<p><strong>Timerå®šæ—¶å™¨</strong>ï¼šé˜²æ­¢æ— é™å¾ªç¯/è¿›ç¨‹å ç”¨èµ„æº</p>
<ul>
<li>åœ¨ä¸€æ®µæ—¶é—´åä¸­æ–­è¿›ç¨‹ set interrupt</li>
<li>æ“ä½œç³»ç»Ÿå°†è®¡æ•°å™¨counter <code>-1</code>ï¼Œ<strong>åˆ°0äº§ç”Ÿä¸­æ–­</strong></li>
<li>åœ¨å®‰æ’æµç¨‹ä¹‹å‰è¿›è¡Œè®¾ç½®ï¼Œä»¥é‡æ–°è·å¾—æ§åˆ¶æƒæˆ–ç»ˆæ­¢è¶…è¿‡åˆ†é…æ—¶é—´çš„ç¨‹åº</li>
</ul>
<h4 id="process-management">Process management è¿›ç¨‹ç®¡ç†<a class="headerlink" href="#process-management" title="Permanent link">&para;</a></h4>
<p>ç¨‹åºæ˜¯è¢«åŠ¨å®ä½“ï¼Œè¿›ç¨‹æ˜¯ä¸»åŠ¨å®ä½“ active entity</p>
<ul>
<li>éœ€è¦èµ„æºå»æ‰§è¡Œ</li>
<li>è¿›ç¨‹ç»ˆæ­¢æ—¶å°†èµ„æºè¿˜ç»™æ“ä½œç³»ç»Ÿ</li>
<li><strong>å¤šçº¿ç¨‹è¿›ç¨‹Multi-threaded process</strong> æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªè®¡æ•°å™¨</li>
<li><strong>å¤šè·¯å¤ç”¨multiplexing</strong>-&gt;å®ç°å¹¶å‘concurrency</li>
</ul>
<p><img src="../images/image-20240914111333126.png" alt="image-20240914111333126" style="zoom:50%;" /></p>
<h4 id="memory-management">Memory managementå†…å­˜ç®¡ç†<a class="headerlink" href="#memory-management" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20240914110859245.png" style="zoom:50%;" /></p>
<h4 id="file-management">File management æ–‡ä»¶ç®¡ç†<a class="headerlink" href="#file-management" title="Permanent link">&para;</a></h4>
<p>æ–‡ä»¶ç®¡ç†ï¼šåˆ›å»ºã€åˆ é™¤ã€åŠ å¯†</p>
<p><img src="../images/image-20240914111350634.png" alt="image-20240914111350634" style="zoom:50%;" /></p>
<h4 id="storage-management">Storage management å­˜å‚¨ç®¡ç†<a class="headerlink" href="#storage-management" title="Permanent link">&para;</a></h4>
<p>Mass-Storage Management</p>
<p><img src="../images/image-20240914111610391.png" alt="image-20240914111610391" style="zoom:40%;" /></p>
<p>I/O Subsystem å­ç³»ç»Ÿ</p>
<p><img src="../images/image-20240914112031690.png" alt="image-20240914112031690" style="zoom: 40%;" /></p>
<h3 id="os-purposes">æ€»ç»“ OS purposes<a class="headerlink" href="#os-purposes" title="Permanent link">&para;</a></h3>
<ul>
<li>Abstraction æŠ½è±¡ï¼š a way to hide complexity</li>
<li>Multiplex å¤šè·¯å¤ç”¨ï¼ˆç©ºé—´ã€æ—¶é—´ï¼‰</li>
<li>Isolation éš”ç¦»ï¼ˆç”¨æˆ·/æ ¸æ¨¡å¼ï¼‰</li>
<li>Sharing å…±äº«ï¼ˆç”¨æˆ·ã€è¿›ç¨‹ èµ„æºå…±äº«-&gt;å¹¶å‘ï¼‰</li>
<li>Security å®‰å…¨ï¼ˆç‰¹æƒæŒ‡ä»¤</li>
<li>Performance æ€§èƒ½</li>
<li>Range of uses</li>
</ul>
<h2 id="2-operating-system-structures">2 ç»“æ„ Operating-System Structures<a class="headerlink" href="#2-operating-system-structures" title="Permanent link">&para;</a></h2>
<h3 id="21">2.1 æ“ä½œç³»ç»ŸæœåŠ¡<a class="headerlink" href="#21" title="Permanent link">&para;</a></h3>
<p>æ“ä½œç³»ç»Ÿæä¾›çš„æœåŠ¡æœ‰ï¼š</p>
<ul>
<li>UI(user interface)</li>
<li>CLI(command line)</li>
<li>
<p>ä¼˜ç‚¹ï¼šå¯¹é‡å¤æ€§å·¥ä½œé«˜æ•ˆ</p>
</li>
<li>
<p>GUI (Graphics User Interface)</p>
</li>
</ul>
<h3 id="22-system-call">2.2 System call ç³»ç»Ÿè°ƒç”¨<a class="headerlink" href="#22-system-call" title="Permanent link">&para;</a></h3>
<h4 id="_1">ç³»ç»Ÿè°ƒç”¨å®ç°<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<p>APIï¼ˆApplication program interface)ï¼šè¢«å°è£…è¿‡high-levelçš„ç³»ç»Ÿè°ƒç”¨</p>
<ul>
<li>Mostly accessed by programs via a high-level API rather than direct system call use ä¸»è¦é€šè¿‡é«˜çº§çš„APIæ¥è§¦ç¨‹åºè€Œä¸æ˜¯ç›´æ¥çš„ç³»ç»Ÿè°ƒç”¨</li>
</ul>
<p>æ¯ä¸ªç³»ç»Ÿè°ƒç”¨æœ‰ä¸ªç¼–å·ï¼Œé€šè¿‡ç³»ç»Ÿè°ƒç”¨è¡¨ table</p>
<p>ç³»ç»Ÿè°ƒç”¨å‘ç”Ÿæ—¶ï¼Œç¨‹åºæ§åˆ¶æƒå°†äº¤ç»™å†…æ ¸æ¥å®ŒæˆæœåŠ¡ï¼ŒæœåŠ¡å®Œæˆåï¼Œæ§åˆ¶æƒå†è¿˜ç»™ç¨‹åºï¼ˆå›åˆ°ç”¨æˆ·çŠ¶æ€</p>
<p>ç³»ç»Ÿè°ƒç”¨æ˜¯ç”¨æˆ·åº”ç”¨ï¼ˆè½¯ä»¶ï¼‰å’Œç¡¬ä»¶ä¹‹é—´æ²Ÿé€šçš„æ¡¥æ¢â€”â€”ä¿è¯äº†å®‰å…¨å’Œæœ‰æ•ˆçš„æ²Ÿé€š secure &amp; efficient</p>
<h4 id="_2">å‚æ•°ä¼ é€’<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<p>æœ€ç®€å•ï¼šå¯„å­˜å™¨ä¿å­˜</p>
<p>é—´æ¥æ–¹å¼ï¼šblockã€tableã€memoryï¼ŒæŠŠå†…å­˜ä¸­bufferåœ°å€å‘Šè¯‰å¯„å­˜å™¨ï¼ˆLinux &amp; Solarisï¼‰</p>
<p>å…¶ä»–ï¼šæ ˆstackï¼Œä¸ä¸€å®šæ”¯æŒå¤šç”¨æˆ·</p>
<ul>
<li>blockå’Œstackæ–¹æ³•ä¸é™åˆ¶å‚æ•°çš„æ•°é‡æˆ–é•¿åº¦</li>
</ul>
<h4 id="_3">ç³»ç»Ÿè°ƒç”¨åˆ†ç±»<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>Process control è¿›ç¨‹ç®¡ç†
File management æ–‡ä»¶ç®¡ç†
Device management è®¾å¤‡ç®¡ç†
Information maintenance (e.g. time,date)ä¿¡æ¯ç»´æŠ¤
Communications äº¤æµ
Protection ä¿æŠ¤</p>
<p><img src="../images/image-20240918150058573.png" alt="image-20240918150058573" style="zoom:50%;" /></p>
<h3 id="23">2.3 ç³»ç»Ÿç¨‹åº<a class="headerlink" href="#23" title="Permanent link">&para;</a></h3>
<p>åˆ†ç±»ï¼šFile manipulationã€Status informationã€File modificationã€Programming language supportã€Program loading and executionã€Communicationsã€Application programs</p>
<p>.....debuggers</p>
<p>ä¸æ˜¯ç³»ç»Ÿç¨‹åºï¼šweb browsersã€word processorsï¼ˆç”¨æˆ·ç¨‹åºï¼‰</p>
<h3 id="24-os">2.4 osè®¾è®¡å’Œå®ç°<a class="headerlink" href="#24-os" title="Permanent link">&para;</a></h3>
<p>osè®¾è®¡å’Œå®ç°ä¸æ˜¯ä¸€ä¸ªè§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼ˆä¸æ˜¯å…·ä½“çš„é—®é¢˜è€Œæ˜¯åˆ›é€ æ€§è¿‡ç¨‹ï¼‰</p>
<p>1.ç”±ç›®æ ‡å’ŒæŒ‡æ ‡å‡ºå‘ï¼šç”¨æˆ·ç›®æ ‡ã€ç³»ç»Ÿç›®æ ‡</p>
<p>2.è¢«ç¡¬ä»¶å’Œç³»ç»Ÿç±»å‹å½±å“</p>
<p><strong>Policy</strong>:   What to do? ç­–ç•¥ï¼ˆç¡®å®šå…·ä½“åšä»€ä¹ˆäº‹ï¼Œegå…è®¸æŸäº›ç”¨æˆ·è®¿é—®æŸäº›æ–‡ä»¶ï¼‰
<strong>Mechanism</strong>:  How to do it? æœºåˆ¶ï¼ˆå®šä¹‰åšäº‹æ–¹å¼ï¼‰</p>
<p>å†…å­˜ç®¡ç†ã€cpuè°ƒåº¦æ˜¯æœºåˆ¶ï¼Ÿï¼ˆç®—æ³•æ˜¯æœºåˆ¶ï¼Ÿ</p>
<p>é…ç½®æ–‡ä»¶å†™çš„æ˜¯ç­–ç•¥ï¼ˆpolicyï¼‰</p>
<p><mark>Provide mechanism rather than policy</mark>. In particular, place user interface policy in the clients' hands. </p>
<h3 id="25">2.5 æ“ä½œç³»ç»Ÿç»“æ„<a class="headerlink" href="#25" title="Permanent link">&para;</a></h3>
<h4 id="simple-structure">Simple Structure<a class="headerlink" href="#simple-structure" title="Permanent link">&para;</a></h4>
<p>MS-DOS: provide the most functionality in the least space</p>
<ul>
<li>ä¸åˆ†æ¨¡å—ï¼Œç•Œé¢å’Œå¤šçº§åŠŸèƒ½é—´æ²¡æœ‰å¾ˆå¥½çš„åˆ†å¼€</li>
</ul>
<h4 id="unix">UNIX<a class="headerlink" href="#unix" title="Permanent link">&para;</a></h4>
<p>UNIX â€“ å—ç¡¬ä»¶åŠŸèƒ½é™åˆ¶ï¼ŒåŸå§‹ UNIX æ“ä½œç³»ç»Ÿç»“æ„æœ‰é™ã€‚UNIX æ“ä½œç³»ç»Ÿç”±ä¸¤ä¸ªå¯åˆ†ç¦»çš„éƒ¨åˆ†ç»„æˆ</p>
<ul>
<li>ç³»ç»Ÿç¨‹åº</li>
<li>å†…æ ¸</li>
<li>åŒ…æ‹¬ç³»ç»Ÿè°ƒç”¨æ¥å£ä»¥ä¸‹å’Œç‰©ç†ç¡¬ä»¶ä»¥ä¸Šçš„æ‰€æœ‰å†…å®¹</li>
<li>æä¾›æ–‡ä»¶ç³»ç»Ÿã€CPU è°ƒåº¦ã€å†…å­˜ç®¡ç†å’Œå…¶ä»–æ“ä½œç³»ç»ŸåŠŸèƒ½ï¼›ä¸€ä¸ªçº§åˆ«çš„å¤§é‡åŠŸèƒ½</li>
</ul>
<h4 id="monolithic-system-structure">Monolithic System Structure å®å†…æ ¸æ¶æ„<a class="headerlink" href="#monolithic-system-structure" title="Permanent link">&para;</a></h4>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li></li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li></li>
</ul>
<p><strong>UNIX System Structure</strong> å®å†…æ ¸</p>
<p><img src="../images/image-20240918154609215.png" alt="image-20240918154609215" style="zoom:50%;" /></p>
<h4 id="microkernel-system-structure">Microkernel System Structure å¾®å†…æ ¸<a class="headerlink" href="#microkernel-system-structure" title="Permanent link">&para;</a></h4>
<p>å¯¹åº”å®å†…æ ¸</p>
<p>å°†å°½å¯èƒ½å¤šçš„å†…å®¹ä»å†…æ ¸ç§»è‡³â€œç”¨æˆ·â€ç©ºé—´ï¼Œæä¾›ä¸€å°éƒ¨åˆ†æœåŠ¡ä¾‹å¦‚è¿›ç¨‹è°ƒåº¦</p>
<p>ç”¨æˆ·æ¨¡å—ä¹‹é—´ä½¿ç”¨æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡ message passing</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ›´æ˜“äºæ‰©å±• extend å¾®å†…æ ¸</li>
<li>æ›´æ˜“äºå°†æ“ä½œç³»ç»Ÿç§»æ¤ port åˆ°æ–°æ¶æ„ï¼ˆflexibilityï¼‰</li>
<li>æ›´å¯é ï¼ˆå†…æ ¸æ¨¡å¼ä¸‹è¿è¡Œçš„ä»£ç æ›´å°‘</li>
<li>æ›´å®‰å…¨</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´é€šä¿¡çš„æ€§èƒ½å¼€é”€performanceä½ï¼ˆå®å†…æ ¸æ›´é«˜æ•ˆï¼‰</li>
<li>ç³»ç»ŸæœåŠ¡ã€é©±åŠ¨ç¨‹åºçš„å¤æ‚æ€§</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸å¤ªæœ‰æ•ˆ</li>
</ul>
<h4 id="hybrid-structuredarwin">Hybrid Structureâ€”â€”Darwin<a class="headerlink" href="#hybrid-structuredarwin" title="Permanent link">&para;</a></h4>
<p>æ··åˆæ¨¡å¼ï¼šBy ??</p>
<p>Windows, MacOS, iOSâ€”â€”æ··åˆå†…æ ¸</p>
<h4 id="layered-approach">Layered Approach åˆ†å±‚æ–¹æ³•<a class="headerlink" href="#layered-approach" title="Permanent link">&para;</a></h4>
<p>æ“ä½œç³»ç»Ÿåˆ†ä¸ºå¤šä¸ªå±‚ï¼ˆçº§åˆ«ï¼‰ï¼Œæ¯å±‚éƒ½å»ºç«‹åœ¨è¾ƒä½å±‚ä¹‹ä¸Šã€‚<strong>æœ€åº•å±‚ï¼ˆç¬¬0å±‚ï¼‰æ˜¯ç¡¬ä»¶ï¼›æœ€é«˜å±‚ï¼ˆç¬¬Nå±‚ï¼‰æ˜¯ç”¨æˆ·ç•Œé¢</strong>ã€‚
é€šè¿‡æ¨¡å—åŒ– modularity ï¼Œå¯ä»¥é€‰æ‹©å„å±‚ï¼Œä»¥ä¾¿æ¯å±‚ä»…ä½¿ç”¨è¾ƒä½å±‚çš„åŠŸèƒ½ï¼ˆæ“ä½œï¼‰å’ŒæœåŠ¡</p>
<p>é€»è¾‘åˆ†å±‚ï¼š</p>
<p><img src="../images/image-20240923104411850.png" alt="image-20240923104411850" style="zoom: 33%;" /></p>
<p>é€å±‚è°ƒç”¨ï¼ˆä¸èƒ½è·¨å±‚è°ƒç”¨ï¼‰ã€é€å±‚å°è£…â€”â€”å±‚ä¹‹é—´é€šè®¯çš„æ•ˆç‡é—®é¢˜</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>ç¼ºç‚¹ï¼šrequire more overhead for iter-layer communication</p>
<h4 id="modules">Modules æ¨¡å—åŒ–<a class="headerlink" href="#modules" title="Permanent link">&para;</a></h4>
<p>å’Œåˆ†å±‚ç›¸ä¼¼ä½†æ›´çµæ´»ã€å¯æ‹“å±•æ€§ scalï¼Œä½†æœ‰æ¨¡å—å…¼å®¹æ€§é—®é¢˜</p>
<ul>
<li>ä½¿ç”¨ç›®æ ‡å¯¼å‘çš„æ–¹æ³•</li>
<li>æ¯ä¸ªæ¨¡å—å†éœ€è¦æ—¶å¯ä»¥åŠ è½½åˆ°å†…æ ¸ä¸­ï¼ˆloadableï¼‰</li>
<li>æ¯ä¸ªæ¨¡å—æ ¸å¿ƒç»„ä»¶éš”ç¦»</li>
<li>æ¨¡å—ç›¸äº’è°ƒç”¨ï¼ˆé€šè¿‡å·²çŸ¥çš„æ¥å£ï¼‰è€Œä¸æ˜¯æ¶ˆæ¯ä¼ é€’</li>
</ul>
<p>LKMs(loadable kernel modules): extend the functionality of the kernel dynamically</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>ç¼ºç‚¹ï¼š</p>
<h4 id="other-structures">Other Structures<a class="headerlink" href="#other-structures" title="Permanent link">&para;</a></h4>
<p><strong>Exokernel å¤–æ ¸</strong> (1994)ï¼šé«˜åº¦ç®€åŒ–kernelï¼Œåªè´Ÿè´£èµ„æºåˆ†é…ï¼Œæä¾›äº†ä½çº§çš„ç¡¬ä»¶æ“ä½œï¼Œå¿…é¡»é€šè¿‡å®šåˆ¶libraryä¾›åº”ç”¨ä½¿ç”¨
é«˜æ€§èƒ½ï¼Œä½†å®šåˆ¶åŒ–libraryéš¾åº¦å¤§ï¼Œå…¼å®¹æ€§å·®</p>
<p>Unikernel: statically linked with the OS code needed.Good for cloud service, APP boots in tens of ms.</p>
<h3 id="26-virtual-machines">2.6 è™šæ‹Ÿæœº Virtual Machines<a class="headerlink" href="#26-virtual-machines" title="Permanent link">&para;</a></h3>
<p>A virtual machine takes the layered approach to its logical conclusion.  It treats <em>hardware and the operating system kernel</em> as though they were all <strong>hardware</strong> éƒ½çœ‹ä½œç¡¬ä»¶</p>
<p>A virtual machine provides an interface identical to the underlying bare hardware</p>
<p>The operating system creates the illusion of multiple processes, each executing on its own processor with its own (virtual) memory</p>
<h4 id="hypervisor">HyperVisor<a class="headerlink" href="#hypervisor" title="Permanent link">&para;</a></h4>
<p>TYPE1 Bare-Metal è£¸é‡‘å± architecture</p>
<ul>
<li>æ›´é«˜çš„æ€§èƒ½ã€å’Œç¡¬ä»¶ç›´æ¥æ¥è§¦ã€å®‰å…¨æ€§æ›´é«˜</li>
</ul>
<p>TYPE2 Hosted å®¿ä¸» éœ€è¦hostOSï¼Œeg VMwareã€Oracle</p>
<ul>
<li>åº”ç”¨ç®€å•ã€å’Œç°æœ‰OSå…¼å®¹æ€§é«˜ã€é€‚åˆæµ‹è¯•å’Œå¼€å‘ç¯å¢ƒ</li>
</ul>
<p>é€‰2ä¸é€‰1çš„å¸¸è§åŸå› ï¼šeasier integration with existing host OS</p>
<p><img src="../images/image-20240923111559930.png" alt="image-20240923111559930" style="zoom:50%;" /></p>
<p>ä¸‰ç§æŠ€æœ¯ï¼š</p>
<p>VMï¼šæ›´å¥½çš„éš”ç¦»æ€§ã€çµæ´»æ€§ï¼Œæœ‰èµ„æºæ¶ˆè€—ï¼ˆå¤æ‚ï¼‰çš„é—®é¢˜</p>
<p>LCï¼šæ›´åŠ è½»é‡çº§ï¼Œä¸éœ€è¦åŠ è½½å†…æ ¸osï¼ˆdockerï¼‰</p>
<p>Ukï¼šæ‰€æœ‰ä¸œè¥¿éƒ½æ‰“åŒ…ï¼Œåªèƒ½å…è®¸ä¸€ä¸ªappè¿è¡Œ</p>
<h3 id="27-os">2.7 OSç”Ÿæˆ<a class="headerlink" href="#27-os" title="Permanent link">&para;</a></h3>
<h3 id="28-system-boot">2.8 ç³»ç»Ÿå¯åŠ¨ System Boot<a class="headerlink" href="#28-system-boot" title="Permanent link">&para;</a></h3>
<h2 id="3-processes">3 è¿›ç¨‹ Processes<a class="headerlink" href="#3-processes" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 è¿›ç¨‹æ¦‚å¿µ<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<p>An operating system executes a variety of programs:</p>
<ul>
<li>Batch system â€“ a batch is a sequence of jobs</li>
<li>Time-sharing systems â€“ user programs or tasks</li>
<li>Multitasking</li>
<li>Less turnaround, less CPU idle, user interaction</li>
</ul>
<blockquote>
<p>[!NOTE]</p>
<p>Textbook uses the terms <em>job</em> and <em>process</em> almost interchangeably</p>
</blockquote>
<h4 id="_4">å®šä¹‰<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p>è¿›ç¨‹æ˜¯è¿è¡Œä¸­çš„ç¨‹åºï¼ŒæŒ‰ç…§æŒ‡ä»¤æµé¡ºåºè¿›è¡Œ</p>
<p>ä¸€ä¸ªè¿›ç¨‹åŒ…å«</p>
<ul>
<li>text section (code)</li>
<li>data section (global vars)</li>
<li>stack (function parameters, local vars, return addresses)</li>
<li>heap (dynamically allocated memory)</li>
<li>program counter </li>
</ul>
<p><img src="../images/image-20240923112853058.png" alt="image-20240923112853058" style="zoom:33%;" />stackå’Œheapç›¸å¯¹è€Œç”Ÿï¼šçµæ´»åº”ç”¨å†…å­˜ç©ºé—´</p>
<h4 id="process-state">Process state<a class="headerlink" href="#process-state" title="Permanent link">&para;</a></h4>
<ul>
<li>new</li>
<li>running</li>
<li>readyï¼šç­‰å¾…è¢«åˆ†é…ç»™ä¸€ä¸ªå¤„ç†å™¨ processorï¼ˆå·²ç»è¢«åŠ è½½è¿›å†…å­˜memory</li>
<li>waiting/block</li>
<li>terminatedï¼šç»“æŸè¿›ç¨‹</li>
</ul>
<p><img src="../images/image-20240923113548425.png" alt="image-20240923113548425" style="zoom: 33%;" /></p>
<h4 id="process-control-blockpcb">Process control block(PCB)<a class="headerlink" href="#process-control-blockpcb" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>OSæ•°æ®ç»“æ„ï¼Œç”¨æ¥è·Ÿè¸ªè¿›ç¨‹å’Œç›¸å…³èµ„æº</p>
</li>
<li>
<p>è®°å½• è¿›ç¨‹çŠ¶æ€ã€PCã€å¯„å­˜å™¨å€¼ã€CPUè°ƒåº¦ã€å†…å­˜ç®¡ç†ä¿¡æ¯ã€accountingä¿¡æ¯ã€I/Oä¿¡æ¯</p>
</li>
<li>Process ID æ˜¯è¿›ç¨‹çš„ç‹¬ç‰¹ç¼–å·</li>
<li>PCBä¸­çš„PCæ˜¯è®°å½•ç¨‹åºç›®å‰æ­£åœ¨è¿è¡Œçš„ä½ç½®</li>
</ul>
<p><img src="../images/image-20240925150055065.png" alt="image-20240925150055065" style="zoom: 33%;" /></p>
<p><a href="# Context Switch ä¸Šä¸‹æ–‡åˆ‡æ¢">Context Switchä¸Šä¸‹æ–‡åˆ‡æ¢</a>çš„overhead</p>
<blockquote>
<p>åˆ†é…è®¾å¤‡ä¸éœ€è¦åˆ›å»ºæ–°è¿›ç¨‹</p>
<p>ç”¨æˆ·ç™»å½•æˆåŠŸã€å¯åŠ¨ç¨‹åºæ‰§è¡Œéœ€è¦åˆ›å»ºæ–°è¿›ç¨‹</p>
</blockquote>
<h3 id="32-scheduling">3.2 è¿›ç¨‹è°ƒåº¦ scheduling<a class="headerlink" href="#32-scheduling" title="Permanent link">&para;</a></h3>
<h4 id="process-scheduling-queues">Process Scheduling Queues<a class="headerlink" href="#process-scheduling-queues" title="Permanent link">&para;</a></h4>
<p>CPU Switch From Process to Process</p>
<p><strong>Job queue</strong> â€“ set of all processes in the systemï¼ˆåŒ…æ‹¬readyå’Œæ­£åœ¨æ‰§è¡Œçš„</p>
<p><strong>Ready queue</strong> â€“ set of all processes residing in <em>main memory</em>, ready and waiting to executeï¼ˆç­‰å¾…CPU</p>
<p><strong>Device queues</strong> â€“ set of processes waiting for an I/O device æœ‰å¾ˆå¤šè®¾å¤‡ï¼ˆç”³è¯·ä½¿ç”¨deviceâ€”â€”é€šè¿‡ç³»ç»Ÿè°ƒç”¨</p>
<p>Processes migrate among the various queues</p>
<blockquote>
<p>[!IMPORTANT]</p>
<p>ä¸€ä¸ªPCBèƒ½ä¸èƒ½åœ¨ä¸¤ä¸ªé˜Ÿåˆ—ï¼ˆdevice&amp;readyï¼‰é‡ŒåŒæ—¶æ’é˜Ÿï¼Ÿ- ä¸å¯èƒ½</p>
</blockquote>
<p><img src="../images/image-20240925152502875.png" alt="image-20240925152502875" style="zoom: 33%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>æˆ‘ä»¬æ˜¯æŠŠPCBæ”¾åˆ°è¿›ç¨‹é˜Ÿåˆ—é‡Œï¼›</p>
<p>CPUæœ‰å››ä¸ªæ ¸å¯ä»¥æœ‰4ä¸ªé˜Ÿåˆ—ï¼Œä¹Ÿå¯ä»¥åªæœ‰1ä¸ªé˜Ÿåˆ—</p>
</blockquote>
<h4 id="schedulers">Schedulers è°ƒåº¦å™¨<a class="headerlink" href="#schedulers" title="Permanent link">&para;</a></h4>
<p><mark>è°ƒåº¦å™¨æ˜¯ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼ŒA scheduler is a piece of program</mark></p>
<p><strong>Long-term scheduler</strong>  (or job scheduler) â€“ selects which processes should be brought into memory (the ready queue) </p>
<p>é•¿æœŸè°ƒåº¦æ§åˆ¶å¤šé“ç¨‹åºè®¾è®¡(å¹¶å‘) degree of multiprogramming</p>
<p><strong>Short-term scheduler</strong>  (or CPU scheduler) â€“ selects which process should be executed next and allocates CPU</p>
<ul>
<li>The long-term scheduler is invoked very infrequently (seconds, minutes) =&gt; (may be slow)</li>
<li>The short-term scheduler is invoked very frequently (milliseconds) =&gt; (must be fast)</li>
</ul>
<p><strong>Medium Term Scheduling</strong>ï¼šè¿›ç¨‹åœ¨å†…å­˜å’Œç£ç›˜é—´äº¤æ¢ swap in and out</p>
<blockquote>
<p>[!WARNING]</p>
<p>UNIX and Windows do not use long-term scheduling</p>
</blockquote>
<p>äº¤æ¢è¿è¡Œç¨‹åºåˆ°ç£ç›˜ï¼ˆ....ï¼Ÿ</p>
<p><img src="../images/image-20240925153235578.png" alt="image-20240925153235578" style="zoom:33%;" /></p>
<p>Processes can be described as either:</p>
<ul>
<li>
<p><strong>I/O-bound process</strong> I/Oç»‘å®šè¿›ç¨‹ â€“ spends more time doing I/O than computations, many short CPU burstsï¼Œegï¼šä¸‹è½½</p>
</li>
<li>
<p><strong>CPU-bound process</strong> CPUç»‘å®šè¿›ç¨‹ â€“ spends more time doing computations; few very long CPU burstsï¼Œegï¼šç§‘å­¦è®¡ç®—</p>
</li>
</ul>
<h4 id="context-switch">Context Switch ä¸Šä¸‹æ–‡åˆ‡æ¢<a class="headerlink" href="#context-switch" title="Permanent link">&para;</a></h4>
<p>å½“CPUåˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿå¿…é¡»ä¿å­˜æ—§è¿›ç¨‹çš„çŠ¶æ€ï¼Œå¹¶ä¸ºæ–°è¿›ç¨‹åŠ è½½ä¿å­˜çš„çŠ¶æ€</p>
<p>ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ—¶é—´æ˜¯å¼€é”€ overheadï¼›ç³»ç»Ÿåœ¨åˆ‡æ¢æ—¶æ²¡æœ‰ä»»ä½•æœ‰ç”¨çš„å·¥ä½œï¼Œé€šå¸¸éœ€è¦å‡ æ¯«ç§’</p>
<p>æ—¶é—´å–å†³äºç¡¬ä»¶æ”¯æŒï¼›åœ¨SPARCæ¶æ„ä¸­ï¼Œæä¾›äº†å¯„å­˜å™¨ç»„</p>
<ul>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶PCBä¸å¿…è®°å½•è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§æ˜¯å†…æ ¸kernelåˆ¤æ–­çš„</li>
</ul>
<h3 id="33">3.3 è¿›ç¨‹æ“ä½œ<a class="headerlink" href="#33" title="Permanent link">&para;</a></h3>
<h4 id="process-creation">Process Creation<a class="headerlink" href="#process-creation" title="Permanent link">&para;</a></h4>
<p>çˆ¶è¿›ç¨‹åˆ›é€ å­è¿›ç¨‹ fork</p>
<ul>
<li>
<p>Resource sharing</p>
</li>
<li>
<p>Parent and children share all resources</p>
</li>
<li>
<p>Children share subset of parentâ€™s resources</p>
</li>
<li>
<p>Parent and child share no resources</p>
</li>
<li>
<p>Execution</p>
</li>
<li>
<p>Parent and children execute concurrently</p>
</li>
<li>Parent waits until children terminate</li>
<li>Address space</li>
<li>Child duplicate of parent</li>
<li>
<p>Child <em>has a program loaded into it</em></p>
</li>
<li>
<p>UNIX examples</p>
</li>
<li><strong>fork</strong> system call creates new process</li>
<li><strong>exec</strong> system call used after a fork to replace the process's memory space with a new program</li>
</ul>
<blockquote>
<p>çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹å¯ä»¥å¹¶å‘æ‰§è¡Œ</p>
<p>çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹æœ‰å„è‡ªçš„ç©ºé—´ï¼Œä¸å…±äº«è™šæ‹Ÿåœ°å€</p>
<p>çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹æœ‰ä¸åŒçš„è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰-&gt; éš”ç¦»</p>
<p>çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¸èƒ½åŒæ—¶ä½¿ç”¨</p>
</blockquote>
<p><img src="../images/image-20240930103721294.png" alt="image-20240930103721294" style="zoom:30%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>å­è¿›ç¨‹å¯ä»¥<strong>ç»§æ‰¿</strong>çˆ¶è¿›ç¨‹çš„å†…å®¹ï¼›
éœ€è¦é‡ç½® pidï¼Œcpu timeï¼Œä¼˜å…ˆçº§ï¼Œå †æ ˆ</p>
<p>list of open filesï¼Ÿï¼Ÿ</p>
</blockquote>
<p>OSä¸æ˜¯çœŸçš„copyï¼Œæ˜¾å¼copy</p>
<blockquote>
<p>[!CAUTION]</p>
<p>åˆ›é€ è¿›ç¨‹çš„æ–°çº¿ç¨‹ä¸æ˜¯é€šè¿‡fork</p>
</blockquote>
<h4 id="process-termination">Process Termination<a class="headerlink" href="#process-termination" title="Permanent link">&para;</a></h4>
<h3 id="34-cooperating">3.4 å…±åŒåä½œ cooperating<a class="headerlink" href="#34-cooperating" title="Permanent link">&para;</a></h3>
<h4 id="cooperating-processes">Cooperating Processes<a class="headerlink" href="#cooperating-processes" title="Permanent link">&para;</a></h4>
<p><strong>Independent</strong> process ç‹¬ç«‹è¿›ç¨‹ cannot affect or be affected by the execution of another process</p>
<p><strong>Cooperating</strong> process can affect or be affected by the execution of another process</p>
<p><em>Advantages</em> of process cooperation:</p>
<ul>
<li>Information sharing</li>
<li>Computation speed-up (Multiple CPUs)</li>
<li>Modularity</li>
<li>Convenience</li>
</ul>
<h4 id="producer-consumer">Producer-consumer<a class="headerlink" href="#producer-consumer" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20240930110501365.png" alt="image-20240930110501365" style="zoom:40%;" /></p>
<p>ä¸»è¦ç›®çš„æ˜¯åœ¨ç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹ä¹‹é—´è¿›è¡Œæ•°æ®çš„<strong>åŒæ­¥</strong>æ“ä½œ</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">//Shared data</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="cp">#define BUFFER_SIZE 10</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">}</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">item</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="c1">//Bounded-Buffer â€“ Insert() Method</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="c1">//Producer pseudo-code:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="n">Produce</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(((</span><span class="n">in</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="w">   </span><span class="o">==</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="cm">/* do nothing -- no free buffers */</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="n">buffer</span><span class="p">[</span><span class="n">in</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">    </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="p">;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="p">}</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="c1">//Bounded Buffer â€“ Remove() Method</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="c1">//Consumer pseudo-code:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="c1">//do nothing, nothing to consume</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">    </span><span class="n">Remove</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">buffer</span><span class="p">;</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">    </span><span class="n">item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">out</span><span class="p">];</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">    </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">out</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER</span><span class="w"> </span><span class="n">SIZE</span><span class="p">;</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="p">}</span>
</code></pre></div>
<blockquote>
<p>How many itemsï¼Ÿ</p>
<ul>
<li>(in-out) % BUFFER_SIZE</li>
<li>æˆ–è€…åŠ ä¸€ä¸ªå˜é‡count</li>
</ul>
</blockquote>
<h3 id="35">3.5 è¿›ç¨‹é—´é€šä¿¡<a class="headerlink" href="#35" title="Permanent link">&para;</a></h3>
<h4 id="interprocess-communication-ipc">Interprocess Communication (IPC)<a class="headerlink" href="#interprocess-communication-ipc" title="Permanent link">&para;</a></h4>
<p>Two models for IPC: <strong>message passing</strong>æ¶ˆæ¯é˜Ÿåˆ— and <strong>shared memory</strong>å…±äº«å†…å­˜</p>
<p>é€šä¿¡æ¨¡å‹ï¼š</p>
<p><img src="../images/image-20240930111506403.png" alt="image-20240930111506403" style="zoom: 33%;" /></p>
<p>å…±äº«å†…å­˜çš„ä¸»è¦ä¼˜ç‚¹ï¼šæ•°æ®ä¸€è‡´æ€§</p>
<p>In IPC, minimize shared resources can reduce conflicts</p>
<h4 id="direct-communication">Direct Communication<a class="headerlink" href="#direct-communication" title="Permanent link">&para;</a></h4>
<p>explictlyæ˜¾å¼çš„</p>
<p>A link is associated with exactly one pair of communicating processes</p>
<p>Between each pair there exists exactly one link</p>
<h4 id="indirect-communication">Indirect Communication<a class="headerlink" href="#indirect-communication" title="Permanent link">&para;</a></h4>
<p>mailbox(ports)â€”â€”both synchronous and asynchronous communication</p>
<p>A link may be associated with many processes</p>
<p>Each pair of processes may share several communication links</p>
<h4 id="synchronization">Synchronization åŒæ­¥æ€§<a class="headerlink" href="#synchronization" title="Permanent link">&para;</a></h4>
<p>send æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨</p>
<p><strong>Blocking</strong> is considered <strong>synchronous</strong></p>
<ul>
<li>Blocking send has the sender blocked until the message is received</li>
<li>Blocking receive has the receiver block until a message is available</li>
</ul>
<p><strong>Non-blocking</strong> is considered <strong>asynchronous</strong></p>
<ul>
<li>Non-blocking send has the sender send the message and continue</li>
<li>Non-blocking receive has the receiver receive a valid message or null</li>
</ul>
<h3 id="36-communication-in-client-server-systems">3.6 Communication in Client-Server Systems<a class="headerlink" href="#36-communication-in-client-server-systems" title="Permanent link">&para;</a></h3>
<h4 id="sockets">Sockets<a class="headerlink" href="#sockets" title="Permanent link">&para;</a></h4>
<h2 id="4-threads">4 çº¿ç¨‹ Threads<a class="headerlink" href="#4-threads" title="Permanent link">&para;</a></h2>
<h3 id="41-overview">4.1 overview<a class="headerlink" href="#41-overview" title="Permanent link">&para;</a></h3>
<p>ç¨‹åºå†…éƒ¨éš”ç¦»å’Œè°ƒåº¦</p>
<h4 id="single-and-multithreaded-processes">Single and Multithreaded Processes<a class="headerlink" href="#single-and-multithreaded-processes" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20241009150251297.png" alt="image-20241009150251297" style="zoom: 33%;" /></p>
<p>cpuè°ƒåº¦çš„æœ€å°ï¼ˆåŸºæœ¬ï¼‰å•ä½ï¼šçº¿ç¨‹ thread</p>
<p>èµ„æºåˆ†é…çš„æœ€å°ï¼ˆåŸºæœ¬ï¼‰å•ä½ï¼šè¿›ç¨‹ process</p>
<h5 id="_5">è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h5>
<p><img src="../images/cb8c649311628903e2240ebd3e73873.jpg" alt="cb8c649311628903e2240ebd3e73873" style="zoom:50%;" /></p>
<h4 id="benfits">Benfits<a class="headerlink" href="#benfits" title="Permanent link">&para;</a></h4>
<p>Responsivenessï¼šinteractive applications</p>
<p>Resource Sharingï¼šmemory for code and data can be shared.</p>
<p>Economyï¼šcreating processes are more expensive.</p>
<p>Utilization of MP Architectures å¤šå¤„ç†å™¨æ¶æ„ï¼šmulti-threading increases concurrency å¯æ‹“å±•æ€§</p>
<h4 id="user-threads">User Threads<a class="headerlink" href="#user-threads" title="Permanent link">&para;</a></h4>
<p>Thread management done by user-level threads library</p>
<p>Three primary thread libraries: POSIX Pthreads (can also be provided as system library) ï¼ŒWin32 threadsï¼Œ Java threads â€”â€” éƒ½å¯èƒ½ä¼šäº§ç”Ÿï¼Ÿï¼Ÿï¼Ÿ</p>
<p>ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹åªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹</p>
<p>å¯¹äºç”¨æˆ·çº§çº¿ç¨‹ï¼Œå†…æ ¸å¹¶ä¸çŸ¥æƒ…</p>
<h4 id="kernel-threads">Kernel Threads<a class="headerlink" href="#kernel-threads" title="Permanent link">&para;</a></h4>
<p>Almost all contemporary OS implements kernel threads.</p>
<p>Kernel level threadsï¼šæ”¯æŒè°ƒåº¦ï¼Œä¾¿äºçº¿ç¨‹åˆ‡æ¢ï¼Œé¿å…é˜»å¡ï¼›æ‰§è¡Œçš„è½½ä½“</p>
<p>User level threadsï¼šï¼›é€»è¾‘çš„è½½ä½“</p>
<p>å†…æ ¸çº§çº¿ç¨‹æ‰€éœ€è¦çš„èµ„æºæ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½ç”³è¯·çš„</p>
<blockquote>
<p>ç”¨æˆ·çº§çº¿ç¨‹çš„åˆ‡æ¢é€šè¿‡çº¿ç¨‹åº“ï¼Œä¸éœ€è¦å†…æ ¸çš„æ”¯æŒï¼Œå³çº¿ç¨‹åº“ä¸ºç”¨æˆ·çº§çº¿ç¨‹å»ºç«‹ä¸€ä¸ªçº¿ç¨‹æ§åˆ¶å—</p>
<p>å†…æ ¸çº§ï¼ˆç³»ç»Ÿçº§ï¼‰çº¿ç¨‹çš„è°ƒåº¦ç”±æ“ä½œç³»ç»Ÿå®Œæˆ</p>
<p>ç”¨æˆ·çº§çº¿ç¨‹é—´çš„åˆ‡æ¢æ¯”å†…æ ¸çº§åˆ‡æ¢æ•ˆç‡é«˜</p>
<p>ç”¨æˆ·çº§çº¿ç¨‹å¯ä»¥åœ¨ä¸æ”¯æŒå†…æ ¸çº§çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸Šå®ç°</p>
<p>[!NOTE]</p>
<p>å¤šçº¿ç¨‹çš„ç‰¹é•¿ï¼šæé«˜å¹¶å‘æ€§ï¼Œä¾‹å¦‚çŸ©é˜µä¹˜æ³•ã€webæœåŠ¡å™¨å“åº”HTTP</p>
<p>å¤šçº¿ç¨‹ä¸å…±äº«æ ˆæŒ‡é’ˆ</p>
<p>åŒä¸€è¿›ç¨‹ä¸­çš„å„ä¸ªçº¿ç¨‹æœ‰ç›¸åŒçš„åœ°å€å•ä½</p>
</blockquote>
<h3 id="42-multithreading-models">4.2 Multithreading Models<a class="headerlink" href="#42-multithreading-models" title="Permanent link">&para;</a></h3>
<h5 id="many-to-one-model">Many-to-one Model<a class="headerlink" href="#many-to-one-model" title="Permanent link">&para;</a></h5>
<p>ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹å¡ä½äº†ï¼Œæ•´ä¸ªè¿›ç¨‹å°±å¡ä½äº†</p>
<p>thread management is efficient, but will block if making system call, kernel can schedule only one thread at a time</p>
<p><img src="../images/image-20241009152351978.png" alt="image-20241009152351978" style="zoom:30%;" /></p>
<blockquote>
<p>Qï¼šæŸä¸ªåˆ†æ—¶ç³»ç»Ÿé‡‡ç”¨<strong>å¤šå¯¹ä¸€</strong>çº¿ç¨‹æ¨¡å‹ã€‚å†…å­˜ä¸­æœ‰10ä¸ªè¿›ç¨‹å¹¶å‘è¿è¡Œï¼Œå…¶ä¸­9ä¸ªè¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹Aæ‹¥æœ‰11ä¸ªçº¿ç¨‹ã€‚åˆ™Aè·å¾—çš„CPUæ—¶é—´å æ€»æ—¶é—´çš„ 1/10</p>
</blockquote>
<h5 id="one-to-one">One-to-one<a class="headerlink" href="#one-to-one" title="Permanent link">&para;</a></h5>
<p>Each user-level thread maps to kernel thread</p>
<p>more concurrency, but creating thread is expensive</p>
<p>èƒ½è®©çº¿ç¨‹å¹¶è¡Œï¼Œæ¯ä¸ªç”¨æˆ·çº§çº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹</p>
<blockquote>
<p>Qï¼šæŸä¸ªåˆ†æ—¶ç³»ç»Ÿé‡‡ç”¨<strong>ä¸€å¯¹ä¸€</strong>çº¿ç¨‹æ¨¡å‹ã€‚å†…å­˜ä¸­æœ‰10ä¸ªè¿›ç¨‹å¹¶å‘è¿è¡Œï¼Œå…¶ä¸­9ä¸ªè¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹Aæ‹¥æœ‰11ä¸ªçº¿ç¨‹ã€‚åˆ™Aè·å¾—çš„CPUæ—¶é—´å æ€»æ—¶é—´çš„ 11/20</p>
</blockquote>
<h5 id="many-to-many-model">Many-to-Many Model<a class="headerlink" href="#many-to-many-model" title="Permanent link">&para;</a></h5>
<p>flexibleï¼ŒLWP ID kernelæ ¹æ®æƒ…å†µçœ‹è°ƒåº¦</p>
<p>Allows many user level threads to be mapped to many kernel threads</p>
<p>Allows the operating system to create a sufficient number of kernel threads</p>
<h5 id="two-level-model">Two-level Model<a class="headerlink" href="#two-level-model" title="Permanent link">&para;</a></h5>
<p>Similar to M:M, except that it allows a user thread to be bound to kernel thread</p>
<h3 id="43-threading-issues">4.3 Threading Issues<a class="headerlink" href="#43-threading-issues" title="Permanent link">&para;</a></h3>
<p>Semanticsè¯­ä¹‰ of fork() and exec(ï¼‰</p>
<blockquote>
<p>Does fork() duplicate only the calling thread or all threads?</p>
<ul>
<li>
<p>Some unix systems have two versions of fork(), one that <strong>duplicates all threads</strong> and another that <strong>duplicates the thread</strong> that invokes fork().</p>
</li>
<li>
<p>Exec() will replace the entire process.</p>
</li>
</ul>
</blockquote>
<h4 id="thread-cancellation">Thread Cancellation<a class="headerlink" href="#thread-cancellation" title="Permanent link">&para;</a></h4>
<p><strong>Asynchronous cancellation</strong>å¼‚æ­¥ terminates the target thread  immediately</p>
<p><strong>Deferred cancellation</strong>å»¶å allows the target thread to periodically check via a flag if it should be cancelled</p>
<h4 id="signal-handling">Signal Handling<a class="headerlink" href="#signal-handling" title="Permanent link">&para;</a></h4>
<p>A <strong>signal handler</strong> is used to process signals, either synchronous or asynchronous:</p>
<ul>
<li>Signal is generated by particular event</li>
<li>Signal is delivered to a process</li>
<li>Signal is handled</li>
</ul>
<h4 id="thread-pools">Thread Pools çº¿ç¨‹æ± <a class="headerlink" href="#thread-pools" title="Permanent link">&para;</a></h4>
<p>Create a number of threads in a pool where they await work</p>
<p>Advantages</p>
<ul>
<li>Usually slightly faster to service a request with an existing thread than create a new thread</li>
<li>Allows the number of threads in the application(s) to be bound to the size of the pool</li>
</ul>
<p><strong>Thread-Local Storageï¼ˆTLSï¼‰</strong>ï¼šAllows each thread to have its own copy of data</p>
<h4 id="scheduler-activations">Scheduler Activations è°ƒåº¦æ¿€æ´»<a class="headerlink" href="#scheduler-activations" title="Permanent link">&para;</a></h4>
<p>LWP is a virtual processor attached to kernel thread</p>
<p>Scheduler activations provide <strong>upcalls</strong> - a communication mechanism from the kernel to the thread library</p>
<p>Upcalls are handled by the thread library with an <strong>upcall handler</strong>.</p>
<p>This communication allows an application to maintain the correct number of kernel threads</p>
<p>When an application thread is about to block, an upcall is triggered.</p>
<h2 id="5-cpu-scheduling">5 è°ƒåº¦ CPU Scheduling<a class="headerlink" href="#5-cpu-scheduling" title="Permanent link">&para;</a></h2>
<h3 id="51-basic-concepts">5.1 Basic concepts<a class="headerlink" href="#51-basic-concepts" title="Permanent link">&para;</a></h3>
<p>scheduler dispatch</p>
<p>è°ƒåº¦èµ„æºï¼ŸCPU</p>
<p>è°ƒåº¦ç›®æ ‡ï¼ŸProcesses/threads</p>
<p><mark>Goal: åœ¨multiprogrammingä¸‹CPUä½¿ç”¨ç‡æœ€å¤§åŒ–</mark></p>
<p><img src="../images/image-20241014100337138.png" alt="image-20241014100337138" style="zoom:33%;" /></p>
<p>CPU-I/O Burst Cycleï¼šProcess execution consists of a cycle of CPU execution and I/O wait</p>
<p>è¿›ç¨‹å®é™…è¿è¡Œæ—¶CPUå ç”¨æ—¶é—´å°‘ï¼ŒI/Oå¤š</p>
<p>å¤§éƒ¨åˆ†CPU burstæ—¶é—´éå¸¸çŸ­</p>
<h4 id="cpu-scheduler">CPU Scheduler<a class="headerlink" href="#cpu-scheduler" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20241014100627801.png" alt="image-20241014100627801" style="zoom:50%;" /></p>
<p>nonpreemptive éæŠ¢å å¼è°ƒåº¦ 1 &amp; 4</p>
<p>preemptive âœ”ï¸ 2 &amp; 3</p>
<h4 id="dispacher">Dispacher<a class="headerlink" href="#dispacher" title="Permanent link">&para;</a></h4>
<p>dispacher latencyï¼šP1åœæ­¢è¿è¡Œåˆ°P1è¿è¡Œ</p>
<p><img src="../images/image-20241014100422820.png" alt="image-20241014100422820" style="zoom:33%;" /></p>
<h3 id="52-scheduling-criteria">5.2 scheduling criteria<a class="headerlink" href="#52-scheduling-criteria" title="Permanent link">&para;</a></h3>
<p>CPU utilization CPUåˆ©ç”¨ç‡ï¼š<strong>CPU ä½¿ç”¨ç‡= (1 - ç©ºé—²æ€è¿è¡Œæ—¶é—´/æ€»è¿è¡Œæ—¶é—´) * 100%</strong></p>
<p>Throughtput ååç‡ï¼š<strong>è¿›ç¨‹æ•°/æ€»æ‰§è¡Œæ—¶é—´</strong></p>
<p>Turnaround time å‘¨è½¬æ—¶é—´ è¿›ç¨‹æäº¤åˆ°ç»“æŸ</p>
<p>waiting time ç­‰å¾…æ—¶é—´</p>
<p>response time å“åº”æ—¶é—´</p>
<p><img src="../images/image-20241014100514354.png" alt="image-20241014100514354" style="zoom:50%;" /></p>
<h3 id="53-scheduling-algorithms">5.3 è°ƒåº¦ç®—æ³• scheduling algorithms<a class="headerlink" href="#53-scheduling-algorithms" title="Permanent link">&para;</a></h3>
<h4 id="fcfsfirst-come-first-served">FCFS(First-Come, First-Served)<a class="headerlink" href="#fcfsfirst-come-first-served" title="Permanent link">&para;</a></h4>
<p>å…ˆæ¥å…ˆæœåŠ¡ç®—æ³•</p>
<p><img src="../images/image-20241014100837396.png" alt="image-20241014100837396" style="zoom:50%;" /></p>
<p><img src="../images/image-20241014100934593.png" alt="image-20241014100934593" style="zoom:50%;" /></p>
<blockquote>
<p>[!IMPORTANT]</p>
<p>Arrival order makes a difference!
åˆ°è¾¾é¡ºåºå¾ˆé‡è¦</p>
</blockquote>
<ul>
<li>FCFSæ˜¯<strong>éæŠ¢å å¼</strong>ç®—æ³•</li>
<li>FCFSç®€å•ã€å…¬å¹³</li>
<li><strong>Convoy effect</strong>ï¼ˆæŠ¤èˆªæ•ˆåº”ï¼‰: short process behind long process, the average waiting time may be longer, leading to I/O devices &amp; CPU being idle</li>
</ul>
<p><strong>æœ‰åˆ©äºé•¿ä½œä¸šï¼Œä¸åˆ©äºçŸ­ä½œä¸šï¼›æœ‰åˆ©äºCPUç¹å¿™å‹ï¼Œä¸åˆ©äºI/Oç¹å¿™å‹</strong></p>
<blockquote>
<p>çŸ­ä½œä¸šä½äºé•¿ä½œä¸šåæ—¶è°ƒåº¦æ—¶é—´è¦å¾ˆé•¿ï¼›I/Oç¹å¿™ä¼šæœ‰å¾ˆå¤šwaitingï¼Œä¸æ–­æ’é˜Ÿåˆ°ready queueé˜Ÿå°¾ï¼Œå¦‚æœæ’åˆ°é•¿ä½œä¸šåé¢å°±è¦å¾ˆé•¿æ—¶é—´</p>
</blockquote>
<h4 id="sjfshortest-job-first">SJF(Shortest-Job-First)<a class="headerlink" href="#sjfshortest-job-first" title="Permanent link">&para;</a></h4>
<p>çŸ­ä½œä¸šä¼˜å…ˆç®—æ³•</p>
<ul>
<li>
<p>SJF is a priority scheduling where priority is the predicted next CPU burst time</p>
</li>
<li>
<p>SJFæ—¢å¯ä»¥æ˜¯æŠ¢å å¼ä¹Ÿå¯ä»¥æ˜¯éæŠ¢å å¼</p>
</li>
<li>nonpreemptive â€“ once CPU given to the process it cannot be preempted until completes its CPU burst</li>
<li>preemptive â€“ if a new process arrives with CPU burst length less than remaining time of current executing process, preempt. This scheme is known as the <strong>Shortest-Remaining-TimeFirst (SRTF)</strong>æœ€çŸ­å‰©ä½™æ—¶é—´è°ƒåº¦ç®—æ³•</li>
<li>SJF is <strong>optimal</strong> â€“ gives <strong>minimum average waiting time</strong> for a given set of processes</li>
<li>Which is better? Preemptive? Nonpreemptive? ä¸ç¡®å®šï¼Œè¦æ ¹æ®åˆ°è¾¾æ—¶é—´å’Œcpu burstç¡®å®š</li>
<li>Starvation é¥¥é¥¿é—®é¢˜ï¼Œä¼˜å…ˆçº§ä½çš„è¿›ç¨‹ä¸€ç›´æ— æ³•è¿è¡Œï¼ŒçŸ­ä½œä¸šéƒ½ä¼šå‘ç”Ÿ</li>
<li>Not good for long process ä¸é€‚åˆé•¿è¿›ç¨‹ï¼Œå› ä¸ºä¼˜å…ˆè°ƒåº¦cpu burstæœ€çŸ­çš„è¿›ç¨‹</li>
</ul>
<h5 id="nonpreemptive">nonpreemptive<a class="headerlink" href="#nonpreemptive" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241014103433736.png" alt="image-20241014103433736" style="zoom:50%;" /></p>
<h5 id="preemptive">preemptive<a class="headerlink" href="#preemptive" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241014104442138.png" alt="image-20241014104442138" style="zoom:50%;" /></p>
<h4 id="priority-scheduling">Priority Scheduling<a class="headerlink" href="#priority-scheduling" title="Permanent link">&para;</a></h4>
<p>ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•</p>
<p>The CPU is allocated to the process with the highest priority (smallest integer means highest priority)</p>
<ul>
<li>
<p>Preemptive</p>
</li>
<li>
<p>nonpreemptive</p>
</li>
</ul>
<p><strong>Static Priority</strong>: determine when processes is created; do not change é™æ€ä¼˜å…ˆ</p>
<p>Problemï¼š<strong>Starvation</strong> â€“ low priority processes may never execute</p>
<p>Solutionï¼š<strong>Aging</strong> ï¼ˆè€åŒ–ï¼‰â€“ as time progresses increase the priority of the processâ€”â€”<strong>Dynamic Priority</strong> æé«˜ä¼˜å…ˆçº§</p>
<h4 id="highest-response-ratio-next-hrrn">Highest Response Ratio Next ï¼ˆHRRNï¼‰<a class="headerlink" href="#highest-response-ratio-next-hrrn" title="Permanent link">&para;</a></h4>
<p>é«˜å“åº”æ¯”ä¼˜å…ˆç®—æ³•</p>
<ul>
<li>éæŠ¢å å¼</li>
<li>HRRN is a <strong>compromise</strong> æŠ˜ä¸­ between FCFS and SJF</li>
<li>Computing response ratio requires time</li>
<li>improve the responsiveness of the system æé«˜ç³»ç»Ÿå“åº”æ€§</li>
</ul>
<p>Response Ratio ï¼ˆå“åº”æ¯”ï¼‰ = <span class="arithmatex">\(\frac{\text{cpu burst}+\text{waiting time}}{\text{cpu burst}}\)</span> ï¼ˆç­‰å¾…æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´éƒ½è¦è€ƒè™‘</p>
<p>Take Response Ratio as priority</p>
<p>Larger Response Ratio, higher priority</p>
<h5 id="hrrn"><strong>HRRN</strong> ç®—æ³•çš„å·¥ä½œåŸç†<a class="headerlink" href="#hrrn" title="Permanent link">&para;</a></h5>
<ol>
<li>
<p><strong>åˆå§‹åŒ–</strong>ï¼š è®°å½•æ¯ä¸ªè¿›ç¨‹çš„åˆ°è¾¾æ—¶é—´å’Œæ‰€éœ€çš„æœåŠ¡æ—¶é—´ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—å“åº”æ¯”</strong>ï¼š å¯¹äºæ¯ä¸ªå°±ç»ªé˜Ÿåˆ—ä¸­çš„è¿›ç¨‹ï¼Œè®¡ç®—å…¶å“åº”æ¯”ã€‚</p>
</li>
<li>
<p><strong>é€‰æ‹©æœ€é«˜å“åº”æ¯”çš„è¿›ç¨‹</strong>ï¼š </p>
</li>
<li>é€‰æ‹©å…·æœ‰æœ€é«˜å“åº”æ¯”çš„è¿›ç¨‹æ‰§è¡Œã€‚</li>
<li>
<p>å¦‚æœæœ‰å¤šä¸ªè¿›ç¨‹å…·æœ‰ç›¸åŒçš„æœ€é«˜å“åº”æ¯”ï¼Œåˆ™å¯ä»¥æŒ‰ç…§å…¶ä»–è§„åˆ™ï¼ˆå¦‚å…ˆåˆ°å…ˆæœåŠ¡ï¼‰æ¥é€‰æ‹©ã€‚</p>
</li>
<li>
<p><strong>æ›´æ–°ç­‰å¾…æ—¶é—´å’Œå“åº”æ¯”</strong>ï¼š </p>
</li>
<li>æ¯æ¬¡è°ƒåº¦åï¼Œæ›´æ–°æ‰€æœ‰å°±ç»ªé˜Ÿåˆ—ä¸­è¿›ç¨‹çš„ç­‰å¾…æ—¶é—´ã€‚</li>
<li>é‡æ–°è®¡ç®—æ‰€æœ‰è¿›ç¨‹çš„å“åº”æ¯”</li>
</ol>
<h4 id="round-robin-rr">Round Robin (RR)<a class="headerlink" href="#round-robin-rr" title="Permanent link">&para;</a></h4>
<p>æ—¶é—´ç‰‡è½®è½¬ç®—æ³•</p>
<ul>
<li>Origin from signature method</li>
<li>Each process gets a small unit of CPU time (time quantum), usually 10-100 milliseconds. After this time has elapsed, the process is preempted and added to the end of the ready queue. æé«˜ç³»ç»Ÿäº¤äº’æ€§</li>
<li>Application: Time-sharing system, Multi-tasking system</li>
<li>å½“å‰è¿›ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œåï¼Œè¯¥è¿›ç¨‹çš„çŠ¶æ€ç”±æ‰§è¡Œæ€å˜æˆå°±ç»ªæ€</li>
</ul>
<p><img src="../images/image-20241014112933209.png" alt="image-20241014112933209" style="zoom:50%;" /></p>
<p><img src="../images/image-20241014113016699.png" alt="image-20241014113016699" style="zoom:50%;" /></p>
<h4 id="multilevel-queue">Multilevel Queue<a class="headerlink" href="#multilevel-queue" title="Permanent link">&para;</a></h4>
<p>å¤šå±‚é˜Ÿåˆ—ç®—æ³•</p>
<p>Ready queue is partitioned into separate queues:</p>
<ul>
<li>foreground (interactive)</li>
<li>background (batch)</li>
</ul>
<p>Each queue has its <strong>own scheduling algorithm</strong>, for example</p>
<ul>
<li>foreground â€“ RR</li>
<li>background â€“ FCFS è®¡ç®—å¯†é›†</li>
</ul>
<p>Scheduling must be done between the queues</p>
<ul>
<li>
<p>Fixed priority scheduling; (i.e., serve all from foreground then from background). Possibility of starvation.</p>
</li>
<li>
<p>Time slice â€“ each queue gets a certain amount of CPU time which it can schedule amongst its processes; i.e., 80% to foreground in RR ï¼Œ 20% to background in FCFS </p>
</li>
</ul>
<h4 id="multiple-feedback-queue">Multiple Feedback Queue<a class="headerlink" href="#multiple-feedback-queue" title="Permanent link">&para;</a></h4>
<p>å¤šçº§åé¦ˆé˜Ÿåˆ—</p>
<ul>
<li>
<p>å¤šä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§é€ä¸€é™ä½ï¼ŒæŒ‰ç…§é˜Ÿåˆ—ä¼˜å…ˆçº§è°ƒåº¦</p>
</li>
<li>
<p>è®¾ç½®å¤šä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§ä»ç¬¬ä¸€çº§ä¾æ¬¡é™ä½</p>
</li>
<li>
<p>ä¼˜å…ˆçº§é«˜çš„é˜Ÿåˆ—ï¼Œè¿›ç¨‹æ—¶é—´ç‰‡è¶ŠçŸ­</p>
</li>
<li>
<p>æ¯ä¸ªé˜Ÿåˆ—éƒ½é‡‡ç”¨ FCFS ï¼Œè‹¥åœ¨è¯¥æ—¶é—´ç‰‡å®Œæˆï¼Œåˆ™æ’’ç¦»ç³»ç»Ÿï¼Œæœªå®Œæˆï¼Œè½¬å…¥ä¸‹ä¸€çº§çº§é˜Ÿåˆ—</p>
</li>
<li>
<p>æŒ‰é˜Ÿåˆ—ä¼˜å…ˆçº§è°ƒåº¦ï¼Œä»…å½“ä¸Šä¸€çº§ä¸ºç©ºæ—¶ï¼Œæ‰è¿è¡Œä¸‹ä¸€çº§</p>
</li>
</ul>
<p>è¿›ç¨‹è¿›æ¥ï¼Œå…ˆåˆ°ä¼˜å…ˆçº§æœ€é«˜çš„é˜Ÿåˆ—ä¸­ï¼Œæ—¶é—´ç‰‡å†…å®Œæˆåˆ™æ’¤ç¦»ï¼›å¦åˆ™ï¼Œåˆ°ä¸‹ä¸€çº§é˜Ÿåˆ—æ’é˜Ÿ</p>
<h4 id="multiple-processor-scheduling">Multiple-processor scheduling(äº†è§£)<a class="headerlink" href="#multiple-processor-scheduling" title="Permanent link">&para;</a></h4>
<p>å¤šå¤„ç†å™¨è°ƒåº¦</p>
<p>Load balancing è´Ÿè½½å‡è¡¡</p>
<p>Symmetric multiprocessing(SMP) å¯¹ç§°å¤„ç†å™¨ï¼šæ¯ä¸ªå¤„ç†å™¨éƒ½æ˜¯è‡ªæˆ‘è°ƒåº¦ï¼Œå¤šä¸ªå¤„ç†å™¨å¯ä»¥è¿è¡Œã€æ›´æ–°ä¸€ä¸ªç›¸åŒçš„æ•°æ®ç»“æ„</p>
<p>Asymmetric multiprocessing éå¯¹ç§°å¤„ç†å™¨ï¼šåªæœ‰ä¸€ä¸ªå¤„ç†å™¨å¯ä»¥æ¥è§¦ç³»ç»Ÿæ•°æ®ç»“æ„ï¼ˆè°ƒåº¦ï¼‰ï¼Œå‡è½»æ•°æ®å…±äº«ï¼Œå…¶ä»–å¤„ç†å™¨åªæ‰§è¡Œç”¨æˆ·ä»£ç </p>
<ul>
<li>å½“è°ƒåº¦çš„å¤„ç†å™¨åäº†ï¼Œæ•´ä¸ªç³»ç»Ÿå°±è¿è¡Œä¸ä¸‹å»äº†</li>
</ul>
<h4 id="real-time-scheduling">Real-time scheduling(äº†è§£)<a class="headerlink" href="#real-time-scheduling" title="Permanent link">&para;</a></h4>
<p>å®æ—¶è°ƒåº¦</p>
<p>å®æ—¶ç³»ç»Ÿä¸€å®šè¦åœ¨è§„å®šæ—¶é—´å†…å®Œæˆ</p>
<p>Hard real-time systems ç¡¬å®æ—¶ç³»ç»Ÿï¼šddlå‰æ²¡è¿è¡Œå®Œæœ‰ä¸¥é‡åæœ</p>
<p>Soft real-time systems è½¯å®æ—¶ç³»ç»Ÿï¼šå¯ä»¥åœ¨ddlå‰æ²¡è¿è¡Œå®Œï¼ˆegï¼Œè…¾è®¯ä¼šè®®</p>
<ul>
<li>Earliest ddl First æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆ</li>
<li>Least Laxity First æœ€ä½æ¾å¼›åº¦ä¼˜å…ˆï¼ˆä¸æ€ä¹ˆç”¨ï¼‰</li>
<li>Açš„æ¾å¼›åº¦=Aå¿…é¡»å®Œæˆçš„æ—¶é—´-Aéœ€è¦è¿è¡Œçš„æ—¶é—´-å½“å‰æ—¶é—´</li>
<li>Rate Monotonic scheduling é€Ÿç‡å•è°ƒè°ƒåº¦</li>
<li>åŸºäºä»»åŠ¡çš„å‘¨æœŸï¼ˆä¸€ä¸ªè¿›ç¨‹å¤šä¹…æ‰§è¡Œä¸€æ¬¡ï¼‰æ¥åˆ†é…ä¼˜å…ˆçº§ï¼Œå‘¨æœŸè¶ŠçŸ­ä»»åŠ¡ä¼˜å…ˆçº§è¶Šé«˜</li>
</ul>
<h4 id="thread-scheduling">Thread scheduling(äº†è§£)<a class="headerlink" href="#thread-scheduling" title="Permanent link">&para;</a></h4>
<p>çº¿ç¨‹è°ƒåº¦</p>
<p>Local scheduling ç”¨æˆ·çº§</p>
<p>Global scheduling å†…æ ¸çº§</p>
<blockquote>
<p>[!NOTE]</p>
<p>æ‰¹å¤„ç† FCFS</p>
<p>åˆ†æ—¶ç³»ç»Ÿ</p>
<p>å®æ—¶ç³»ç»Ÿ</p>
</blockquote>
<h3 id="q">Q<a class="headerlink" href="#q" title="Permanent link">&para;</a></h3>
<p><img src="../images/image-20241021100841358.png" alt="image-20241021100841358" style="zoom: 33%;" /></p>
<blockquote>
<p>å¤–è®¾æ˜¯ä¸å¯æŠ¢å çš„</p>
<p>waiting timeæ˜¯è¿›ç¨‹ç­‰å¾…CPUèµ„æºçš„æ—¶é—´ï¼</p>
</blockquote>
<p><img src="../images/image-20241021102905818.png" alt="image-20241021102905818" style="zoom: 33%;" /></p>
<h2 id="6-process-synchronization">6 è¿›ç¨‹åŒæ­¥ Process synchronization<a class="headerlink" href="#6-process-synchronization" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!NOTE]</p>
<p>åŸºæœ¬æ¦‚å¿µï¼šsynï¼Œraceï¼Œcriticalï¼Œfour requirementsï¼ˆå¿™åˆ™ç­‰å¾…ã€ã€ã€ï¼‰</p>
<p>è½¯ä»¶å®ç°æ–¹æ³•ï¼šå•æ ‡å¿—ï¼ŒåŒæ ‡å¿—ã€ã€ã€</p>
<p>ç¡¬ä»¶å®ç°æ–¹æ³•ï¼šåŸç†ã€å…³ä¸­æ–­ã€Testã€Swapã€CASã€mutex lock</p>
<p>ä¿¡å·é‡æœºåˆ¶ï¼šä¿¡å·é‡åŸºæœ¬æ¦‚å¿µï¼ˆå½¢å¼ã€ç±»å‹ã€ç”¨æ³•ã€å®ç°ã€ç¼ºç‚¹ï¼‰ä¸‰ä¸ªç»å…¸é—®é¢˜ï¼ˆæœ‰ç•Œç¼“å†²åŒºã€è¯»å†™è€…ã€å“²å­¦å®¶ï¼‰</p>
<p>ç®¡ç¨‹ï¼šåŸºæœ¬æ¦‚å¿µï¼ˆå½¢å¼ã€ç‰¹ç‚¹ã€æ¡ä»¶å˜é‡ï¼‰ã€åº”ç”¨</p>
</blockquote>
<h3 id="61-background">6.1 èƒŒæ™¯ background<a class="headerlink" href="#61-background" title="Permanent link">&para;</a></h3>
<p>å…±äº«æ•°æ®çš„å¹¶å‘è®¿é—®å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´æ€§</p>
<p>Producer-consumer</p>
<p><img src="../images/image-20241021105641372.png" alt="image-20241021105641372" style="zoom:50%;" /><img src="../images/image-20241021110813871.png" alt="image-20241021110813871" style="zoom:50%;" /></p>
<p>count++å’Œcount--ä¸¤æ­¥æœ‰å¯èƒ½å‡ºé”™</p>
<h4 id="race-condition">Race condition ç«æ€æ¡ä»¶<a class="headerlink" href="#race-condition" title="Permanent link">&para;</a></h4>
<p>å‡ºé”™çš„exampleï¼š</p>
<p><img src="../images/image-20241021111018744.png" alt="image-20241021111018744" style="zoom:50%;" /></p>
<p>å‡ºé”™çš„åŸå› ï¼šæŠ¢å å¼è°ƒåº¦ï¼Œå¤šä¸ªè¿›ç¨‹å¯¹shared dataè¿›è¡Œæ“ä½œ</p>
<p>Race condition å®šä¹‰ï¼ša memory location is accessed concurrently, and at least one access is a write</p>
<blockquote>
<p><strong>å¯¹äºè®¿é—®å…±äº«çš„å†…æ ¸æ•°æ®ï¼ŒéæŠ¢å å¼çš„å†…æ ¸æ˜¯å¦å—ç«æ€æ¡ä»¶çš„å½±å“ï¼Ÿ</strong></p>
<ul>
<li>å¯èƒ½ä¼šå—å½±å“ï¼Œå½“å¤šå¤„ç†å™¨å¯¹shared dataè¿›è¡Œæ“ä½œ</li>
</ul>
</blockquote>
<h3 id="62-critical-section-problem">6.2 ä¸´ç•ŒåŒºé—®é¢˜ critical-section problem<a class="headerlink" href="#62-critical-section-problem" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>What operations/processes may have critical problems in OS kernel?</strong></p>
<ul>
<li>cpu</li>
<li>ç”¨æˆ·æ€ï¼šä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹ï¼ˆæ»¡è¶³shared dataå’Œå¹¶å‘æ‰§è¡Œï¼‰</li>
</ul>
</blockquote>
<p><strong>ä¸´ç•Œèµ„æº</strong>ï¼šå¤šè¿›ç¨‹æˆ–å¤šè¿›ç¨‹ä¸­è¢«å…±äº«çš„èµ„æº(shared data)ä¸”ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨</p>
<p><strong>ä¸´ç•ŒåŒº</strong>ï¼šç¨‹åºä¸­ä¸€ä¸ªè®¿é—®å…¬å…±èµ„æºçš„ç¨‹åºç‰‡æ®µï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç è¢«ç§°ä¸ºä¸´ç•ŒåŒº</p>
<blockquote>
<p>[!NOTE]</p>
<p><strong>ä»¥ä¸‹æ˜¯ä¸´ç•Œèµ„æºå—ï¼Ÿ</strong></p>
<ul>
<li>å…¨å±€å…±äº«å˜é‡ï¼ˆæ˜¯ï¼‰ï¼Œå±€éƒ¨å˜é‡ï¼ˆä¸æ˜¯ï¼‰ï¼Œåªè¯»æ•°æ®ï¼ˆä¸æ˜¯ï¼‰ï¼ŒCPUï¼ˆä¸æ˜¯ï¼‰</li>
</ul>
</blockquote>
<p>å¯¹ä¸€ä¸ªè¿›ç¨‹ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªä¸´ç•ŒåŒºï¼›ä¸´ç•ŒåŒºå¯ä»¥åˆå¹¶ï¼ˆdependsï¼‰</p>
<blockquote>
<p>[!CAUTION]</p>
<p>å…±äº«èµ„æºæ‰éœ€è¦äº’æ–¥</p>
</blockquote>
<h4 id="solution">è§£å†³æ–¹æ¡ˆ solution<a class="headerlink" href="#solution" title="Permanent link">&para;</a></h4>
<h5 id="mutual-exclusion"><strong>Mutual Exclusion</strong>ï¼ˆäº’æ–¥/å¿™åˆ™ç­‰å¾…ï¼‰<a class="headerlink" href="#mutual-exclusion" title="Permanent link">&para;</a></h5>
<p>å¦‚æœè¿›ç¨‹ P<sub>i</sub> æ­£åœ¨å…¶ä¸´ç•ŒåŒºä¸­æ‰§è¡Œï¼Œåˆ™å…¶ä»–è¿›ç¨‹ä¸èƒ½åœ¨å…¶ä¸´ç•ŒåŒºä¸­æ‰§è¡Œ</p>
<h5 id="progress"><strong>Progress</strong>ï¼ˆç©ºé—²è®©è¿›ï¼‰<a class="headerlink" href="#progress" title="Permanent link">&para;</a></h5>
<p>å¦‚æœæ²¡æœ‰ä»»ä½•è¿›ç¨‹åœ¨å…¶ä¸´ç•ŒåŒºä¸­æ‰§è¡Œï¼Œå¹¶ä¸”å­˜åœ¨ä¸€äº›å¸Œæœ›è¿›å…¥å…¶ä¸´ç•ŒåŒºçš„è¿›ç¨‹ï¼Œåˆ™ä¸èƒ½æ— é™æœŸåœ°æ¨è¿Ÿé€‰æ‹©ä¸‹ä¸€ä¸ªå°†è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ï¼ˆå³å…è®¸ä¸€ä¸ªè¯·æ±‚è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ç«‹å³è¿›å…¥ä¸´ç•ŒåŒºï¼‰</p>
<h5 id="bounded-waiting"><strong>Bounded waiting</strong>ï¼ˆæœ‰é™ç­‰å¾…ï¼‰<a class="headerlink" href="#bounded-waiting" title="Permanent link">&para;</a></h5>
<p>åœ¨ä¸€ä¸ªè¿›ç¨‹å‘å‡ºè¿›å…¥å…¶ä¸´ç•ŒåŒºçš„è¯·æ±‚ä¹‹åï¼Œåœ¨è¯¥è¯·æ±‚è¢«æ‰¹å‡†ä¹‹å‰ï¼Œå¿…é¡»å¯¹å…è®¸å…¶ä»–è¿›ç¨‹è¿›å…¥å…¶ä¸´ç•ŒåŒºçš„<strong>æ¬¡æ•°</strong>è¿›è¡Œé™åˆ¶</p>
<ul>
<li>å‡è®¾æ¯ä¸ªè¿›ç¨‹ä»¥éé›¶é€Ÿåº¦æ‰§è¡Œ</li>
<li>æ²¡æœ‰å…³äº<em>N</em>ä¸ªè¿›ç¨‹ç›¸å¯¹é€Ÿåº¦çš„å‡è®¾</li>
</ul>
<h5 id="_6">è®©æƒç­‰å¾…<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h5>
<p>ï¼ˆåŸåˆ™ä¸Šåº”è¯¥éµå®ˆï¼Œä½†éå¿…é¡»ï¼‰å½“è¿›ç¨‹ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œåº”ç«‹å³é‡Šæ”¾å¤„ç†å™¨ï¼Œé˜²æ­¢è¿›ç¨‹å¿™åˆ™ç­‰å¾…ã€‚</p>
<h3 id="63">6.3 åŒæ­¥æœºåˆ¶<a class="headerlink" href="#63" title="Permanent link">&para;</a></h3>
<h4 id="_7">è½¯ä»¶æ–¹æ³•<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<h5 id="_8">å•æ ‡å¿—æ³•<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241023145626698.png" alt="image-20241023145626698" style="zoom:50%;" /></p>
<p>iå’Œjäº¤æ›¿æ‰§è¡Œ</p>
<ul>
<li>æ»¡è¶³Mutual Exclusion å’Œ bounded waiting</li>
<li>ä¸æ»¡è¶³progess</li>
</ul>
<h5 id="_9">åŒæ ‡å¿—åæ£€æŸ¥æ³•<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241023145544929.png" alt="image-20241023145544929" style="zoom:50%;" /></p>
<ul>
<li>æ»¡è¶³Mutual Exclusion</li>
<li>ä¸æ»¡è¶³Progressï¼ˆå­˜åœ¨CPUè°ƒåº¦çš„ä¸€ç§æƒ…å†µï¼Œä¸¤ä¸ªæ ‡å¿—éƒ½ä¸ºTRUEåä¸€ç›´å¾ªç¯ä¸‹å»ï¼‰</li>
<li>å¦‚æœæ²¡æœ‰æ­»å¾ªç¯æ˜¯bounded waitingï¼Œä½†å¯èƒ½æœ‰æ‰€ä»¥æ€»ä½“ä¸æ˜¯</li>
</ul>
<h5 id="_10">åŒæ ‡å¿—å…ˆæ£€æŸ¥æ³•<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241023150759551.png" alt="image-20241023150759551" style="zoom:50%;" /></p>
<p>å’Œå‰é¢ä¸¤ç§ç®—æ³•ç›¸æ¯”ï¼Œå…ˆwhileå†è®¾flagå€¼ï¼š</p>
<p><img src="../images/image-20241023150932808.png" alt="image-20241023150932808" style="zoom:50%;" /></p>
<ul>
<li><strong>ä¸æ»¡è¶³Mutual Exclusion</strong>ï¼ˆå­˜åœ¨CPUè°ƒåº¦çš„ä¸€ç§æƒ…å†µï¼Œä¸¤ä¸ªæ ‡å¿—éƒ½ä¸ºTRUEï¼Œå¹¶è¿›å…¥ä¸´ç•ŒåŒº</li>
<li>æ»¡è¶³Progres</li>
</ul>
<h5 id="petersons-solution">Petersonâ€™s Solution<a class="headerlink" href="#petersons-solution" title="Permanent link">&para;</a></h5>
<p>åŒè¿›ç¨‹è§£å†³æ–¹æ¡ˆ
å‡è®¾ LOAD å’Œ STORE æŒ‡ä»¤æ˜¯åŸå­çš„ï¼›å³ä¸èƒ½è¢«ä¸­æ–­ã€‚
ä¸¤ä¸ªè¿›ç¨‹å…±äº«ä¸¤ä¸ªå˜é‡ï¼š<code>int turn;Boolean flag[2];</code>
å˜é‡<code>turn</code>è¡¨ç¤ºè½®åˆ°è°è¿›å…¥ä¸´ç•ŒåŒºã€‚
flag æ•°ç»„ç”¨äºæŒ‡ç¤ºè¿›ç¨‹æ˜¯å¦å·²å‡†å¤‡å¥½è¿›å…¥ä¸´ç•ŒåŒºã€‚<code>flag[i] = true</code> è¡¨ç¤ºè¿›ç¨‹ P<sub>i</sub> å·²å‡†å¤‡å¥½</p>
<p>åŸºæœ¬æ€æƒ³ï¼š<img src="../images/image-20241023151545037.png" alt="image-20241023151545037" style="zoom:50%;" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">//Process Pi</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="n">turn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">turn</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">j</span><span class="p">);</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="n">CRITICAL</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">        </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="n">REMAINDER</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="p">}</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="c1">//Process Pj</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="n">turn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">turn</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="n">CRITICAL</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">        </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="n">REMAINDER</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>æ»¡è¶³mutual exception å’Œ progressï¼Œä¸ä¼š</li>
<li>æ»¡è¶³bounded waitingï¼Œboundæ˜¯1</li>
</ul>
<blockquote>
<p>[!CAUTION]</p>
<p>There are no guarantees that Peterson's solution works correctly on modern computer architectures.</p>
<p>Reasonï¼šè®¡ç®—æœºç¼–è¯‘ä¼˜åŒ– -&gt; ä»£ç çš„ä¹±åºæ‰§è¡Œã€å…ˆloadï¼ˆè¯»ï¼‰ï¼Œå†storeï¼ˆèµ‹å€¼ï¼‰ã€‘</p>
<p>Solutionï¼šMemory barrier ( å†…å­˜æ …æ  ) -- æ’å…¥è¿™æ¡æŒ‡ä»¤åå°±ä¸ä¼šä¹±åºæ‰§è¡Œäº†</p>
</blockquote>
<h5 id="bakery-algorithm-lamport">Bakery Algorithm (é¢åŒ…æˆ¿ç®—æ³•) Lamport<a class="headerlink" href="#bakery-algorithm-lamport" title="Permanent link">&para;</a></h5>
<p>Multiple-Process Solutionsï¼š for <strong>n</strong> processes</p>
<ol>
<li>ä»»ä½•æ—¶é—´ï¼Œæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ critical section ï¼›</li>
<li>æ¯ä¸ªè¿›ç¨‹æœ€ç»ˆéƒ½ä¼šè¿›å…¥ critical section ï¼›</li>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½èƒ½åœåœ¨ noncritical section ï¼›</li>
<li>ä¸èƒ½å¯¹è¿›ç¨‹çš„é€Ÿåº¦åšä»»ä½•å‡è®¾ã€‚</li>
</ol>
<p>åŸºæœ¬æ€æƒ³ï¼ˆæ’é˜Ÿå–å·ï¼‰ï¼š<img src="../images/image-20241023153601642.png" alt="image-20241023153601642" style="zoom:50%;" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">//Multiple-Process Solutions</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="k">do</span><span class="p">{</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="n">choosing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="n">number</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">{</span><span class="n">number</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">number</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="err">â€¦</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">[</span><span class="n">n</span><span class="mi">-1</span><span class="p">]}</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// é€‰å·ç </span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="n">choosing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="err">ï¼œ</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">choosing</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">number</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="err">ï¼œ</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">i</span><span class="p">));</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="n">CRITICAL</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">        </span><span class="n">number</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="n">REMAINDER</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>æ»¡è¶³mutual exception å’Œ progressï¼Œ</li>
<li>æ»¡è¶³bounded waitingï¼Œboundä¸º n-1</li>
</ul>
<h4 id="_11">ç¡¬ä»¶æ–¹æ³•<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p><strong>Synchronization Hardware</strong></p>
<p>Modern machines provide special atomic hardware <strong>instructions</strong></p>
<p>â€‹   -&gt; <mark>Atomic = non-interruptable</mark> (åŸå­æ“ä½œï¼Œä¸èƒ½ä¸­æ–­ï¼›åä¸‰ç§æ–¹æ³•éƒ½ç”¨äº†è¿™ä¸€æ€æƒ³)</p>
<p><strong>ä¼˜ç‚¹</strong>  </p>
<ul>
<li>
<p>é€‚ç”¨äºä»»æ„æ•°ç›®çš„è¿›ç¨‹ï¼Œåœ¨å•å¤„ç†å™¨æˆ–å¤šå¤„ç†å™¨ä¸Š</p>
</li>
<li>
<p>ç®€å•ï¼Œå®¹æ˜“éªŒè¯å…¶æ­£ç¡®æ€§</p>
</li>
<li>
<p>å¯ä»¥æ”¯æŒè¿›ç¨‹å†…å­˜åœ¨å¤šä¸ªä¸´ç•ŒåŒºï¼Œåªéœ€ä¸ºæ¯ä¸ªä¸´ç•ŒåŒºè®¾ç«‹ä¸€ä¸ªå¸ƒå°”å˜é‡</p>
</li>
</ul>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>
<p>è€—è´¹ CPU æ—¶é—´ï¼Œä¸èƒ½å®ç°â€œè®©æƒç­‰å¾…â€ </p>
</li>
<li>
<p>å¯èƒ½ä¸æ»¡è¶³æœ‰é™ç­‰å¾…ï¼šä»ç­‰å¾…è¿›ç¨‹ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªè¿›å…¥ä¸´ç•ŒåŒºï¼Œæœ‰çš„è¿›ç¨‹å¯èƒ½ä¸€ç›´é€‰ä¸ä¸Š </p>
</li>
<li>
<p>å¯èƒ½æ­»é”</p>
</li>
</ul>
<h5 id="disable-interrupts">å…³ä¸­æ–­æ³• Disable interrupts(ä¸­æ–­å±è”½æ³•)<a class="headerlink" href="#disable-interrupts" title="Permanent link">&para;</a></h5>
<p>æ€æƒ³ï¼šè¿›å…¥ä¸´ç•ŒåŒºå‰ç›´æ¥å±è”½ä¸­æ–­ï¼Œä¿è¯ä¸´ç•ŒåŒºèµ„æºé¡ºåˆ©ä½¿ç”¨ï¼›ä½¿ç”¨å®Œæ¯•ï¼Œæ‰“å¼€ä¸­æ–­</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="n">Disable</span><span class="w"> </span><span class="n">Interrupts</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="n">Critical</span><span class="w"> </span><span class="n">section</span><span class="p">;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="n">Enable</span><span class="w"> </span><span class="n">Interrupts</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="n">Remainder</span><span class="w"> </span><span class="n">section</span><span class="p">;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="p">}</span><span class="w"> </span>
</code></pre></div>
<h6 id="_12">ç¼ºç‚¹<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h6>
<ul>
<li>
<p><strong>å¯èƒ½å½±å“ç³»ç»Ÿæ•ˆç‡</strong>ï¼šæ»¥ç”¨å…³ä¸­æ–­ä¼šä¸¥é‡å½±å“ CPU æ‰§è¡Œæ•ˆç‡ï¼Œå…¶é”ä½CPUå¯èƒ½å¯¼è‡´åŸæœ¬ä¸€äº›çŸ­æ—¶é—´å³å¯å®Œæˆçš„éœ€è¦ç­‰å¾…å¼€ä¸­æ–­ï¼Œå½±å“cpuå¹¶å‘æ‰§è¡Œï¼Œcpuåˆ©ç”¨ç‡ä¸‹é™</p>
</li>
<li>
<p><strong>ä¸é€‚ç”¨äºå¤š CPU ç³»ç»Ÿ</strong>ï¼šä¸­æ–­å±è”½æ³•é€‚ç”¨äºå• CPU ç³»ç»Ÿï¼Œåœ¨å¤š CPU ç³»ç»Ÿä¸­<strong>æ— æ³•æœ‰æ•ˆåŒæ­¥</strong>å„ä¸ª CPU çš„æ“ä½œã€‚ </p>
</li>
<li><strong>å®‰å…¨æ€§é—®é¢˜</strong>ï¼šæ»¥ç”¨å…³ä¸­æ–­æƒåŠ›å¯èƒ½å¯¼è‡´ä¸¥é‡åæœï¼Œä¾‹å¦‚åœ¨å…³é—­ä¸­æ–­æœŸé—´ï¼Œä¸€äº›é‡è¦çš„ä¸­æ–­è¯·æ±‚å¯èƒ½è¢«é”™è¿‡ï¼Œå½±å“ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</li>
</ul>
<h5 id="testandset-lock-instructiontsl"><strong>TestAndSet Lock Instruction</strong>ï¼ˆTSLï¼‰<a class="headerlink" href="#testandset-lock-instructiontsl" title="Permanent link">&para;</a></h5>
<p>Test and modify the content of a word atomically.</p>
<p>Shared boolean variable lock, initialized to false.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">boolean</span><span class="w"> </span><span class="nf">TestAndSet</span><span class="w"> </span><span class="p">(</span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="n">boolean</span><span class="w"> </span><span class="n">rv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="o">*</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">rv</span><span class="o">:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="p">}</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">TestAndSet</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="w"> </span><span class="p">));</span><span class="cm">/* do nothing*/</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="c1">// critical section</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="c1">// remainder section </span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="p">};</span>
</code></pre></div>
<ul>
<li>æ»¡è¶³mutual exclusion, progress</li>
<li>ä¸æ»¡è¶³bounded waitingï¼ˆè¿›å…¥ä¸´ç•ŒåŒºé è¿æ°”ï¼‰ï¼Œä¸æ»¡è¶³è®©æƒç­‰å¾…</li>
<li>ç­‰å¾…è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ä¸ä¼šä¸»åŠ¨æ”¾å¼ƒCPU</li>
</ul>
<h5 id="swap-instruction">Swap Instruction<a class="headerlink" href="#swap-instruction" title="Permanent link">&para;</a></h5>
<p>æ€æƒ³</p>
<ol>
<li>
<p>å¯¹æ¯ä¸ªä¸´ç•Œèµ„æºï¼Œswapè®¾ç½®ä¸€ä¸ªå…¨å±€<code>bool</code>å˜é‡<code>lock</code>(åˆå€¼ä¸ºfalse) ï¼Œæ¯ä¸ªè¿›ç¨‹è®¾ç½®å±€éƒ¨å˜é‡<code>key</code>(åˆå€¼ä¸º true)</p>
</li>
<li>
<p>è¿›ç¨‹è°ƒç”¨<code>swap()</code>æŒ‡ä»¤è®¿é—®ä¸´ç•ŒåŒºï¼Œä¼šäº¤æ¢keyå’Œlockçš„å€¼ï¼Œå®ç°ä¸Šé”ï¼Œè¿›å…¥è®¿é—®</p>
</li>
<li>
<p>é€€å‡ºæ—¶æŠŠ<code>lock</code>é‡ç½®ä¸º<code>false</code></p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="n">TRUE</span><span class="p">)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">        </span><span class="n">Swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="c1">// critical section</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="c1">// remainder section </span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="p">}</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="kt">void</span><span class="w"> </span><span class="n">Swap</span><span class="p">(</span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="p">{</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="n">boolean</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">;</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="o">*</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="o">*</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>æ»¡è¶³mutual exclusion, progress</li>
<li>ä¸æ»¡è¶³bounded waitingï¼ˆ</li>
</ul>
<h5 id="the-compare_and_swap-cas-instruction"><strong>The compare_and_swap (CAS) Instruction</strong><a class="headerlink" href="#the-compare_and_swap-cas-instruction" title="Permanent link">&para;</a></h5>
<p>æ€æƒ³</p>
<ol>
<li>Executed atomically</li>
<li>Returns the original value of passed parameter <strong>value</strong></li>
<li>Set the variable <strong>value</strong> the value of the passed parameter <strong>new_value</strong> but only if <code>*value == expected</code> is true. That is, the swap takes place only under this condition.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">//Shared integer lock initialized to 0;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">){</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">compare_and_swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="cm">/* do nothing */</span><span class="w"> </span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="cm">/* critical section */</span><span class="w"> </span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="cm">/* remainder section */</span><span class="w"> </span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="p">}</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">compare_and_swap</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">new_value</span><span class="p">)</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">        </span><span class="o">*</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_value</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>æ»¡è¶³mutual exclusion, progress</li>
<li>ä¸æ»¡è¶³bounded waitingï¼ˆ</li>
</ul>
<p>è§£å†³åŠæ³•ï¼šæ’é˜Ÿ</p>
<h5 id="bounded-waiting-with-compare-and-swap"><strong>Bounded-waiting with compare-and-swap</strong><a class="headerlink" href="#bounded-waiting-with-compare-and-swap" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241028105047216.png" alt="image-20241028105047216" style="zoom:33%;" /></p>
<ul>
<li>æ»¡è¶³mutual exclusion, progresså’Œbounded waiting</li>
</ul>
<blockquote>
<p>[!CAUTION]</p>
<p>ä»¥ä¸Šå¯¹TSå’ŒSwapæŒ‡ä»¤çš„æè¿°ä»…ä¸ºåŠŸèƒ½æè¿°ï¼Œå®ƒä»¬ç”±ç¡¬ä»¶é€»è¾‘å®ç°ï¼Œä¸ä¼šè¢«ä¸­æ–­</p>
</blockquote>
<h4 id="mutex-locks">äº’æ–¥é” Mutex locks<a class="headerlink" href="#mutex-locks" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20241028112035245.png" alt="image-20241028112035245" style="zoom:33%;" /></p>
<p>But this solution requires <strong>busy waiting</strong> <strong>ï¼ˆä¸åœç©ºå¾ªç¯ï¼‰</strong></p>
<p>This lock therefore called a <strong>spinlock</strong> <strong>ï¼ˆä¹Ÿå« è‡ªæ—‹é”ï¼‰</strong></p>
<ul>
<li>ä¸»è¦é‡‡ç”¨ç¡¬ä»¶æœºåˆ¶æ¥å®ç°</li>
<li>ç¼ºç‚¹ï¼šå¿™ç­‰å¾…</li>
</ul>
<h4 id="semaphores">ä¿¡å·é‡æ–¹æ³• Semaphores<a class="headerlink" href="#semaphores" title="Permanent link">&para;</a></h4>
<p>ç”¨æ¥è§£å†³åŒæ­¥å’Œäº’æ–¥é—®é¢˜</p>
<p>Two indivisible operations modify S: </p>
<ul>
<li>
<p><code>wait()</code> and <code>signal()</code>, originally called<code>P()</code>and<code>V()</code> </p>
</li>
<li>
<p>Proberen(æµ‹è¯•)ï¼ŒVerhogen(å¢åŠ ) </p>
</li>
<li>
<p>åªèƒ½åœ¨waitå’Œsignalä¸­å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œ</p>
</li>
<li>
<p>ä½çº§çš„è¿›ç¨‹é€šä¿¡åŸè¯­</p>
</li>
</ul>
<p>Can only be accessed via two indivisible (atomic) operations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">wait</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//èµ„æºè¿›å…¥ä¸´ç•ŒåŒº</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// no-opï¼ŒS &lt;= 0ï¼šæœ‰è¿›ç¨‹åœ¨ä¸´ç•ŒåŒº</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="n">S</span><span class="o">--</span><span class="p">;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="p">}</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="n">signal</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//èµ„æºé€€å‡ºä¸´ç•ŒåŒºï¼Œç©ºå‡ºèµ„æºç»™å…¶ä»–è¿›ç¨‹</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="n">S</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="p">}</span>
</code></pre></div>
<p>Can be implemented without busy waiting &rarr; å®ç°è®©æƒç­‰å¾…</p>
<blockquote>
<p>[!IMPORTANT]</p>
<p><img src="../images/image-20241030152700179.png" alt="image-20241030152700179" style="zoom:40%;" /></p>
<p>S.value=0 å·²ç»æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ä¸´ç•ŒåŒº</p>
</blockquote>
<p>ä¿¡å·é‡ç§ç±»ï¼š</p>
<p><img src="../images/image-20241028113509355.png" alt="image-20241028113509355" style="zoom:33%;" /></p>
<p>ğŸ‘†äº’æ–¥è®¿é—®</p>
<p>åŒæ­¥æ“ä½œï¼š</p>
<p><img src="../images/image-20241030143820461.png" alt="image-20241030143820461" style="zoom:33%;" /></p>
<p>Questionï¼šæœ‰å››ä¸ªæˆ¿é—´ï¼Œå››ä¸ªè¿›ç¨‹è®¿é—®</p>
<p><img src="../images/image-20241030144512191.png" alt="image-20241030144512191" style="zoom: 33%;" /></p>
<h5 id="semaphore-implementation">å®ç° Semaphore Implementation<a class="headerlink" href="#semaphore-implementation" title="Permanent link">&para;</a></h5>
<h6 id="busy-waiting">Busy waiting<a class="headerlink" href="#busy-waiting" title="Permanent link">&para;</a></h6>
<p><img src="../images/image-20241030144747181.png" alt="image-20241030144747181" style="zoom:33%;" /></p>
<p><img src="../images/image-20241030145309092.png" alt="image-20241030145309092" style="zoom:33%;" /></p>
<p>å¯¹Pä¸å¤ªå‹å¥½</p>
<h6 id="no-busy-waiting">no Busy waiting éå¿™ç­‰<a class="headerlink" href="#no-busy-waiting" title="Permanent link">&para;</a></h6>
<p><img src="../images/image-20241030145617397.png" alt="image-20241030145617397" style="zoom:33%;" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="cm">/*Implementation of wait*/</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">wait</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">){</span><span class="w"> </span><span class="c1">//å–ä¿¡å·é‡æ“ä½œ</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="n">value</span><span class="o">--</span><span class="p">;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">        </span><span class="c1">// add this process to waiting queue</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">        </span><span class="n">block</span><span class="p">();</span><span class="w"> </span><span class="c1">// æ’åˆ°Sçš„waiting queueä¸­</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="p">}</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="cm">/*Implementation of signal*/</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="n">Signal</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">){</span><span class="w"> </span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="n">value</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">        </span><span class="c1">// remove a process P from the waiting queue</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">        </span><span class="n">wakeup</span><span class="p">(</span><span class="n">P</span><span class="p">);</span><span class="w"> </span><span class="c1">// æŠŠä¸€ä¸ªè¿›ç¨‹å”¤é†’ï¼Œç§»å‡ºwaiting queueï¼Œåˆ°ä¸´ç•ŒåŒºæ‰§è¡Œ</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>Sçš„å–å€¼å¯ä»¥æ˜¯è´Ÿçš„äº†ï¼ˆç›¸æ¯”åŸå…ˆçš„waitå’Œsignalï¼‰ï¼ŒSå–è´Ÿè¡¨ç¤ºå½“å‰é˜Ÿåˆ—æ’é˜Ÿè¿›ç¨‹çš„ä¸ªæ•°</li>
</ul>
<p><img src="../images/image-20241030151249807.png" alt="image-20241030151249807" style="zoom:33%;" /></p>
<p><img src="../images/image-20241030151458384.png" alt="image-20241030151458384" style="zoom:33%;" /></p>
<p><img src="../images/image-20241030151550913.png" alt="image-20241030151550913" style="zoom:33%;" /></p>
<blockquote>
<p>[!WARNING]</p>
<p>è¿›ç¨‹åœ¨æ ‡é»„å¤„sleepåï¼Œå†æ¬¡è¢«å”¤é†’æ—¶ä¼šä»å¤´å¼€å§‹æ‰§è¡Œï¼</p>
</blockquote>
<p>Busy waiting? No busy waiting?</p>
<ul>
<li>No busy waiting</li>
</ul>
<p>What if one must choose busy waiting?</p>
<ul>
<li>ç”µè„‘è¦å¤šCPU</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶é—´ &gt; busy waitingï¼Œé€‰æ‹©no busy waitingï¼›&lt;çš„è¯ä¸¤è€…éƒ½è¡Œ</li>
</ul>
<h5 id="deadlock-and-starvation"><strong>Deadlock and Starvation</strong><a class="headerlink" href="#deadlock-and-starvation" title="Permanent link">&para;</a></h5>
<p><strong>Deadlock æ­»é”</strong> â€“ two or more processes are waiting indefinitely for an event that can be caused by only one of the waiting processes</p>
<p><strong>Starvation é¥¥é¥¿</strong> â€“ indefinite blocking. A process may never be removed from the semaphore queue in which it is suspended</p>
<h5 id="classical-problems-of-synchronization"><strong>Classical Problems of Synchronization</strong><a class="headerlink" href="#classical-problems-of-synchronization" title="Permanent link">&para;</a></h5>
<h6 id="bounded-buffer-problem">Bounded-Buffer Problem<a class="headerlink" href="#bounded-buffer-problem" title="Permanent link">&para;</a></h6>
<p><em>N</em> buffers, each can hold one item</p>
<ul>
<li>Semaphore <strong>mutex</strong> initialized to the value <strong>1</strong> äº’æ–¥ä¿¡å·é‡1ä¸ª</li>
<li>Semaphore <strong>full</strong> initialized to the value 0, counting full items</li>
<li>Semaphore <strong>empty</strong> initialized to the value <strong>N</strong>, counting empty items</li>
</ul>
<p><img src="../images/image-20241030153449418.png" alt="image-20241030153449418" style="zoom:33%;" /></p>
<h6 id="readers-and-writers-problem">Readers and Writers Problem<a class="headerlink" href="#readers-and-writers-problem" title="Permanent link">&para;</a></h6>
<p>A data set is shared among a number of concurrent processes</p>
<ul>
<li>Readers â€“ only read the data set; they do not perform any updates</li>
<li>Writers â€“ can both read and write.</li>
</ul>
<p><strong>Problem</strong> â€“ allow multiple readers to read at the same time. Only one single writer can access the shared data at the same time.  ( è¯»è€…ä¼˜å…ˆ ) </p>
<p>Shared Data</p>
<ul>
<li>
<p>Data set</p>
</li>
<li>
<p>Semaphore <strong>mutex</strong> initialized to 1, to ensure mutual exclusion when readcount is updated.</p>
</li>
<li>
<p>Semaphore <strong>wrt</strong> initialized to 1.</p>
</li>
<li>
<p>Integer <strong>readcount</strong> initialized to 0 è¯»è€…çš„æ•°é‡</p>
</li>
</ul>
<p><img src="../images/image-20241030154705621.png" alt="image-20241030154705621" style="zoom:33%;" /></p>
<h6 id="dining-philosophers-problem">Dining-Philosophers Problem<a class="headerlink" href="#dining-philosophers-problem" title="Permanent link">&para;</a></h6>
<p>å“²å­¦å®¶å°±é¤é—®é¢˜</p>
<p>Shared data </p>
<ul>
<li>
<p>Bowl of rice (data set)</p>
</li>
<li>
<p>Semaphore <code>chopstick [5]</code> initialized to 1</p>
</li>
</ul>
<p><img src="../images/image-20241030155058113.png" alt="image-20241030155058113" style="zoom:33%;" /></p>
<p>å¦‚æœåªè®¾ç½®ä¸€ä¸ªç­·å­çš„ä¿¡å·é‡ï¼Œè®¾ç½®ä¸º5ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿä¸€ä¸ªç­·å­å¯èƒ½è¢«æ‹¿ä¸¤æ¬¡ï¼Œè¿åäº’æ–¥æ€§</p>
<h4 id="_13">ç®¡ç¨‹æ–¹æ³•<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>å®ç°äº’æ–¥å’ŒåŒæ­¥</p>
<h5 id="monitor">Monitor<a class="headerlink" href="#monitor" title="Permanent link">&para;</a></h5>
<p>A high-level abstraction that provides a convenient and effective mechanism for process synchronization. </p>
<p>Only one process may be active within the monitor at a time. (hint: the other processes may be sleeping within the monitor)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">//ç®¡ç¨‹å˜é‡åªæœ‰å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">monitor</span><span class="w"> </span><span class="n">monitor</span><span class="o">-</span><span class="n">name</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p">{</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="c1">// shared variable declarations</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="n">procedure</span><span class="w"> </span><span class="nf">P1</span><span class="w"> </span><span class="p">(</span><span class="err">â€¦</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">â€¦</span><span class="p">.</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="err">â€¦</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">        </span><span class="n">procedure</span><span class="w"> </span><span class="n">Pn</span><span class="w"> </span><span class="p">(</span><span class="err">â€¦</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="err">â€¦â€¦</span><span class="p">}</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="n">Initialization</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="err">â€¦</span><span class="p">.)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">â€¦</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="err">â€¦</span><span class="w"> </span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="p">}</span>
</code></pre></div>
<p><img src="../images/image-20241104104332459.png" alt="image-20241104104332459" style="zoom:33%;" />å‡½æ•°æŒ‚èµ·</p>
<p>x.wait()é˜»å¡è¯¥è¿›ç¨‹å¹¶å°†ä»–æ’å…¥åˆ°xåºåˆ—</p>
<h5 id="_14">ç®¡ç¨‹æ–¹æ³•è§£å†³å“²å­¦å®¶å°±é¤é—®é¢˜<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">monitor</span><span class="w"> </span><span class="n">DP</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">THINKING</span><span class="p">;</span><span class="w"> </span><span class="n">HUNGRY</span><span class="p">,</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">          </span><span class="n">condition</span><span class="w"> </span><span class="n">self</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">];</span><span class="w"> </span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">          </span><span class="c1">//philosopher i can delay herself when unable to get chopsticks</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">          </span><span class="kt">void</span><span class="w"> </span><span class="nf">pickup</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// æ‹¿ç­·å­</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">              </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HUNGRY</span><span class="p">;</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">              </span><span class="n">test</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"> </span><span class="c1">// çœ‹çœ‹å·¦è¾¹å³è¾¹æœ‰æ²¡æœ‰äººåœ¨eating</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">              </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="c1">// è‡ªå·±hungry</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">                  </span><span class="n">self</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">wait</span><span class="p">;</span><span class="w"> </span><span class="c1">// ç­·å­è¿˜ä¸å¯ç”¨ï¼Œç­‰å¾…</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">          </span><span class="p">}</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">          </span><span class="kt">void</span><span class="w"> </span><span class="nf">putdown</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">              </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">THINKING</span><span class="p">;</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">              </span><span class="c1">// test left and right neighbors</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">              </span><span class="n">test</span><span class="p">((</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"> </span><span class="c1">// å¦‚è‹¥æ»¡è¶³åˆ™å”¤é†’è¿›è¡Œåƒé¥­</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">              </span><span class="n">test</span><span class="p">((</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">          </span><span class="p">}</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">          </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">              </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">                  </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">HUNGRY</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">                  </span><span class="p">(</span><span class="n">state</span><span class="p">[(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">                  </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EATING</span><span class="w"> </span><span class="p">;</span>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">                  </span><span class="n">self</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">signal</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="c1">//æ‰§è¡Œæ—¶ä¸åœ¨signalä¸­ç­‰å¾…ï¼Œè¿™å¥signalæ²¡æœ‰ç”¨</span>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">              </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">          </span><span class="n">initialization_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">              </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">                  </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">THINKING</span><span class="p">;</span>
<a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">          </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<ul>
<li>When the left and right philosophers, <strong>self[(i+4)%5]</strong> and <strong>self[(i+1)%5]</strong></li>
</ul>
<p>continue to eat, <strong>self[i]</strong> may <em>starve</em></p>
<h4 id="_15">ä¾‹å­<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<h5 id="pthreads">Pthreads<a class="headerlink" href="#pthreads" title="Permanent link">&para;</a></h5>
<p>It provides:</p>
<ul>
<li>
<p>mutex locks</p>
</li>
<li>
<p>condition variables</p>
</li>
</ul>
<p>Non-portable extensions include:</p>
<ul>
<li>
<p>read-write locks</p>
</li>
<li>
<p>spin locks</p>
</li>
</ul>
<p>Using <code>pthread_cond_wait()</code> &amp; <code>pthread_cond_signal()</code></p>
<h3 id="_16">é¢˜ç›®<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>1.</p>
<h2 id="7-deadlock">7 æ­»é” Deadlock<a class="headerlink" href="#7-deadlock" title="Permanent link">&para;</a></h2>
<h3 id="71-the-deadlock-problem">7.1 The Deadlock Problem<a class="headerlink" href="#71-the-deadlock-problem" title="Permanent link">&para;</a></h3>
<p><strong>æ­»é”</strong>ï¼šå¤šä¸ªè¿›ç¨‹å› ç«äº‰å…±äº«èµ„æºè€Œé€ æˆç›¸äº’ç­‰å¾…çš„ä¸€ç§åƒµå±€ï¼Œä½¿å¾—å„ä¸ªè¿›ç¨‹éƒ½è¢«é˜»å¡ï¼Œè‹¥æ— å¤–</p>
<p>åŠ›ä½œç”¨ï¼Œè¿™äº›è¿›ç¨‹éƒ½å°†æ°¸è¿œä¸èƒ½å†å‘å‰æ¨è¿›</p>
<h4 id="_17">äº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20241106152044852.png" alt="image-20241106152044852" style="zoom:33%;" /></p>
<blockquote></blockquote>
<h3 id="72-system-model">7.2 ç³»ç»Ÿæ¨¡å‹ System Model<a class="headerlink" href="#72-system-model" title="Permanent link">&para;</a></h3>
<p>resource type &amp; resource instances</p>
<h4 id="resource-allocation-graph">èµ„æºåˆ†é…å›¾ Resource-Allocation Graph<a class="headerlink" href="#resource-allocation-graph" title="Permanent link">&para;</a></h4>
<p>A set of vertices<strong>é¡¶ç‚¹ V</strong> and a set of edges<strong>è¾¹ E</strong></p>
<p><img src="../images/image-20241106153033476.png" alt="image-20241106153033476" style="zoom:33%;" /></p>
<p>é¡¶ç‚¹è¡¨ç¤ºèµ„æºRæˆ–è¿›ç¨‹P</p>
<p>è¾¹ï¼š<strong>P-&gt;R ç­‰å¾…èµ„æº</strong>; <strong>R-&gt;P å¯ä»¥ä½¿ç”¨èµ„æºï¼ˆèµ„æºRå·²ç»è¢«På ç”¨ï¼‰</strong></p>
<p>æ­»é”ä¸€å®šæœ‰ç¯ï¼Œæœ‰ç¯ä¸ä¸€å®šæ­»é”</p>
<p>If graph contains no cycles =&gt; no deadlock. æ— ç¯ä¸€å®šæ²¡æœ‰æ­»é”</p>
<p>If graph contains a cycle =&gt;</p>
<ul>
<li>
<p>if only one instance per resource type, then deadlock.</p>
</li>
<li>
<p>if several instances per resource type, possibility of deadlock.</p>
</li>
</ul>
<h3 id="73-methods-for-handling-deadlocks">7.3 æ­»é”å¤„ç†æ–¹æ³• Methods for Handling Deadlocks<a class="headerlink" href="#73-methods-for-handling-deadlocks" title="Permanent link">&para;</a></h3>
<p>Ensure that the system will never enter a deadlock state. è®©ç³»ç»Ÿæ°¸è¿œä¸è¿›å…¥æ­»é”çŠ¶æ€ ---- <strong>Prevention æ­»é”é¢„é˜²</strong>ã€ <strong>Avoidance æ­»é”é¿å…</strong></p>
<p>Allow the system to enter a deadlock state and then recover. å…è®¸ç³»ç»Ÿè¿›å…¥æ­»é”çŠ¶æ€ï¼Œä½†å¯ä»¥æ¢å¤ ----<strong>Detection æ­»é”æ£€æµ‹</strong>ã€ <strong>Recovery æ­»é”è§£é™¤</strong></p>
<p>Ignore the problem and pretend that deadlocks never occur in the system. å¿½ç•¥ï¼Œå‡è£…ä¸å‡ºç°æ­»é” ---- <strong>é¸µé¸Ÿç®—æ³•</strong></p>
<ul>
<li>é¸µé¸Ÿç®—æ³• is used by most operating systems, including UNIXã€Linuxã€Windows.
  ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªï¼Ÿç”¨æˆ·è¿è¡Œå¤šï¼Œè§£å†³ä»£ä»·å°‘</li>
</ul>
<h4 id="deadlock-prevention">Deadlock Prevention (é¢„é˜²)<a class="headerlink" href="#deadlock-prevention" title="Permanent link">&para;</a></h4>
<p>ç ´åæ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ä¹‹ä¸€</p>
<p>Restrain the ways request can be made.</p>
<ol>
<li><strong>Prevent Mutual Exclusion ä¸äº’æ–¥</strong> â€“ not required for sharable resources; must hold for nonsharable resources ä¸å…±äº«èµ„æºï¼Œå®é™…ä¸­ä¸å¤ªå¯è¡Œ</li>
<li><strong>Prevent Hold and Wait ä¸è¯·æ±‚ç­‰å¾…</strong> - must guarantee that whenever a process requests a resource, it does not hold any other resources.</li>
<li>Require process to request and be allocated all its resources before it begins execution, or allow process to request resources only when the process has none (<strong>release all current resources before requesting any additional ones</strong>).</li>
<li>
<p><strong>Low resource utilization</strong>; <strong>starvation possible</strong>. (example: copy data from DVD drive to a disk file, sorts the file, then prints the results to a printer.)</p>
</li>
<li>
<p><strong>Prevent No Preemption å¯å‰¥å¤º</strong> â€“ å˜æˆéæŠ¢å å¼ï¼Œå®é™…ä¸­ä¸å¤ªå¯è¡Œ</p>
</li>
<li><strong>Prevent Circular Wait ä¸å¾ªç¯ç­‰å¾…</strong> â€“ impose a total <strong>ordering</strong> of all resource types, and require that each process requests resources in an increasing order of enumeration. </li>
</ol>
<p>ä»¥ä¸Šæ–¹æ³•åœ¨å®é™…ä¸­éƒ½ä¸å¤ªå¯è¡Œ</p>
<h4 id="deadlock-avoidance">Deadlock Avoidance (é¿å…)<a class="headerlink" href="#deadlock-avoidance" title="Permanent link">&para;</a></h4>
<p>é€šè¿‡åŠ¨æ€æ£€æµ‹èµ„æºåˆ†é…çš„å®‰å…¨æ€§ï¼Œç¡®ä¿ç³»ç»Ÿä¸ä¼šè¿›å…¥ä¸å®‰å…¨çŠ¶æ€</p>
<ul>
<li>ä¸ºå®ç°å®‰å…¨æ€§ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“</li>
<li>each process declares the maximum number of resources of each type that it may need</li>
<li>The deadlock-avoidance algorithm dynamically examines the resource-allocation state to ensure that there can never be a circular-wait condition.</li>
<li>Resource-allocation state is defined by the number of 
    available and allocated resources, and the maximum 
    demands of the processes.</li>
</ul>
<h5 id="safe-state">safe state<a class="headerlink" href="#safe-state" title="Permanent link">&para;</a></h5>
<p><P1 , P2 , â€¦, Pn> ç§°ä¸ºå®‰å…¨åºåˆ—ã€‚å¦‚æœç³»ç»Ÿä¸å­˜åœ¨å®‰å…¨åºåˆ—ï¼Œåˆ™ç§°ç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€</p>
<p>å¯¹äºè¿›ç¨‹åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹Piï¼Œå½“å‰ç³»ç»Ÿå·²ç»åˆ†é…äº†ä¸€äº›èµ„æºï¼Œè¿˜å‰©ä¸‹ä¸€äº›èµ„æºã€‚å¦‚æœ <strong>Piå‰é¢çš„èµ„æºä¹‹å’Œ+ç³»ç»Ÿå‰©ä¸‹çš„èµ„æº èƒ½å¤Ÿæ»¡è¶³Piæ‰§è¡Œå®Œæ¯•</strong>ï¼Œåˆ™è¿™ä¸ªåºåˆ—æ˜¯ä¸ªå®‰å…¨çŠ¶æ€ã€‚</p>
<p><img src="../images/image-20241111103432235.png" alt="image-20241111103432235" style="zoom:33%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>If a system is in safe state =&gt; no deadlocks. å®‰å…¨çŠ¶æ€ä¸€å®šæ— æ­»é”</p>
<p>If a system is in unsafe state =&gt; possibility of deadlock. ä¸å®‰å…¨å¯èƒ½æœ‰æ­»é”</p>
<p>Avoidance =&gt; ensure that a system will never enter an unsafe state.</p>
</blockquote>
<p><img src="../images/image-20241111104223355.png" alt="image-20241111104223355" style="zoom:33%;" /></p>
<h5 id="avoidance-algorithms">Avoidance algorithms<a class="headerlink" href="#avoidance-algorithms" title="Permanent link">&para;</a></h5>
<p><strong>Single</strong> instance of a resource type. Use a resourceallocation graph</p>
<p><strong>Multiple</strong> instances of a resource type. Use the bankerâ€™s algorithm</p>
<h6 id="resource-allocation-graph-algorithm">Resource-Allocation Graph Algorithm èµ„æºåˆ†é…å›¾ç®—æ³•<a class="headerlink" href="#resource-allocation-graph-algorithm" title="Permanent link">&para;</a></h6>
<p>Claim edge Pi -&gt; Rj indicated that process Pi may request resource Rj</p>
<p>æœ‰ä¸‰ç§è¾¹ï¼šclaim edgeã€request edge å’Œ assignment edge</p>
<p>ï¼Ÿ</p>
<h6 id="bankers-algorithm">Bankerâ€™s Algorithm é“¶è¡Œå®¶ç®—æ³•<img alt="ğŸ”¥" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f525.svg" title=":fire:" /><a class="headerlink" href="#bankers-algorithm" title="Permanent link">&para;</a></h6>
<p><img src="../images/image-20241111110516636.png" alt="image-20241111110516636" style="zoom:33%;" /></p>
<p>æ•°æ®ç»“æ„</p>
<p><img src="../images/image-20241111110607001.png" alt="image-20241111110607001" style="zoom:33%;" /></p>
<p>Example</p>
<p><img src="../images/image-20241111111754885.png" alt="image-20241111111754885" style="zoom:33%;" /></p>
<p><img src="../images/image-20241111112228808.png" alt="image-20241111112228808" style="zoom:33%;" /></p>
<h5 id="safety-algorithm">Safety Algorithm<a class="headerlink" href="#safety-algorithm" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241111111035473.png" alt="image-20241111111035473" style="zoom:33%;" /></p>
<h4 id="deadlock-detection">Deadlock Detection ( æ£€æµ‹ )<a class="headerlink" href="#deadlock-detection" title="Permanent link">&para;</a></h4>
<p>æœ¬è´¨ï¼šsafety ç®—æ³•ï¼Œå…¨éƒ¨æ»¡è¶³å°±æ²¡æœ‰æ­»é”</p>
<h5 id="single-instance-of-each-resource-type">Single Instance of Each Resource Type<a class="headerlink" href="#single-instance-of-each-resource-type" title="Permanent link">&para;</a></h5>
<p>æ£€æŸ¥wait for graphæœ‰æ²¡æœ‰ç¯</p>
<p><img src="../images/image-20241111112900123.png" alt="image-20241111112900123" style="zoom:33%;" /></p>
<h5 id="several-instances-of-a-resource-type">Several Instances of a Resource Type<a class="headerlink" href="#several-instances-of-a-resource-type" title="Permanent link">&para;</a></h5>
<p>è°ƒç”¨safetyç®—æ³•</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(m Ã— n^2^)</p>
<h5 id="completely-reducible-graph">Completely Reducible Graph å¯å®Œå…¨åŒ–ç®€å›¾<a class="headerlink" href="#completely-reducible-graph" title="Permanent link">&para;</a></h5>
<p>èƒ½æ¶ˆå»å›¾ä¸­æ‰€æœ‰è¾¹ï¼Œèƒ½åˆ™ç§°ä¸ºå¯å®Œå…¨åŒ–ç®€å›¾</p>
<p>æ‰¾å‡ºä¸€ä¸ªæ—¢ä¸é˜»å¡åˆéç‹¬ç«‹çš„è¿›ç¨‹ç»“ç‚¹ Pi</p>
<p>åœ¨é¡ºåˆ©çš„æƒ…å†µä¸‹ï¼Œåˆ†é…ç»™å…¶èµ„æºè®©å…¶å®Œæˆï¼Œæ¶ˆå»æ‰€æœ‰è¾¹å˜æˆå­¤ç«‹ç‚¹</p>
<p>å¾ªç¯ä¸Šè¿°ä¸¤æ­¥æ“ä½œï¼Œç›´è‡³æ¶ˆå»æ‰€æœ‰è¾¹ï¼Œä»£è¡¨æ— æ­»é”ã€‚</p>
<h3 id="77-recovery-from-deadlock">7.7 Recovery from Deadlock<a class="headerlink" href="#77-recovery-from-deadlock" title="Permanent link">&para;</a></h3>
<p>èµ„æºå‰¥å¤ºæ³•ï¼šæŠŠéƒ¨åˆ†è¿›ç¨‹æŒ‚èµ·ï¼Œå‰¥å¤ºå…¶èµ„æº</p>
<p>æ’¤é”€è¿›ç¨‹æ³•ï¼šæ’¤é”€éƒ¨åˆ†è¿›ç¨‹ï¼Œé‡Šæ”¾èµ„æº</p>
<p>è¿›ç¨‹å›é€€æ³•ï¼šè®©ä¸€ä¸ªè¿›ç¨‹æˆ–å¤šä¸ªè¿›ç¨‹å›é€€åˆ°é¿å…æ­»é”çš„åœ°æ­¥ï¼Œé‡Šæ”¾ä¸­é—´èµ„æº</p>
<p>ä¾æ®ï¼šè¿›ç¨‹çš„ä¼˜å…ˆçº§ã€å·²æ‰§è¡Œæ—¶é—´ã€å‰©ä½™æ—¶é—´ã€å·²ç”¨èµ„æºã€äº¤äº’è¿˜æ˜¯æ‰¹å¤„ç†ç­‰</p>
<h4 id="resource-preemption">Resource Preemption<a class="headerlink" href="#resource-preemption" title="Permanent link">&para;</a></h4>
<p>ï® Selecting a victim â€“ minimize cost.
ï® Rollback â€“ return to some safe state, restart process for that state.
ï® Starvation â€“ same process may always be picked as victim, include number of rollback in cost factor</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="æœ€åæ›´æ–°">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024å¹´11æœˆ12æ—¥ 22:29:30</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="åˆ›å»ºæ—¥æœŸ">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024å¹´11æœˆ12æ—¥ 22:29:30</span>
  </span>

    
    
    
  </aside>




<div id="__comments">
  
    <h2 ><!-- è¯„è®º -->è¯„è®ºåŒº~</h2>
    
    æœ‰ç”¨çš„è¯è¯·ç»™æˆ‘ä¸ªèµå’Œ star => <a href="https://cindyzhou2003.github.io/mymkdocs/">
        <img alt="GitHub stars" src="https://img.shields.io/github/stars/CindyZhou2003/mymkdocs.svg?style=plastic&amp;label=Stars"></a>
    
    
    </div>
    <script src="https://giscus.app/client.js"
        data-repo="CindyZhou2003/mymkdocs"
        data-repo-id="R_kgDOJHRt5g"
        data-category="General"
        data-category-id="DIC_kwDOJHRt5s4Cge0r"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>

        updateScheme();

    </script>
    
    
    <!-- Synchronize Giscus theme with palette -->
    <script>
    var giscus = document.querySelector("script[src*=giscus]")
    
    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme) 
    }
    
    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
            var theme = palette.color.scheme === "slate" ? "dark" : "light"
            localStorage.setItem("data-md-color-scheme", palette.color.scheme === "slate" ? "slate" : "default");
            /* Instruct Giscus to change theme */
            var frame = document.querySelector(".giscus-frame")
            frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
            )
        }
        })
    })
    </script>
                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  å›åˆ°é¡µé¢é¡¶éƒ¨
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="é¡µè„š" >
        
          
          <a href="PIS.html" class="md-footer__link md-footer__link--prev" aria-label="ä¸Šä¸€é¡µ: ä¿¡æ¯å®‰å…¨åŸç†">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                ä¸Šä¸€é¡µ
              </span>
              <div class="md-ellipsis">
                ä¿¡æ¯å®‰å…¨åŸç†
              </div>
            </div>
          </a>
        
        
          
          <a href="CN.html" class="md-footer__link md-footer__link--next" aria-label="ä¸‹ä¸€é¡µ: è®¡ç®—æœºç½‘ç»œ">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                ä¸‹ä¸€é¡µ
              </span>
              <div class="md-ellipsis">
                è®¡ç®—æœºç½‘ç»œ
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 <a href="https://github.com/CindyZhou2003/mymkdocs"  target="_blank" rel="noopener">Cindy</a>'æœ¬é¡µé¢çš„å…¨éƒ¨å†…å®¹åœ¨ <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC BY-SA 4.0</a> å’Œ <a href="https://github.com/zTrix/sata-license">SATA</a> åè®®ä¹‹æ¡æ¬¾ä¸‹æä¾›ï¼Œé™„åŠ æ¡æ¬¾äº¦å¯èƒ½åº”ç”¨'
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/CindyZhou2003/mymkdocs" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "navigation.indexes", "navigation.expand", "toc.follow", "navigation.top", "search.suggest", "navigation.footer", "navigation.tabs", "navigation.tracking", "navigation.instant.progress", "content.code.copy", "search.highlight", "search.share", "content.code.annotate", "navigation.tabs"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="https://gcore.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
      
        <script src="../js/katex.js"></script>
      
        <script src="../js/tablesort.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>